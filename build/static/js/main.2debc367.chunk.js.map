{"version":3,"sources":["colors.js","HelperFunctions.js","Timechart.js","Regionchart.js","Layout.js","Bubblechart.js","Options.js","ParseData.js","Map.js","App.js","reportWebVitals.js","index.js"],"names":["colors","hdi_category","inform_severity","blue","lightblue","lightnavy","red","lightred","green","ifrcgreen","black","lightgrey","darkgrey","white","olive","purple","orange","pink","c","regions","addCommas","nStr","x","split","x1","x2","length","rgx","test","replace","nFormatter","num","digits","arguments","undefined","item","value","symbol","slice","reverse","find","toFixed","yScaleCases","yScaleDeaths","yScaleVaccines","yAxisCases","yAxisDeaths","yAxisVaccines","yScaleCasesAxis","yScaleDeathsAxis","yScaleVaccinesAxis","xScale","xAxis","xScaleAxis","xScaleEvents","maxDate","minDate","md","vgroupedData","hoverBar","timelineTooltip","eventTooltip","tData","drawTimechart","data","options","Date","min_date","max_date","groupedData","who_data","forEach","d","i","timeline_frequency","date","week_start","month_start","ifrc_region","new_cases","new_deaths","cumulative_cases","cumulative_deaths","dd","ii","hasOwnProperty","total_new_cases","AF","AP","AM","EU","ME","OTH","total_cumulative_cases","total_new_deaths","total_cumulative_deaths","region","push","timeline_type","vaccines_data","new_vaccines","daily_vaccinations","cumulative_vaccines","total_new_vaccines","newVaccines","vData","clone","endOfWeekDate","moment","endOf","startOf","unix","maxDateUnix","endOfMonthDate","total_vaccinations","total_cumulative_vaccines","filter","el","numIntervals","d3","maxCases","maxDeaths","maxVaccines","toDate","add","svg","selectAll","remove","append","attr","barWidth","barSpacing","range","domain","scale","tickSize","tickPadding","ticks","tickFormat","yAxisGroup","xAxisCases","call","xAxisDeaths","xAxisVaccines","xAxisTimeline","barGroups","enter","console","log","totalNewCases","this","parentNode","datum","dp","y","totalNewDeaths","next","offset","vbarGroups","totalNewVaccines","timeline_data","document","getElementById","appendChild","node","on","event","coords","xDate","invert","getTime","style","tooltipStr","format","text","groupedDataFiltered","vgroupedDataFiltered","deaths","cases","vaccines","ratio","brushR","brushL","events","subtract","select","wrap","textwrap","bounds","height","width","method","description","bbox","getBBox","ys","parseInt","circles","brush","extent","parseFloat","viewBoxW","Math","round","brushScale","viewBoxX","gBrush","move","updateTimechart","transition","duration","maxVaccinations","xScaleCases","xScaleDeaths","xScaleVaccines","labelWidth","margin","left","top","right","rcSize","drawRegionchart","population","country","code","who_daily_latest","vaccine_daily_latest","cumulative_cases_per_100k","cumulative_deaths_per_100k","cumulative_vaccines_per_100k","isFinite","region_switch","regionChartContainer","rowHeight","rows","label","t","val","region_chart_toggle","isNaN","updateRegionchart","id","tween","floor","random","selectedToggle","unselectedToggle","unselectedToggleText","selectedToggleText","printing","Layout","updateTable","updateMap","bd","region_filter","map_toggle","tippy","content","placement","theme","arrow","delay","toggle","hdi_filter","inform_filter","tab_toggle","timechartContainer","tcSize","timechartSvg","layer1","tableRowHeight","tableBarYOffset","row","nodes","thisId","table_sort","table_sort_direction","page","setTimeout","html2canvas","querySelector","allowTaint","onclone","doc","useCORS","foreignObjectRendering","ignoreElements","element","scrollX","scrollY","logging","then","canvas","img","toDataURL","pdf","jsPDF","imgProps","getImageProperties","pdfWidth","internal","pageSize","getWidth","pdfHeight","addImage","save","link","createElement","download","href","click","window","open","location","collection","idx","indexOf","splice","yScale","zScale","bubbles","maxX","maxY","maxZ","drawBubblechart","gni_2017","bubble_chart_y_axis","nice","join","people_vaccinated_per_hundred","people_fully_vaccinated_per_hundred","vaccine_acceptance_percent","bubble_chart_color_by","update","exit","country_name","toElement","updateBubblechart","country_filter","numPages","ParseData","sort","a","b","ns_involvement","equity_data","pop","vaccines_used","avg_tests_per_1000","number_vaccine_types_used","vaccines_per_100","vaccines_who_data","country_iso3","ISO3","NUMBER_VACCINES_TYPES_USED","TOTAL_VACCINATIONS_PER100","VACCINES_USED","map","trim","self_assessment","vaccine_acceptance","iso3","indicator_value","vaccine_acceptance_population","population_size","contract_tracing","toLowerCase","match","max","Date_reported","maxDateVaccines","min_vaccine_date","min","max_vaccine_date","country_code","Country_code","country_iso2","Cumulative_deaths","Cumulative_cases","New_cases","New_deaths","whoDataGrouped","flatGroup","datesToAdd","lastRecord","dayTotal","dayCheck","weekTotal","weekCheck","monthTotal","monthCheck","whoCountryCodes","dayOfYear","week","isoWeek","month","getMonth","year","getFullYear","includes","Country","WHO_region","iso_code","vaccineDataByCountry","newDays","hasDays","vDataFlat","lastDate","data_updated","day","setDate","getDate","newDay","totalVac","totalVac100","countryName","total_vaccinations_per_hundred","dailyVac","whoDataByCountry","countryCode","who_daily_7_days","who_daily_14_days","who_daily_21_days","who_daily_28_days","cumulative_deaths_7_days","cumulative_deaths_14_days","cumulative_deaths_21_days","cumulative_deaths_28_days","cumulative_cases_7_days","cumulative_cases_14_days","cumulative_cases_21_days","cumulative_cases_28_days","percentChange","percent_change","original","mapboxgl","accessToken","mapboxStyle","mapTooltip","createMap","setCenter","setZoom","Map","container","center","preserveDrawingBuffer","zoom","setRenderWorldCopies","addControl","NavigationControl","scrollZoom","disable","getCanvasContainer","e","setPaintProperty","setLayoutProperty","maxIncrease","maxDecrease","ceil","abs","colorScale","clamp","fillColorArray","maxValue","peoplevaccinated","features","queryRenderedFeatures","point","layer","properties","iso","countryfiltered","str","innerWidth","regionOptions","countryOptions","parse","p","App","progress","setProgress","useState","loaderText","setLoaderText","async","init","documentElement","$","select2","children","placeholder","scrollAfterSelect","renderTemplate","dropdownParent","shouldFocusInput","templateResult","removeData","preventDefault","params","minimumResultsForSearch","updateTotals","hdi_countries","inform_countries","substring","countryIds","mergeFilter","concat","trigger","values","hide","css","show","handleSelectLength","numCountriesFiltered","totalCases","textTween","totalDeaths","totalVaccinations","vaccinesPer100","vaccine_population","vaccineAcceptance","numNsInvolvedCountres","vaccine_types","ddd","iii","vaccinePer100ByPopulation","vaccineAcceptancePercent","vtooltipbbox","hdiData","hdiDataPopulation","hdiDataVaccines","hdiContactTracing","hdiTotalCasesData","hdiTestingData","informData","informDataPopulation","informDataVaccines","informContactTracing","informTotalCasesData","informTestingData","totalHdiPop","totalInformPop","maxhdivac","maxinformvac","maxhditest","maxinformtest","sortKey","localeCompare","timer","ms","Promise","res","k","name","dayFormat","empty","useEffect","_jsxs","_jsx","className","multiple","defaultValue","target","reportWebVitals","onPerfEntry","Function","_ref","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","React","StrictMode"],"mappings":"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","file":"static/js/main.2debc367.chunk.js","sourcesContent":["// default options\nconst colors = {\n    hdi_category: {\n        'very-high': '#D8EF8B', \n        'high': '#FDE08B', \n        'medium': '#FB8D59', \n        'low': '#D63127'\n    },\n    inform_severity: {\n        'very-high': '#D63127', \n        'high': '#FB8D59', \n        'medium': '#FDE08B', \n        'low': '#D8EF8B', \n        'no-score': '#DAE0EA', \n    },\n    blue: '#1F558C',\n    lightblue: '#E8EEF3',\n    lightnavy: '#799EAD',\n    // red: '#E02225',\n    red: '#EE3224',\n    lightred: '#FDEAE9',\n    green: '#D8EF8B',\n    ifrcgreen: '#87C400',\n    black: '#595454',\n    lightgrey: '#e8e8e8',\n    darkgrey: '#c1c1c1',\n    white: '#fff',\n    olive: '#87C400',\n    purple: '#771966',\n    orange: '#FF3500',\n    pink: '#FB0080'\n}\n\n// option 1\nvar c = ['#00ADED','#003A5A','#62D7F7','#799EAD','#BCCED6']\n// option 2\nvar c = ['#00ADED','#62D7F7','#003A5A','#799EAD','#FFDD00'];\n// option 3\nvar reds = ['#771912','#be281d','#ee3224','#f79992','#fcd6d3'];\nvar blues = ['#09192a','#163b62','#1f558c','#7999ba','#d2dde8'];\n\n\ncolors.regions = {\n        'AP': colors.orange, \n        'AM': colors.lightblue, \n        'EU': colors.ifrcgreen, \n        'ME': '#0A3248', \n        'AF': '#FCD204', \n    }\n\n    colors.regions = {\n        'AP': c[1], \n        'AM': c[0], \n        'EU': c[2], \n        'ME': c[3], \n        'AF': c[4], \n    }\n\n    // colors.regions = {\n    //     'AP': reds[3], \n    //     'AM': reds[0], \n    //     'EU': reds[1], \n    //     'ME': reds[2], \n    //     'AF': reds[4], \n    // }\n\n    // colors.regions_blue = {\n    //     'AP': blues[3], \n    //     'AM': blues[0], \n    //     'EU': blues[1], \n    //     'ME': blues[2], \n    //     'AF': blues[4], \n    // }\n\n\n\nexport default colors;\n","export function addCommas(nStr){\n    nStr += '';\n    let x = nStr.split('.');\n    let x1 = x[0];\n    let x2 = x.length > 1 ? '.' + x[1] : '';\n    var rgx = /(\\d+)(\\d{3})/;\n    while (rgx.test(x1)) {\n        x1 = x1.replace(rgx, '$1' + ',' + '$2');\n    }\n    return x1 + x2;\n}\n\nexport function nFormatter(num, digits = 1) {\n    const lookup = [\n      { value: 1, symbol: \"\" },\n      { value: 1e3, symbol: \"k\" },\n      { value: 1e6, symbol: \"M\" },\n      { value: 1e9, symbol: \"B\" },\n      { value: 1e12, symbol: \"T\" },\n      { value: 1e15, symbol: \"P\" },\n      { value: 1e18, symbol: \"E\" }\n    ];\n    const rx = /\\.0+$|(\\.[0-9]*[1-9])0+$/;\n    var item = lookup.slice().reverse().find(function(item) {\n      return num >= item.value;\n    });\n    return item ? (num / item.value).toFixed(digits).replace(rx, \"$1\") + item.symbol : \"0\";\n\n\n  }\n  \n","import * as d3 from \"d3\";\nimport moment from 'moment';\nimport colors from './colors';\nimport {nFormatter} from './HelperFunctions';\nimport { selection, textwrap } from 'd3-textwrap';\nimport clone from 'just-clone';\n\nlet yScaleCases;\nlet yScaleDeaths;\nlet yScaleVaccines;\nlet yAxisCases;\nlet yAxisDeaths;\nlet yAxisVaccines;\nlet yScaleCasesAxis;\nlet yScaleDeathsAxis;\nlet yScaleVaccinesAxis;\nlet xScale;\nlet xAxis; \nlet xScaleAxis;\nlet xScaleEvents;\nlet maxDate; \nlet minDate;\nlet md; \nlet vgroupedData;\nlet hoverBar; \nlet timelineTooltip;\nlet eventTooltip;\nlet tData; \n\nconst regions = ['AF', 'AP', 'ME', 'EU', 'AM', 'OTH'];\n\nexport function drawTimechart(data, options) {\n\n    minDate = new Date(data.min_date);\n    maxDate = new Date(data.max_date);\n\n    const groupedData = [];\n\n    data.who_data.forEach(function(d,i){\n        if(!groupedData[d[options.timeline_frequency+'Total']])groupedData[d[options.timeline_frequency+'Total']] = {};\n        if(options.timeline_frequency==='day') groupedData[d[options.timeline_frequency+'Total']].date = d.date;\n        if(options.timeline_frequency==='week') groupedData[d[options.timeline_frequency+'Total']].date = d.week_start;\n        if(options.timeline_frequency==='month') groupedData[d[options.timeline_frequency+'Total']].date = d.month_start;\n        if(!groupedData[d[options.timeline_frequency+'Total']][d.ifrc_region]) groupedData[d[options.timeline_frequency+'Total']][d.ifrc_region] = {new_cases: 0, new_deaths: 0, cumulative_cases: 0, cumulative_deaths: 0};\n        groupedData[d[options.timeline_frequency+'Total']][d.ifrc_region].new_cases += d.new_cases;\n        groupedData[d[options.timeline_frequency+'Total']][d.ifrc_region].new_deaths += d.new_deaths;\n        groupedData[d[options.timeline_frequency+'Total']][d.ifrc_region].cumulative_cases = 0;\n    });\n\n    // totals by date\n    groupedData.forEach(function(d,i){\n        regions.forEach(function(dd,ii){\n            if(!d.hasOwnProperty(dd)){\n               d[dd] = {new_cases: 0, new_deaths: 0, cumulative_cases: 0, cumulative_deaths: 0};\n            }\n            // if(dd!=='OTH') d.region.push({'region': dd, 'new_cases': d[dd].new_cases, 'new_deaths': d[dd].new_deaths, 'cumulative_cases': d[dd].cumulative_cases, 'cumulative_deaths': d[dd].cumulative_deaths});\n            if(i>0){\n                d[dd].cumulative_cases = groupedData[i][dd].new_cases + groupedData[i-1][dd].cumulative_cases;\n                d[dd].cumulative_deaths = groupedData[i][dd].new_deaths + groupedData[i-1][dd].cumulative_deaths;\n            } else {\n                d[dd].cumulative_cases = groupedData[i][dd].new_cases;\n                d[dd].cumulative_deaths = groupedData[i][dd].new_deaths;\n            }\n        })\n\n        d.total_new_cases = d.AF.new_cases + d.AP.new_cases + d.AM.new_cases + d.EU.new_cases + d.ME.new_cases + d.OTH.new_cases; \n        d.total_cumulative_cases = d.AF.cumulative_cases + d.AP.cumulative_cases + d.AM.cumulative_cases + d.EU.cumulative_cases + d.ME.cumulative_cases + d.OTH.cumulative_cases; \n        d.total_new_deaths = d.AF.new_deaths + d.AP.new_deaths + d.AM.new_deaths + d.EU.new_deaths + d.ME.new_deaths + d.OTH.new_deaths; \n        d.total_cumulative_deaths = d.AF.cumulative_deaths + d.AP.cumulative_deaths + d.AM.cumulative_deaths + d.EU.cumulative_deaths + d.ME.cumulative_deaths + d.OTH.cumulative_deaths; \n        d.region = [];\n\n        regions.forEach(function(dd,ii){\n            d.region.push({'region': dd, 'new_cases': d[dd].new_cases, 'new_deaths': d[dd].new_deaths, 'cumulative_cases': d[dd].cumulative_cases, 'cumulative_deaths': d[dd].cumulative_deaths});\n        })\n\n    });\n\n    vgroupedData = [];\n\n    if(options.timeline_type!='cumulative'){ // cumulative and stacked\n        // data.vaccines_data = data.vaccines_data_daily;\n        // data.vaccines_data_daily = clone(data.vaccines_data);\n        data.vaccines_data.forEach(function(d,i){\n            if(!vgroupedData[d[options.timeline_frequency+'Total']])vgroupedData[d[options.timeline_frequency+'Total']] = {};\n            if(options.timeline_frequency==='day') vgroupedData[d[options.timeline_frequency+'Total']].date = d.date;\n            if(options.timeline_frequency==='week') vgroupedData[d[options.timeline_frequency+'Total']].date = d.week_start;\n            if(options.timeline_frequency==='month') vgroupedData[d[options.timeline_frequency+'Total']].date = d.month_start;\n            if(!vgroupedData[d[options.timeline_frequency+'Total']][d.ifrc_region]) vgroupedData[d[options.timeline_frequency+'Total']][d.ifrc_region] = {new_vaccines: 0};\n            vgroupedData[d[options.timeline_frequency+'Total']][d.ifrc_region].new_vaccines += d.daily_vaccinations;\n        });\n\n        // totals by date\n        vgroupedData.forEach(function(d,i){\n            regions.forEach(function(dd,ii){\n                if(!d[dd]){\n                    d[dd] = {new_vaccines: 0, cumulative_vaccines: 0}\n                }\n            });\n            d.total_new_vaccines = d.AF.new_vaccines + d.AP.new_vaccines + d.AM.new_vaccines + d.EU.new_vaccines + d.ME.new_vaccines + d.OTH.new_vaccines; \n            d.region = [];\n\n            regions.forEach(function(dd,ii){\n                var newVaccines = 0;\n                if(d[dd].new_vaccines>0){\n                    newVaccines += d[dd].new_vaccines\n                }\n                d.region.push({'region': dd, 'new_vaccines': newVaccines });\n            })\n        });\n\n    } else{ // cumulative only\n        var vData = [];\n        if(options.timeline_frequency==='day') {\n            vData = clone(data.vaccines_data);\n        }\n        if(options.timeline_frequency==='week') {\n            data.vaccines_data.forEach(function(d,i){\n                var endOfWeekDate = moment(d.date).endOf('isoWeek').startOf('day').unix();\n                var date = moment(d.date).startOf('day').unix();\n                if((date==endOfWeekDate)||(date==moment(data.max_date).startOf('day').unix())){\n                    vData.push(d);\n                }\n            })\n        }\n        if(options.timeline_frequency==='month') {\n            var maxDateUnix = moment(data.max_date).startOf('day').unix();\n            data.vaccines_data.forEach(function(d,i){\n                var endOfMonthDate = moment(d.date).endOf('month').startOf('day').unix();\n                var date = moment(d.date).startOf('day').unix();\n                if((date==endOfMonthDate)||((moment(data.max_date).startOf('day').unix()!=endOfMonthDate)&&(date==maxDateUnix))){\n                    vData.push(d);\n                }\n            })\n        }\n\n        vData.forEach(function(d,i){\n            if(!vgroupedData[d[options.timeline_frequency+'Total']])vgroupedData[d[options.timeline_frequency+'Total']] = {};\n            if(options.timeline_frequency==='day') vgroupedData[d[options.timeline_frequency+'Total']].date = d.date;\n            if(options.timeline_frequency==='week') vgroupedData[d[options.timeline_frequency+'Total']].date = d.week_start;\n            if(options.timeline_frequency==='month') vgroupedData[d[options.timeline_frequency+'Total']].date = d.month_start;\n            if(!vgroupedData[d[options.timeline_frequency+'Total']][d.ifrc_region]) vgroupedData[d[options.timeline_frequency+'Total']][d.ifrc_region] = {cumulative_vaccines: 0};\n            vgroupedData[d[options.timeline_frequency+'Total']][d.ifrc_region].cumulative_vaccines += d.total_vaccinations;\n        });\n        // totals by date\n        vgroupedData.forEach(function(d,i){\n            regions.forEach(function(dd,ii){\n                if(!d[dd]){\n                    d[dd] = {cumulative_vaccines: 0}\n                }\n            });\n            d.total_cumulative_vaccines = d.AF.cumulative_vaccines + d.AP.cumulative_vaccines + d.AM.cumulative_vaccines + d.EU.cumulative_vaccines + d.ME.cumulative_vaccines + d.OTH.cumulative_vaccines; \n            d.region = [];\n            regions.forEach(function(dd,ii){\n                d.region.push({'region': dd, 'cumulative_vaccines': d[dd].cumulative_vaccines});\n            })\n        });\n    }\n\n    vgroupedData = vgroupedData.filter(function(el) { return el; });\n\n    const numIntervals = d3.max(data.who_data, function(d,i){\n        return d[options.timeline_frequency+'Total'];\n    });\n\n    const maxCases = d3.max(groupedData, function(d,i){\n        if(options.timeline_type==='non-cumulative') return d.total_new_cases;\n        if(options.timeline_type==='cumulative') return d.total_cumulative_cases;\n        if(options.timeline_type==='stacked') return 100;\n    })\n\n    const maxDeaths = d3.max(groupedData, function(d,i){\n        if(options.timeline_type==='non-cumulative') return d.total_new_deaths;\n        if(options.timeline_type==='cumulative') return d.total_cumulative_deaths;\n        if(options.timeline_type==='stacked') return 100;\n    })\n\n    const maxVaccines = d3.max(vgroupedData, function(d,i){\n        if(d){\n            if(options.timeline_type==='non-cumulative') return d.total_new_vaccines;\n            if(options.timeline_type==='cumulative') return d.total_cumulative_vaccines;\n            if(options.timeline_type==='stacked') return 100;\n        }\n    })\n\n    // define date range\n    // const minDate = groupedData[0].date;\n    // const maxDate = groupedData[numIntervals].date;\n    // const minDate = groupedData[0].date;\n\n    // if(options.timeline_frequency==='month') md = md.add(1, 'months');\n    // if(options.timeline_frequency==='week') md = md.add(1, 'weeks');\n    if(options.timeline_frequency==='month') minDate = moment(minDate).startOf('month').startOf('day').toDate();\n    if(options.timeline_frequency==='month') maxDate = moment(maxDate).endOf('month').startOf('day').toDate();\n    if(options.timeline_frequency==='week') maxDate = moment(maxDate).endOf('isoWeek').startOf('day').toDate();\n\n    md = moment(maxDate);\n    if(options.timeline_frequency==='day') md = new Date(moment(maxDate).add(1, 'days').toDate());\n\n    const svg = d3.select('#timechart_svg');\n    svg.selectAll('g').remove();\n    d3.selectAll('#layout .yAxis').remove();\n    d3.selectAll('#yAxis').remove();\n    d3.selectAll('#layout .xAxis').remove();\n\n    //bg\n    svg.append('g').append('rect')\n    .attr('width', 2000)\n    .attr('height', '100%')\n    .attr('x', 0)\n    .attr('y', 0)\n    .attr('fill', '#FFF')\n    .attr('opacity', 0);\n\n    const width = 2000;\n    const barWidth = width/numIntervals;\n\n    let barSpacing = 0.04; \n    if(options.timeline_frequency==='month') barSpacing = 0.03;\n    if(options.timeline_frequency==='day') barSpacing = 0.02;\n\n    // define scales\n\n    xScale = d3.scaleTime()\n    .range([0,width])\n    .domain([minDate,md]);\n\n    xScaleAxis = d3.scaleTime()\n    .range([0,596])\n    .domain([minDate,md]);\n\n    yScaleCases = d3.scaleLinear()\n    .range([0,140])\n    .domain([0,maxCases]);\n\n    yScaleCasesAxis = d3.scaleLinear()\n    .range([140,0])\n    .domain([0,maxCases]);\n\n    yScaleDeaths = d3.scaleLinear()\n    .range([0,140])\n    .domain([0,maxDeaths]);\n\n    yScaleDeathsAxis = d3.scaleLinear()\n    .range([140,0])\n    .domain([0,maxDeaths]);\n\n    yScaleVaccines = d3.scaleLinear()\n    .range([0,140])\n    .domain([0,maxVaccines]);\n\n    yScaleVaccinesAxis = d3.scaleLinear()\n    .range([140,0])\n    .domain([0,maxVaccines]);\n\n    // define axi\n    \n    xAxis = d3.axisBottom()\n    .scale(xScaleAxis)\n    .tickSize(2)\n    .tickPadding(3);\n\n    // if(options.timeline_frequency=='month')\n    // xAxis.ticks(d3.timeMonth.every(3)).tickFormat(d3.timeFormat(\"%b %Y\"));\n\n    // if(options.timeline_frequency=='week')\n    // xAxis.ticks(d3.timeWeek.every(10)).tickFormat(d3.timeFormat(\"%d %b %Y\"));\n\n    yAxisCases = d3.axisRight()\n    .scale(yScaleCasesAxis)\n    .ticks(3)\n    .tickSize(3)\n    .tickPadding(3)\n    .tickFormat(function(d){\n        if(options.timeline_type=='stacked') return nFormatter(d)+'%';\n        return nFormatter(d);\n    })\n\n    yAxisDeaths = d3.axisRight()\n    .scale(yScaleDeathsAxis)\n    .ticks(3)\n    .tickSize(3)\n    .tickPadding(3)\n    .tickFormat(function(d){\n        if(options.timeline_type=='stacked') return nFormatter(d)+'%';\n        return nFormatter(d);\n    })\n\n    yAxisVaccines = d3.axisRight()\n    .scale(yScaleVaccinesAxis)\n    .ticks(3)\n    .tickSize(3)\n    .tickPadding(3)\n    .tickFormat(function(d){\n        if(options.timeline_type=='stacked') return nFormatter(d)+'%';\n        return nFormatter(d);\n    })\n\n    // y-axis cases\n    var yAxisGroup = d3.select('#layout').append(\"g\").attr('id', 'yAxis').attr('clip-path', 'url(#mask)');\n\n    var yAxisCasesText = yAxisGroup.append(\"g\")\n    .attr(\"class\", \"yAxis axis\")\n    .attr(\"id\", \"casesAxis\")\n    .attr('transform', 'translate(620,363)')\n    .call(yAxisCases);\n\n    // y-axis deaths\n    var yAxisDeathsText = yAxisGroup.append(\"g\")\n    .attr(\"class\", \"yAxis axis\")\n    .attr(\"id\", \"deathsAxis\")\n    .attr('transform', 'translate(620,534)')\n    .call(yAxisDeaths);\n\n    // y-axis vaccines\n    var yAxisVaccinesText = yAxisGroup.append(\"g\")\n    .attr(\"class\", \"yAxis axis\")\n    .attr(\"id\", \"VaccinesAxis\")\n    .attr('transform', 'translate(620,707.5)')\n    .call(yAxisVaccines);\n\n    // x-axis cases\n    var xAxisCases = yAxisGroup.append('g')\n    .attr(\"id\", \"casesXAxis\")\n    .attr('class', 'xAxis')\n    .attr('transform', 'translate(24,504)')\n    .call(xAxis);\n\n    var xAxisDeaths = yAxisGroup.append('g')\n    .attr(\"id\", \"deathsXAxis\")\n    .attr('class', 'xAxis')\n    .attr('transform', 'translate(24,674)')\n    .call(xAxis);\n\n    var xAxisVaccines = yAxisGroup.append('g')\n    .attr(\"id\", \"vaccinesXAxis\")\n    .attr('class', 'xAxis')\n    .attr('transform', 'translate(24,848)')\n    .call(xAxis);\n\n    var xAxisTimeline = yAxisGroup.append('g')\n    .attr(\"id\", \"timelineXAxis\")\n    .attr('class', 'xAxis')\n    .attr('transform', 'translate(24,908)')\n    .call(xAxis);\n\n    // CASES\n    // loop through groupedData and draw bars\n    const barGroups = svg.selectAll('.bar_group')\n    .data(groupedData)\n    .enter()\n    .append('g')\n    .attr('class', 'bar_group')\n    .attr('transform', function(d,i){ \n        if (i < 10) console.log(d);\n        return 'translate('+xScale(d.date)+')'\n    })\n\n    // CASES\n    barGroups.selectAll('.cases_bar')\n    .data(function(d,i){ return d.region.filter(function(dd,ii){\n        return dd.region!=='OTH';\n    })})\n    .enter()\n    .append('rect')\n    .attr('class', function(d,i) { return 'timeBar cases_bar time_'+d.region })\n    .attr('x', (barWidth*barSpacing))\n    .attr('y', function(d,i){\n        const totalNewCases = d3.select(this.parentNode).datum().total_new_cases - d3.select(this.parentNode).datum().OTH.new_cases;\n        let dp = 0;\n        if(i>0){\n            for(let ii=1;ii<=i;ii++){\n                if(options.timeline_type==='cumulative') dp += d3.select(this.parentNode).datum().region[ii-1].cumulative_cases;\n                if(options.timeline_type==='non-cumulative') dp += d3.select(this.parentNode).datum().region[ii-1].new_cases;\n                if(options.timeline_type==='stacked') dp += d3.select(this.parentNode).datum().region[ii-1].new_cases;\n            }\n        }\n        let y = 0;\n        if(options.timeline_type==='cumulative') y = (140-yScaleCases(d.cumulative_cases)-(yScaleCases(dp)))\n        if(options.timeline_type==='non-cumulative') y = (140-yScaleCases(d.new_cases)-(yScaleCases(dp)))\n        if(options.timeline_type==='stacked') y = (140-(140*(d.new_cases/totalNewCases))-((140*(dp/totalNewCases))))\n        if(y){ if(y>0) { return y} else { return 0}; } else { return 0};\n    })\n    .attr('width', barWidth-(barWidth*barSpacing*2))\n    .attr('height', function(d,i){\n        const totalNewCases = d3.select(this.parentNode).datum().total_new_cases - d3.select(this.parentNode).datum().OTH.new_cases;\n        let y = 0;\n        if(options.timeline_type==='cumulative') y = yScaleCases(d.cumulative_cases);\n        if(options.timeline_type==='non-cumulative') y = yScaleCases(d.new_cases);\n        if(options.timeline_type==='stacked') y = (140*(d.new_cases/totalNewCases));\n        if(y){ if(y>0) { return y} else { return 0}; } else { return 0};\n    })\n    .attr('fill', function(d,i){\n        return colors.regions[d.region];\n    })\n\n    // DEATHS\n    barGroups.selectAll('.deaths_bar')\n    .data(function(d,i){ return d.region.filter(function(dd,ii){\n        return dd.region!=='OTH';\n    })})\n    .enter()\n    .append('rect')\n    .attr('class', function(d,i) { return 'timeBar deaths_bar time_'+d.region })\n    .attr('x', (barWidth*barSpacing))\n    .attr('y', function(d,i){\n        const totalNewDeaths = d3.select(this.parentNode).datum().total_new_deaths - d3.select(this.parentNode).datum().OTH.new_deaths;\n        let dp = 0;\n        if(i>0){\n            for(let ii=1;ii<=i;ii++){\n                if(options.timeline_type==='cumulative') dp += d3.select(this.parentNode).datum().region[ii-1].cumulative_deaths;\n                if(options.timeline_type==='non-cumulative') dp += d3.select(this.parentNode).datum().region[ii-1].new_deaths;\n                if(options.timeline_type==='stacked') dp += d3.select(this.parentNode).datum().region[ii-1].new_deaths;\n            }\n        }\n        let y = 0;\n        if(options.timeline_type==='cumulative') y = (140-yScaleDeaths(d.cumulative_deaths)-(yScaleDeaths(dp))+170)\n        if(options.timeline_type==='non-cumulative') y = (140-yScaleDeaths(d.new_deaths)-(yScaleDeaths(dp))+170)\n        if(options.timeline_type==='stacked') y = (140-(140*(d.new_deaths/totalNewDeaths))-((140*(dp/totalNewDeaths)))+170)\n        if(y){ if(y>0) { return y} else { return 0}; } else { return 0};\n    })\n    .attr('width', barWidth-(barWidth*barSpacing*2))\n    .attr('height', function(d,i){\n        const totalNewDeaths = d3.select(this.parentNode).datum().total_new_deaths - d3.select(this.parentNode).datum().OTH.new_deaths;\n        let y = 0;\n        if(options.timeline_type==='cumulative') y = yScaleDeaths(d.cumulative_deaths);\n        if(options.timeline_type==='non-cumulative') y = yScaleDeaths(d.new_deaths);\n        if(options.timeline_type==='stacked') y = (140*(d.new_deaths/totalNewDeaths));\n        if(y){ if(y>0) { return y} else { return 0}; } else { return 0};\n    })\n    .attr('fill', function(d,i){\n        return colors.regions[d.region];\n    });\n\n    // bar size tweak for spacing\n    if(options.timeline_frequency==='month'){\n        barGroups.selectAll(\".timeBar\")\n        .attr(\"width\", function(d) {\n            var date = d3.select(this.parentNode).datum().date;\n            var next = d3.timeMonth.offset(date, 1);\n            return (xScale(next)- xScale(date))*(1-barSpacing);\n            })\n        .attr(\"x\", function(d) {\n            var date = d3.select(this.parentNode).datum().date;\n            var next = d3.timeMonth.offset(date, 1);\n            return (xScale(next)- xScale(date))*(barSpacing/2);\n            })\n        }\n\n    // VACCINES\n    const vbarGroups = svg.selectAll('.vbar_group')\n    .data(vgroupedData)\n    .enter()\n    .append('g')\n    .attr('class', 'vbar_group')\n    .attr('transform', function(d,i){ \n        return 'translate('+xScale(d.date)+', 344)'\n    })\n  \n    vbarGroups.selectAll('.vaccines_bar')\n    .data(function(d,i){ return d.region.filter(function(dd,ii){\n        return dd.region!=='OTH';\n    })})\n    .enter()\n    .append('rect')\n    .attr('class', 'timeBar vaccines_bar')\n    .attr('class', function(d,i) { return 'timeBar vaccines_bar time_'+d.region })\n    .attr('x', (barWidth*barSpacing))\n    .attr('y', function(d,i){\n        const totalNewVaccines = d3.select(this.parentNode).datum().total_new_vaccines - d3.select(this.parentNode).datum().OTH.new_vaccines;\n        let dp = 0;\n        if(i>0){\n            for(let ii=1;ii<=i;ii++){\n                if(options.timeline_type==='cumulative') dp += d3.select(this.parentNode).datum().region[ii-1].cumulative_vaccines;\n                if(options.timeline_type==='non-cumulative') dp += d3.select(this.parentNode).datum().region[ii-1].new_vaccines;\n                if(options.timeline_type==='stacked') dp += d3.select(this.parentNode).datum().region[ii-1].new_vaccines;\n            }\n        }\n        let y = 0;\n        if(options.timeline_type==='cumulative') y = (140-yScaleVaccines(d.cumulative_vaccines)-(yScaleVaccines(dp)))\n        if(options.timeline_type==='non-cumulative') y = (140-yScaleVaccines(d.new_vaccines)-(yScaleVaccines(dp)))\n        if(options.timeline_type==='stacked') y = (140-(140*(d.new_vaccines/totalNewVaccines))-((140*(dp/totalNewVaccines))))\n        if(y){ if(y>0) { return y} else { return 0}; } else { return 0};\n    })\n    .attr('width', barWidth-(barWidth*barSpacing*2))\n    .attr('height', function(d,i){\n        const totalNewVaccines = d3.select(this.parentNode).datum().total_new_vaccines - d3.select(this.parentNode).datum().OTH.new_vaccines;\n        let y = 0;\n        if(options.timeline_type==='cumulative') y = yScaleVaccines(d.cumulative_vaccines);\n        if(options.timeline_type==='non-cumulative') y = yScaleVaccines(d.new_vaccines);\n        if(options.timeline_type==='stacked') y = (140*(d.new_vaccines/totalNewVaccines));\n        if(y){ if(y>0) { return y} else { return 0}; } else { return 0};\n    })\n    .attr('fill', function(d,i){\n        return colors.regions[d.region];\n        // return colors.regions_blue[d.region];\n    });\n\n    if(options.timeline_frequency==='month'){\n    vbarGroups.selectAll(\".timeBar\")\n    .attr(\"width\", function(d) {\n        var date = d3.select(this.parentNode).datum().date;\n        var next = d3.timeMonth.offset(date, 1);\n        return (xScale(next)- xScale(date))*(1-barSpacing);\n        })\n    .attr(\"x\", function(d) {\n        var date = d3.select(this.parentNode).datum().date;\n        var next = d3.timeMonth.offset(date, 1);\n        return (xScale(next)- xScale(date))*(barSpacing/2);\n        })\n    }\n\n    // bar size tweak for spacing\n    if(options.timeline_frequency==='month'){\n        barGroups.selectAll(\".timeBar\")\n        .attr(\"width\", function(d) {\n            var date = d3.select(this.parentNode).datum().date;\n            var next = d3.timeMonth.offset(date, 1);\n            return (xScale(next)- xScale(date))*(1-barSpacing);\n          })\n        .attr(\"x\", function(d) {\n            var date = d3.select(this.parentNode).datum().date;\n            var next = d3.timeMonth.offset(date, 1);\n            return (xScale(next)- xScale(date))*(barSpacing/2);\n          })\n        }\n\n        // tooltips\n\n        // events calendar timeline\n        tData = data.timeline_data;\n\n        xScaleEvents = d3.scaleTime()\n        .range([25,619])\n        .domain([minDate,md]);\n        \n        // bring to front\n       document.getElementById(\"svg\").appendChild(d3.select('#timeline_tooltip').node());\n       document.getElementById(\"svg\").appendChild(d3.select('#event_tooltip').node());\n       timelineTooltip = d3.select('#timeline_tooltip').attr('opacity', 0);\n       eventTooltip = d3.select('#event_tooltip').attr('opacity', 0);\n\n        // hover bar\n        hoverBar = svg.append('rect')\n        .attr('id','timechart_hover')\n        .attr('width', barWidth)\n        .attr('x', 0)\n        .attr('y', 0)\n        .attr('opacity', 0)\n        .attr('height', '100%')\n        .attr('fill', 'rgb(221 221 221 / 40%)')\n\n        d3.select('#timechart_svg').on('mouseover',  (event) => {\n\n            var coords = d3.pointer( event );\n            hoverBar.attr('opacity', 1)\n\n            var xDate = xScale.invert(coords[0]);\n\n            if(options.timeline_frequency=='week') {\n                xDate = moment(xDate).startOf('isoWeek');\n            }\n            if(options.timeline_frequency=='day') {\n                xDate = moment(xDate).startOf('day');\n            }\n            if(options.timeline_frequency=='month') {\n                xDate = moment(xDate).startOf('month');\n            }\n\n            if(coords[1]<470){\n                timelineTooltip.attr('opacity', 1).attr('display', 'inline');\n                hoverBar.attr('height', '100%');\n            } else if(coords[1]>510){\n                eventTooltip.attr('opacity', 1);\n                hoverBar.attr('height', '90%');\n            } else {\n                eventTooltip.attr('opacity', 0);\n                timelineTooltip.attr('opacity', 0);\n                hoverBar.attr('height', '100%');\n            }\n\n            if((xDate.toDate().getTime()<minDate.getTime())){\n                hoverBar.attr('opacity', 0);\n                timelineTooltip.attr('opacity', 0);\n            }\n\n            d3.select('#svg_container').style('z-index', 10);\n\n        }).on('mouseout',  (event) => {\n            hoverBar.attr('opacity', 0)\n            timelineTooltip.attr('opacity', 0).attr('display', 'none');\n            // timelineTooltip.attr('opacity', 0).attr('transform', 'translate(0,0)');\n            d3.select('#svg_container').style('z-index', 1);\n            eventTooltip.attr('opacity', 0).attr('transform', 'translate(0,0)');\n            d3.selectAll('.event_marker circle').style('stroke', colors.black);\n        })\n        .on('mousemove', (event) => {\n            var coords = d3.pointer( event );\n\n            var xDate = xScale.invert(coords[0]);\n\n            var tooltipStr = '';\n            if(options.timeline_frequency=='week') {\n                xDate = moment(xDate).startOf('isoWeek');\n                tooltipStr = xDate.format('ll');\n                d3.select('#timeline_tooltip_date tspan').text(tooltipStr);\n            }\n            if(options.timeline_frequency=='day') {\n                xDate = moment(xDate).startOf('day');\n                tooltipStr = xDate.format('ll');\n                d3.select('#timeline_tooltip_date tspan').text(tooltipStr);\n            }\n            if(options.timeline_frequency=='month') {\n                xDate = moment(xDate).startOf('month');\n                tooltipStr = xDate.format('MMMM YYYY');\n                d3.select('#timeline_tooltip_date tspan').text(tooltipStr);\n            }\n            hoverBar.attr('x', xScale(xDate.toDate()));\n\n            var groupedDataFiltered = groupedData.filter(function(d,i){\n                return moment(d.date).startOf('day').unix() == xDate.startOf('day').unix();\n            });\n            var vgroupedDataFiltered = vgroupedData.filter(function(d,i){\n                return moment(d.date).startOf('day').unix() == xDate.startOf('day').unix();\n            });\n\n            var deaths = '-';\n            var cases = '-';\n            var vaccines = '-';\n            if(options.timeline_type=='cumulative'){ \n                // cumulative\n                if(groupedDataFiltered[0]) cases = nFormatter(groupedDataFiltered[0].total_cumulative_cases, 2);\n                if(groupedDataFiltered[0]) deaths = nFormatter(groupedDataFiltered[0].total_cumulative_deaths, 2);\n                if(vgroupedDataFiltered[0]) vaccines = nFormatter(vgroupedDataFiltered[0].total_cumulative_vaccines, 2);\n            } else {\n                // non-cumulative/stacked\n                if(groupedDataFiltered[0]) cases = nFormatter(groupedDataFiltered[0].total_new_cases, 2);\n                if(groupedDataFiltered[0]) deaths = nFormatter(groupedDataFiltered[0].total_new_deaths, 2);\n                if(vgroupedDataFiltered[0]) vaccines = nFormatter(vgroupedDataFiltered[0].total_new_vaccines, 2);\n            }\n\n            if(deaths==0) deaths = '-';\n            if(cases==0) cases = '-';\n            if(vaccines==0) vaccines = '-';\n\n            d3.select('#tooltip_cases tspan').text((cases)).attr(\"text-anchor\", \"end\").attr('dx', 32)\n            d3.select('#tooltip_deaths tspan').text((deaths)).attr(\"text-anchor\", \"end\").attr('dx', 32)\n            d3.select('#tooltip_vaccines tspan').text((vaccines)).attr(\"text-anchor\", \"end\").attr('dx', 32)\n\n            // if((xDate.toDate().getTime()>options.maxDate.getTime())){\n            //     hoverBar.attr('opacity', 0);\n            // // } else \n            if(((xDate.toDate().getTime()<minDate.getTime()))&&(options.timeline_frequency=='day')){\n                hoverBar.attr('opacity', 0);\n                timelineTooltip.attr('opacity', 0);\n            }\n\n            if(options.timeline_frequency=='month'){\n                hoverBar.attr('width', function(){\n                   return xScale(moment(xDate).endOf('month')) - xScale(moment(xDate).startOf('month'));\n                })\n            }\n            timelineTooltip.attr('transform', function(){\n                var bw = barWidth;\n                var ratio = (options.brushR - options.brushL)/600;\n                var offset = 0;\n                if(ratio<0.5) offset = 3;\n                if(ratio<0.3) offset = 12;\n                if(ratio<0.2) offset = 20;\n                if(ratio<0.15) offset = 21;\n                if(options.timeline_frequency=='month') { \n                    if(ratio<0.6) offset = 20;\n                    if(ratio<0.5) offset = 30;\n                    if(ratio<0.3) offset = 50;\n                    if(ratio<0.2) offset = 60;\n                    if(ratio<0.1) offset = 70;\n                    return 'translate('+(((xScaleEvents(xDate.toDate()))+(barWidth/3))+offset)+','+(coords[1]+353)+')';\n                }\n                return 'translate('+((xScaleEvents(xDate.toDate())+(18))+offset)+','+(coords[1]+353)+')';\n            })\n\n            if(coords[1]<470){\n                timelineTooltip.attr('opacity', 1);\n                hoverBar.attr('opacity', 1);\n                hoverBar.attr('height', '100%');\n            } else if(coords[1]>510){\n                eventTooltip.attr('opacity', 1);\n                hoverBar.attr('height', '90%');\n                var x = moment(xScale.invert(coords[0])).startOf('day');\n                var xx = (xScale.invert(coords[0]))\n                eventTooltip.attr('transform', function(){\n                    return 'translate('+(xScaleEvents(x.toDate())+(-3))+','+(817)+')';\n                });\n\n                var events = tData.filter(function(d,i){\n                    return moment(d.date).startOf('day').unix() == x.unix()\n                });\n\n                // select nearest neighbor for ux purposes \n                if(events.length==0){\n                    events = tData.filter(function(d,i){\n                        return ((moment(d.date).startOf('day').unix() <= moment(x).add(1, 'days').unix())&&(moment(d.date).startOf('day').unix() >= moment(x).subtract(1, 'days').unix()))\n                    });\n                }\n                \n                if(events.length>0){\n\n                    d3.select('#event-'+moment(events[0].date).startOf('day').unix()).select('path').style('stroke', '#000').attr('opacity', 1);\n                    tooltipStr = moment(events[0].date).startOf('day').format('ll');\n                    d3.select('#event_tooltip_date tspan').text(tooltipStr);\n\n                    var wrap = textwrap().bounds({height: 200, width: 230}).method('tspans');\n                    var event = d3.select('#event_tooltip_text').text(events[0].description)\n                    .attr('y', 18)\n                    .attr('x', 6)\n                    d3.select('#event_tooltip_text').call(wrap);\n\n                    d3.selectAll('#event_tooltip_text tspan').attr('dy', '1.3em');\n                    var bbox = d3.select('#event_tooltip_text').node().getBBox();\n                    d3.select('#event_tooltip_rect').attr('width', bbox.width+17)\n                    .attr('height', bbox.height +26 );\n\n                    var h = d3.select('#event_tooltip_rect').attr('height');\n                    var ys = 0;\n\n                    if(bbox.height<20){\n                        ys = 19;\n                    } else if(bbox.height<30){\n                        ys = 9;\n                    } else if(bbox.height<40){\n                        ys = 0;\n                    } else if(bbox.height<50){\n                        ys = -20;\n                    } else if(bbox.height<60){\n                        ys = -20;\n                    }\n\n                    var y = d3.select('#event_tooltip_rect').attr('y');\n\n                    d3.select('#event_tooltip_rect').attr('y', ys);\n                    \n                    d3.selectAll('#event_tooltip_text').attr('y', function(d,i){\n                        return parseInt(d3.select(this).attr('y')) + ys;\n                    });\n\n                    d3.selectAll('#event_tooltip_date tspan').attr('dy', function(d,i){\n                        return ys;\n                    });\n\n                    eventTooltip.attr('opacity', 1);\n\n                } else {\n                    d3.selectAll('.event_marker circle').style('stroke', colors.black)\n                    eventTooltip.attr('opacity', 0);\n                }\n            } else {\n                eventTooltip.attr('opacity', 0);\n                timelineTooltip.attr('opacity', 0);\n                hoverBar.attr('opacity', 0);\n                hoverBar.attr('height', '100%');\n            }\n\n            if((options.timeline_frequency=='day')&&((xDate.toDate().getTime()<minDate.getTime()))){\n                hoverBar.attr('opacity', 0);\n                timelineTooltip.attr('opacity', 0);\n                return false;\n            }\n        });\n\n        tData = tData.filter(d => d.date.length > 0);\n\n        // event lin\n\n        yAxisGroup.append('line')\n        .attr('id', 'event-line')\n        .attr('x1', 0)\n        .attr('x2', 620)\n        .attr('y1', 893)\n        .attr('y2', 893)\n        .attr('stroke-width', 2.5)\n        .attr('stroke', colors.black);\n\n        var circles = yAxisGroup.append('g').selectAll('.event_marker')\n        .data(tData)\n        .enter()\n        .append('g')\n        .attr('class', 'event_marker')\n        .attr('id', function(d,i){\n            return 'event-'+moment(d.date).startOf('day').unix();\n        })\n        .attr('transform', function(d){\n            var x = xScaleEvents(new Date(d.date));\n            return 'translate('+(x)+', 893)';\n        })\n        .style('cursor', 'pointer');\n        // .append('path')\n        // .attr('d', \"M0,-6L4,0 0,6 -4,0Z\")\n        \n        circles.append(\"circle\")\n        .style('stroke', colors.black)\n        .attr('opacity', 1)\n        .attr('r', 6.5)\n        .attr('cx', 0)\n        .attr('cy', 0)\n        .style('stroke-width',2.2)\n        .style('fill', 'white');\n        circles\n        .append(\"circle\")\n        .attr('r', 2)\n        .attr('cx', 0)\n        .attr('cy', 0)\n        .attr('fill', colors.black)\n        .style('stroke', colors.black);\n\n\n        // create brush zoom\n        // reset\n        // options.brushL = 0;\n        // options.brushR = 600;\n        const brush = d3.brushX()\n        .extent([[0,0],[600,20]])\n        .on(\"start brush end\", brushed);\n\n        d3.select('.brush').remove();\n;\n        var gBrush = d3.select('#zoombar').append(\"g\")\n        .attr(\"class\", \"brush\")\n        .attr('opacity', 0.1)\n        .call(brush);\n\n\t\td3.selectAll('.handle rect').attr('fill-opacity', '1').style('visibility', 'visible').attr('width', 2).attr('fill', '#000').style('stroke-opacity', 0);\n\n        var brushScale = d3.scaleLinear()\n        .domain([-3, 597])\n        .range([0,2000]);\n\n        gBrush.call(brush.move, [options.brushL,options.brushR]);\n\n        function brushed(){\n            var x = parseFloat(d3.select('.handle--w').attr('x'));\n            var x2 = parseFloat(d3.select('.handle--e').attr('x'));\n            if((x2-x)<40) return false;\n            var w = d3.select('.selection').attr('width');\n            d3.select('#zoomL').attr('transform', 'translate('+x+',0)');\n            d3.select('#zoomR').attr('transform', 'translate('+(x2)+',0)');\n            d3.select('#zoomOverlay').attr('width', (x2-x));\n            d3.select('#zoomOverlay').attr('x', (x));\n            d3.select('#zoomOverlay').attr('transform', 'translate(3,0)');\n            var viewBoxW = Math.round(brushScale(x2)-brushScale(x));\n            var viewBoxX = Math.round(brushScale(x));\n            options.brushL = x+3;\n            options.brushR = x2+3;\n\n            xScaleAxis = d3.scaleTime()\n            .range([0,596])\n            .domain([new Date(xScale.invert(brushScale(x))),new Date(xScale.invert(brushScale(x2)))]);\n\n            xScaleEvents = d3.scaleTime()\n            .range([25,619])\n            // .domain([minDate,md]);\n            .domain([new Date(xScale.invert(brushScale(x))),new Date(xScale.invert(brushScale(x2)))]);\n\n            d3.selectAll('.event_marker')\n            .attr('transform', function(d){\n                var x = xScaleEvents(new Date(d.date));\n                return 'translate('+(x)+', 893)';\n            });\n\n            xAxis = d3.axisBottom()\n            .ticks(5)\n            .scale(xScaleAxis);\n\n            xAxisCases.call(xAxis);\n            xAxisDeaths.call(xAxis);\n            xAxisVaccines.call(xAxis);\n            xAxisTimeline.call(xAxis);\n            \n            d3.select('#timechart_svg').attr('viewBox', viewBoxX + ' 0 '+ viewBoxW + ' 553')\n        }\n\n}\n\nexport function updateTimechart(data, options) {\n\n    const groupedData = [];\n\n    data.who_data.forEach(function(d,i){\n        if(!groupedData[d[options.timeline_frequency+'Total']])groupedData[d[options.timeline_frequency+'Total']] = {};\n        if(options.timeline_frequency==='day') groupedData[d[options.timeline_frequency+'Total']].date = d.date;\n        if(options.timeline_frequency==='week') groupedData[d[options.timeline_frequency+'Total']].date = d.week_start;\n        if(options.timeline_frequency==='month') groupedData[d[options.timeline_frequency+'Total']].date = d.month_start;\n        if(!groupedData[d[options.timeline_frequency+'Total']][d.ifrc_region]) groupedData[d[options.timeline_frequency+'Total']][d.ifrc_region] = {new_cases: 0, new_deaths: 0, cumulative_cases: 0, cumulative_deaths: 0};\n        groupedData[d[options.timeline_frequency+'Total']][d.ifrc_region].new_cases += d.new_cases;\n        groupedData[d[options.timeline_frequency+'Total']][d.ifrc_region].new_deaths += d.new_deaths;\n        groupedData[d[options.timeline_frequency+'Total']][d.ifrc_region].cumulative_cases = 0;\n    });\n\n    // totals by date\n    groupedData.forEach(function(d,i){\n        regions.forEach(function(dd,ii){\n            if(!d.hasOwnProperty(dd)){\n               d[dd] = {new_cases: 0, new_deaths: 0, cumulative_cases: 0, cumulative_deaths: 0};\n            }\n            // if(dd!=='OTH') d.region.push({'region': dd, 'new_cases': d[dd].new_cases, 'new_deaths': d[dd].new_deaths, 'cumulative_cases': d[dd].cumulative_cases, 'cumulative_deaths': d[dd].cumulative_deaths});\n            if(i>0){\n                d[dd].cumulative_cases = groupedData[i][dd].new_cases + groupedData[i-1][dd].cumulative_cases;\n                d[dd].cumulative_deaths = groupedData[i][dd].new_deaths + groupedData[i-1][dd].cumulative_deaths;\n            } else {\n                d[dd].cumulative_cases = groupedData[i][dd].new_cases;\n                d[dd].cumulative_deaths = groupedData[i][dd].new_deaths;\n            }\n        })\n\n        d.total_new_cases = d.AF.new_cases + d.AP.new_cases + d.AM.new_cases + d.EU.new_cases + d.ME.new_cases + d.OTH.new_cases; \n        d.total_cumulative_cases = d.AF.cumulative_cases + d.AP.cumulative_cases + d.AM.cumulative_cases + d.EU.cumulative_cases + d.ME.cumulative_cases + d.OTH.cumulative_cases; \n        d.total_new_deaths = d.AF.new_deaths + d.AP.new_deaths + d.AM.new_deaths + d.EU.new_deaths + d.ME.new_deaths + d.OTH.new_deaths; \n        d.total_cumulative_deaths = d.AF.cumulative_deaths + d.AP.cumulative_deaths + d.AM.cumulative_deaths + d.EU.cumulative_deaths + d.ME.cumulative_deaths + d.OTH.cumulative_deaths; \n        d.region = [];\n\n        regions.forEach(function(dd,ii){\n            d.region.push({'region': dd, 'new_cases': d[dd].new_cases, 'new_deaths': d[dd].new_deaths, 'cumulative_cases': d[dd].cumulative_cases, 'cumulative_deaths': d[dd].cumulative_deaths});\n        })\n    });\n\n    vgroupedData = [];\n\n    if(options.timeline_type!='cumulative'){ // non-cumulative and stacked\n        // data.vaccines_data = data.vaccines_data_daily;\n        data.vaccines_data.forEach(function(d,i){\n            if(!vgroupedData[d[options.timeline_frequency+'Total']])vgroupedData[d[options.timeline_frequency+'Total']] = {};\n            if(options.timeline_frequency==='day') vgroupedData[d[options.timeline_frequency+'Total']].date = d.date;\n            if(options.timeline_frequency==='week') vgroupedData[d[options.timeline_frequency+'Total']].date = moment(d.date).startOf('isoWeek').toDate();\n            if(options.timeline_frequency==='month') vgroupedData[d[options.timeline_frequency+'Total']].date = moment(d.date).startOf('month').toDate();\n            if(!vgroupedData[d[options.timeline_frequency+'Total']][d.ifrc_region]) vgroupedData[d[options.timeline_frequency+'Total']][d.ifrc_region] = {new_vaccines: 0};\n            vgroupedData[d[options.timeline_frequency+'Total']][d.ifrc_region].new_vaccines += d.daily_vaccinations;\n        });\n        // totals by date\n        vgroupedData.forEach(function(d,i){\n            regions.forEach(function(dd,ii){\n                if(!d[dd]){\n                    d[dd] = {new_vaccines: 0, cumulative_vaccines: 0}\n                }\n            });\n            d.total_new_vaccines = d.AF.new_vaccines + d.AP.new_vaccines + d.AM.new_vaccines + d.EU.new_vaccines + d.ME.new_vaccines + d.OTH.new_vaccines; \n            d.region = [];\n            regions.forEach(function(dd,ii){\n                d.region.push({'region': dd, 'new_vaccines': d[dd].new_vaccines});\n            })\n        });\n\n    } else{ // cumulative only\n        var vData = [];\n        if(options.timeline_frequency==='day') {\n            vData = clone(data.vaccines_data);\n        }\n        if(options.timeline_frequency==='week') {\n            data.vaccines_data.forEach(function(d,i){\n                var endOfWeekDate = moment(d.date).endOf('isoWeek').startOf('day').unix();\n                var date = moment(d.date).startOf('day').unix();\n                if((date==endOfWeekDate)||(date==moment(data.max_date).startOf('day').unix())){\n                    vData.push(d);\n                }\n            })\n        }\n        if(options.timeline_frequency==='month') {\n            var maxDateUnix = moment(data.max_date).startOf('day').unix();\n            data.vaccines_data.forEach(function(d,i){\n                var endOfMonthDate = moment(d.date).endOf('month').startOf('day').unix();\n                var date = moment(d.date).startOf('day').unix();\n                if((date==endOfMonthDate)||((moment(data.max_date).startOf('day').unix()!=endOfMonthDate)&&(date==maxDateUnix))){\n                    vData.push(d);\n                }\n            })\n        }\n\n        vData.forEach(function(d,i){\n            if(!vgroupedData[d[options.timeline_frequency+'Total']])vgroupedData[d[options.timeline_frequency+'Total']] = {};\n            if(options.timeline_frequency==='day') vgroupedData[d[options.timeline_frequency+'Total']].date = d.date;\n            if(options.timeline_frequency==='week') vgroupedData[d[options.timeline_frequency+'Total']].date = moment(d.date).startOf('isoWeek').toDate();\n            if(options.timeline_frequency==='month') vgroupedData[d[options.timeline_frequency+'Total']].date = moment(d.date).startOf('month').toDate();\n            if(!vgroupedData[d[options.timeline_frequency+'Total']][d.ifrc_region]) vgroupedData[d[options.timeline_frequency+'Total']][d.ifrc_region] = {cumulative_vaccines: 0};\n            vgroupedData[d[options.timeline_frequency+'Total']][d.ifrc_region].cumulative_vaccines += d.total_vaccinations;\n        });\n        // totals by date\n        vgroupedData.forEach(function(d,i){\n            regions.forEach(function(dd,ii){\n                if(!d[dd]){\n                    d[dd] = {cumulative_vaccines: 0}\n                }\n            });\n            d.total_cumulative_vaccines = d.AF.cumulative_vaccines + d.AP.cumulative_vaccines + d.AM.cumulative_vaccines + d.EU.cumulative_vaccines + d.ME.cumulative_vaccines + d.OTH.cumulative_vaccines; \n            d.region = [];\n            regions.forEach(function(dd,ii){\n                d.region.push({'region': dd, 'cumulative_vaccines': d[dd].cumulative_vaccines});\n            })\n        });\n    }\n\n    vgroupedData = vgroupedData.filter(function(el) { return el; });\n\n    const numIntervals = d3.max(data.who_data, function(d,i){\n        return d[options.timeline_frequency+'Total'];\n    });\n\n    const maxCases = d3.max(groupedData, function(d,i){\n        if(options.timeline_type==='non-cumulative') return d.total_new_cases;\n        if(options.timeline_type==='cumulative') return d.total_cumulative_cases;\n        if(options.timeline_type==='stacked') return 100;\n    })\n\n    const maxDeaths = d3.max(groupedData, function(d,i){\n        if(options.timeline_type==='non-cumulative') return d.total_new_deaths;\n        if(options.timeline_type==='cumulative') return d.total_cumulative_deaths;\n        if(options.timeline_type==='stacked') return 100;\n    })\n\n    const maxVaccines = d3.max(vgroupedData, function(d,i){\n        if(d){\n            if(options.timeline_type==='non-cumulative') return d.total_new_vaccines;\n            if(options.timeline_type==='cumulative') return d.total_cumulative_vaccines;\n            if(options.timeline_type==='stacked') return 100;\n        }\n    })\n\n    const svg = d3.select('#timechart_svg');\n\n    const width = 2000;\n    const barWidth = width/numIntervals;\n\n    let barSpacing = 0.04; \n    if(options.timeline_frequency==='month') barSpacing = 0.03;\n    if(options.timeline_frequency==='day') barSpacing = 0;\n\n    // define scales\n\n    // xScale = d3.scaleTime()\n    // .range([0,width])\n    // .domain([minDate,md]);\n\n    // xScaleAxis = d3.scaleTime()\n    // .range([23,596])\n    // .domain([minDate,md]);\n\n    yScaleCases = d3.scaleLinear()\n    .range([0,140])\n    .domain([0,maxCases]);\n\n    yScaleCasesAxis = d3.scaleLinear()\n    .range([140,0])\n    .domain([0,maxCases]);\n\n    yScaleDeaths = d3.scaleLinear()\n    .range([0,140])\n    .domain([0,maxDeaths]);\n\n    yScaleDeathsAxis = d3.scaleLinear()\n    .range([140,0])\n    .domain([0,maxDeaths]);\n\n    yScaleVaccines = d3.scaleLinear()\n    .range([0,140])\n    .domain([0,maxVaccines]);\n\n    yScaleVaccinesAxis = d3.scaleLinear()\n    .range([140,0])\n    .domain([0,maxVaccines]);\n\n    // define axi\n    yAxisCases = d3.axisRight()\n    .scale(yScaleCasesAxis)\n    .ticks(3)\n    .tickSize(3)\n    .tickPadding(3)\n    .tickFormat(function(d){\n        if(options.timeline_type=='stacked') return nFormatter(d)+'%';\n        return nFormatter(d);\n    })\n\n    yAxisDeaths = d3.axisRight()\n    .scale(yScaleDeathsAxis)\n    .ticks(3)\n    .tickSize(3)\n    .tickPadding(3)\n    .tickFormat(function(d){\n        if(options.timeline_type=='stacked') return nFormatter(d)+'%';\n        return nFormatter(d);\n    })\n\n    yAxisVaccines = d3.axisRight()\n    .scale(yScaleVaccinesAxis)\n    .ticks(3)\n    .tickSize(3)\n    .tickPadding(3)\n    .tickFormat(function(d){\n        if(options.timeline_type=='stacked') return nFormatter(d)+'%';\n        return nFormatter(d);\n    })\n\n    // y-axis cases\n    var yAxisCasesText = d3.select('#casesAxis')\n    .transition()\n    .duration(500)\n    .call(yAxisCases);\n\n    // y-axis deaths\n    var yAxisDeathsText = d3.select('#deathsAxis')\n    .transition()\n    .duration(500)\n    .call(yAxisDeaths);\n\n    // y-axis vaccines\n    var yAxisVaccinesText = d3.select('#VaccinesAxis')\n    .transition()\n    .duration(500)\n    .call(yAxisVaccines);\n\n    // CASES\n    // loop through groupedData and draw bars\n    const barGroups = svg.selectAll('.bar_group')\n    .data(groupedData)\n    .attr('transform', function(d,i){ \n        return 'translate('+xScale(d.date)+')'\n    })\n\n    // CASES\n    barGroups.selectAll('.cases_bar')\n    .data(function(d,i){ return d.region.filter(function(dd,ii){\n        return dd.region!=='OTH';\n    })})\n    .transition()\n    .duration(500)\n    .attr('y', function(d,i){\n        const totalNewCases = d3.select(this.parentNode).datum().total_new_cases - d3.select(this.parentNode).datum().OTH.new_cases;\n        let dp = 0;\n        if(i>0){\n            for(let ii=1;ii<=i;ii++){\n                if(options.timeline_type==='cumulative') dp += d3.select(this.parentNode).datum().region[ii-1].cumulative_cases;\n                if(options.timeline_type==='non-cumulative') dp += d3.select(this.parentNode).datum().region[ii-1].new_cases;\n                if(options.timeline_type==='stacked') dp += d3.select(this.parentNode).datum().region[ii-1].new_cases;\n            }\n        }\n        let y = 0;\n        if(options.timeline_type==='cumulative') y = (140-yScaleCases(d.cumulative_cases)-(yScaleCases(dp)))\n        if(options.timeline_type==='non-cumulative') y = (140-yScaleCases(d.new_cases)-(yScaleCases(dp)))\n        if(options.timeline_type==='stacked') y = (140-(140*(d.new_cases/totalNewCases))-((140*(dp/totalNewCases))))\n        if(y){ if(y>0) { return y} else { return 0}; } else { return 0};\n    })\n    .attr('height', function(d,i){\n        const totalNewCases = d3.select(this.parentNode).datum().total_new_cases - d3.select(this.parentNode).datum().OTH.new_cases;\n        let y = 0;\n        if(options.timeline_type==='cumulative') y = yScaleCases(d.cumulative_cases);\n        if(options.timeline_type==='non-cumulative') y = yScaleCases(d.new_cases);\n        if(options.timeline_type==='stacked') y = (140*(d.new_cases/totalNewCases));\n        if(y){ if(y>0) { return y} else { return 0}; } else { return 0};\n    })\n    .attr('fill', function(d,i){\n        return colors.regions[d.region];\n        return 'blue'\n    })\n\n    // // DEATHS\n    barGroups.selectAll('.deaths_bar')\n    .data(function(d,i){ return d.region.filter(function(dd,ii){\n        return dd.region!=='OTH';\n    })})\n    .transition()\n    .duration(500)\n    .attr('y', function(d,i){\n        const totalNewDeaths = d3.select(this.parentNode).datum().total_new_deaths - d3.select(this.parentNode).datum().OTH.new_deaths;\n        let dp = 0;\n        if(i>0){\n            for(let ii=1;ii<=i;ii++){\n                if(options.timeline_type==='cumulative') dp += d3.select(this.parentNode).datum().region[ii-1].cumulative_deaths;\n                if(options.timeline_type==='non-cumulative') dp += d3.select(this.parentNode).datum().region[ii-1].new_deaths;\n                if(options.timeline_type==='stacked') dp += d3.select(this.parentNode).datum().region[ii-1].new_deaths;\n            }\n        }\n        let y = 0;\n        if(options.timeline_type==='cumulative') y = (140-yScaleDeaths(d.cumulative_deaths)-(yScaleDeaths(dp))+170)\n        if(options.timeline_type==='non-cumulative') y = (140-yScaleDeaths(d.new_deaths)-(yScaleDeaths(dp))+170)\n        if(options.timeline_type==='stacked') y = (140-(140*(d.new_deaths/totalNewDeaths))-((140*(dp/totalNewDeaths)))+170)\n        // if(options.timeline_type==='non-cumulative') if(y>310) return 0;\n        if(y){ if(y>0) { return y} else { return 0}; } else { return 0};\n    })\n    .attr('height', function(d,i){\n        const totalNewDeaths = d3.select(this.parentNode).datum().total_new_deaths - d3.select(this.parentNode).datum().OTH.new_deaths;\n        let y = 0;\n        if(options.timeline_type==='cumulative') y = yScaleDeaths(d.cumulative_deaths);\n        if(options.timeline_type==='non-cumulative') y = yScaleDeaths(d.new_deaths);\n        if(options.timeline_type==='stacked') y = (140*(d.new_deaths/totalNewDeaths));\n        if(options.timeline_type==='non-cumulative') if(y<0) return 0;\n\n        if(y){ if(y>0) { return y} else { return 0}; } else { return 0};\n    })\n\n    if(groupedData.length==0){\n        d3.selectAll('.cases_bar')\n        .transition()\n        .duration(500)\n        .attr('y', 140)\n        .attr('height', 0)\n\n        d3.selectAll('.deaths_bar')\n        .transition()\n        .duration(500)\n        .attr('y', 140+170)\n        .attr('height', 0)\n        \n    }\n    // // VACCINES\n\n    const vbarGroups = svg.selectAll('.vbar_group')\n    .data(vgroupedData)\n    .attr('transform', function(d,i){ \n        return 'translate('+xScale(d.date)+', 344)'\n    })\n\n    vbarGroups.selectAll('.vaccines_bar')\n    .data(function(d,i){ return d.region.filter(function(dd,ii){\n        return dd.region!=='OTH';\n    })})\n    .transition()\n    .duration(500)\n    .attr('y', function(d,i){\n        const totalNewVaccines = d3.select(this.parentNode).datum().total_new_vaccines - d3.select(this.parentNode).datum().OTH.new_vaccines;\n        let dp = 0;\n        if(i>0){\n            for(let ii=1;ii<=i;ii++){\n                if(options.timeline_type==='cumulative') dp += d3.select(this.parentNode).datum().region[ii-1].cumulative_vaccines;\n                if(options.timeline_type==='non-cumulative') dp += d3.select(this.parentNode).datum().region[ii-1].new_vaccines;\n                if(options.timeline_type==='stacked') dp += d3.select(this.parentNode).datum().region[ii-1].new_vaccines;\n            }\n        }\n        let y = 0;\n        if(options.timeline_type==='cumulative') y = (140-yScaleVaccines(d.cumulative_vaccines)-(yScaleVaccines(dp)))\n        if(options.timeline_type==='non-cumulative') y = (140-yScaleVaccines(d.new_vaccines)-(yScaleVaccines(dp)))\n        if(options.timeline_type==='stacked') y = (140-(140*(d.new_vaccines/totalNewVaccines))-((140*(dp/totalNewVaccines))))\n        if(y){ if(y>0) { return y} else { return 0}; } else { return 0};\n    })\n    .attr('height', function(d,i){\n        const totalNewVaccines = d3.select(this.parentNode).datum().total_new_vaccines - d3.select(this.parentNode).datum().OTH.new_vaccines;\n        let y = 0;\n        if(options.timeline_type==='cumulative') y = yScaleVaccines(d.cumulative_vaccines);\n        if(options.timeline_type==='non-cumulative') y = yScaleVaccines(d.new_vaccines);\n        if(options.timeline_type==='stacked') y = (140*(d.new_vaccines/totalNewVaccines));\n        if(y){ if(y>0) { return y} else { return 0}; } else { return 0};\n    });\n\n    if(vgroupedData.length==0){\n        d3.selectAll('.vaccines_bar')\n        .transition()\n        .duration(500)\n        .attr('y', 140)\n        .attr('height', 0)\n    }\n   \n    // // bar size tweak for spacing\n    // if(options.timeline_frequency==='month'){\n    //     barGroups.selectAll(\".timeBar\")\n    //     .attr(\"width\", function(d) {\n    //         var date = d3.select(this.parentNode).datum().date;\n    //         var next = d3.timeMonth.offset(date, 1);\n    //         return (xScale(next)- xScale(date))*(1-barSpacing);\n    //       })\n    //     .attr(\"x\", function(d) {\n    //         var date = d3.select(this.parentNode).datum().date;\n    //         var next = d3.timeMonth.offset(date, 1);\n    //         return (xScale(next)- xScale(date))*(barSpacing/2);\n    //       })\n    //     }\n\n    d3.select('#timechart_svg').on('mouseover',  (event) => {\n\n        var coords = d3.pointer( event );\n        hoverBar.attr('opacity', 1)\n\n        var xDate = xScale.invert(coords[0]);\n\n        if(options.timeline_frequency=='week') {\n            xDate = moment(xDate).startOf('isoWeek');\n        }\n        if(options.timeline_frequency=='day') {\n            xDate = moment(xDate).startOf('day');\n        }\n        if(options.timeline_frequency=='month') {\n            xDate = moment(xDate).startOf('month');\n        }\n\n        if(coords[1]<470){\n            timelineTooltip.attr('opacity', 1).attr('display', 'inline');\n            hoverBar.attr('height', '100%');\n        } else if(coords[1]>510){\n            eventTooltip.attr('opacity', 1);\n            hoverBar.attr('height', '90%');\n        } else {\n            eventTooltip.attr('opacity', 0);\n            timelineTooltip.attr('opacity', 0);\n            hoverBar.attr('height', '100%');\n        }\n\n        if((xDate.toDate().getTime()<minDate.getTime())){\n            hoverBar.attr('opacity', 0);\n            timelineTooltip.attr('opacity', 0);\n        }\n\n        d3.select('#svg_container').style('z-index', 10);\n\n    }).on('mouseout',  (event) => {\n        hoverBar.attr('opacity', 0)\n        timelineTooltip.attr('opacity', 0).attr('display', 'none');\n        // timelineTooltip.attr('opacity', 0).attr('transform', 'translate(0,0)');\n        d3.select('#svg_container').style('z-index', 1);\n        eventTooltip.attr('opacity', 0).attr('transform', 'translate(0,0)');\n        d3.selectAll('.event_marker circle').style('stroke', colors.black);\n    })\n    .on('mousemove', (event) => {\n        var coords = d3.pointer( event );\n\n        var xDate = xScale.invert(coords[0]);\n\n        var tooltipStr = '';\n        if(options.timeline_frequency=='week') {\n            xDate = moment(xDate).startOf('isoWeek');\n            tooltipStr = xDate.format('ll');\n            d3.select('#timeline_tooltip_date tspan').text(tooltipStr);\n        }\n        if(options.timeline_frequency=='day') {\n            xDate = moment(xDate).startOf('day');\n            tooltipStr = xDate.format('ll');\n            d3.select('#timeline_tooltip_date tspan').text(tooltipStr);\n        }\n        if(options.timeline_frequency=='month') {\n            xDate = moment(xDate).startOf('month');\n            tooltipStr = xDate.format('MMMM YYYY');\n            d3.select('#timeline_tooltip_date tspan').text(tooltipStr);\n        }\n        hoverBar.attr('x', xScale(xDate.toDate()));\n\n        var groupedDataFiltered = groupedData.filter(function(d,i){\n            return moment(d.date).startOf('day').unix() == xDate.startOf('day').unix();\n        });\n        var vgroupedDataFiltered = vgroupedData.filter(function(d,i){\n            return moment(d.date).startOf('day').unix() == xDate.startOf('day').unix();\n        });\n\n        var deaths = '-';\n        var cases = '-';\n        var vaccines = '-';\n        if(options.timeline_type=='cumulative'){ \n            // cumulative\n            if(groupedDataFiltered[0]) cases = nFormatter(groupedDataFiltered[0].total_cumulative_cases, 2);\n            if(groupedDataFiltered[0]) deaths = nFormatter(groupedDataFiltered[0].total_cumulative_deaths, 2);\n            if(vgroupedDataFiltered[0]) vaccines = nFormatter(vgroupedDataFiltered[0].total_cumulative_vaccines, 2);\n        } else {\n            // non-cumulative/stacked\n            if(groupedDataFiltered[0]) cases = nFormatter(groupedDataFiltered[0].total_new_cases, 2);\n            if(groupedDataFiltered[0]) deaths = nFormatter(groupedDataFiltered[0].total_new_deaths, 2);\n            if(vgroupedDataFiltered[0]) vaccines = nFormatter(vgroupedDataFiltered[0].total_new_vaccines, 2);\n        }\n\n        if(deaths==0) deaths = '-';\n        if(cases==0) cases = '-';\n        if(vaccines==0) vaccines = '-';\n\n        d3.select('#tooltip_cases tspan').text((cases)).attr(\"text-anchor\", \"end\").attr('dx', 32)\n        d3.select('#tooltip_deaths tspan').text((deaths)).attr(\"text-anchor\", \"end\").attr('dx', 32)\n        d3.select('#tooltip_vaccines tspan').text((vaccines)).attr(\"text-anchor\", \"end\").attr('dx', 32)\n\n        // if((xDate.toDate().getTime()>options.maxDate.getTime())){\n        //     hoverBar.attr('opacity', 0);\n        // // } else \n        if(((xDate.toDate().getTime()<minDate.getTime()))&&(options.timeline_frequency=='day')){\n            hoverBar.attr('opacity', 0);\n            timelineTooltip.attr('opacity', 0);\n        }\n\n        if(options.timeline_frequency=='month'){\n            hoverBar.attr('width', function(){\n               return xScale(moment(xDate).endOf('month')) - xScale(moment(xDate).startOf('month'));\n            })\n        }\n        timelineTooltip.attr('transform', function(){\n            var bw = barWidth;\n            var ratio = (options.brushR - options.brushL)/600;\n            var offset = 0;\n            if(ratio<0.5) offset = 3;\n            if(ratio<0.3) offset = 12;\n            if(ratio<0.2) offset = 20;\n            if(ratio<0.15) offset = 21;\n            if(options.timeline_frequency=='month') { \n                if(ratio<0.6) offset = 20;\n                if(ratio<0.5) offset = 30;\n                if(ratio<0.3) offset = 50;\n                if(ratio<0.2) offset = 60;\n                if(ratio<0.1) offset = 70;\n                return 'translate('+(((xScaleEvents(xDate.toDate()))+(barWidth/3))+offset)+','+(coords[1]+353)+')';\n            }\n            return 'translate('+((xScaleEvents(xDate.toDate())+(18))+offset)+','+(coords[1]+353)+')';\n        })\n\n        if(coords[1]<470){\n            timelineTooltip.attr('opacity', 1);\n            hoverBar.attr('opacity', 1);\n            hoverBar.attr('height', '100%');\n        } else if(coords[1]>510){\n            eventTooltip.attr('opacity', 1);\n            hoverBar.attr('height', '90%');\n            var x = moment(xScale.invert(coords[0])).startOf('day');\n            var xx = (xScale.invert(coords[0]))\n            eventTooltip.attr('transform', function(){\n                return 'translate('+(xScaleEvents(x.toDate())+(-3))+','+(817)+')';\n            });\n\n            var events = tData.filter(function(d,i){\n                return moment(d.date).startOf('day').unix() == x.unix()\n            });\n\n            // select nearest neighbor for ux purposes \n            if(events.length==0){\n                events = tData.filter(function(d,i){\n                    return ((moment(d.date).startOf('day').unix() <= moment(x).add(1, 'days').unix())&&(moment(d.date).startOf('day').unix() >= moment(x).subtract(1, 'days').unix()))\n                });\n            }\n            \n            if(events.length>0){\n\n                d3.select('#event-'+moment(events[0].date).startOf('day').unix()).select('path').style('stroke', '#000').attr('opacity', 1);\n                tooltipStr = moment(events[0].date).startOf('day').format('ll');\n                d3.select('#event_tooltip_date tspan').text(tooltipStr);\n\n                var wrap = textwrap().bounds({height: 200, width: 230}).method('tspans');\n                var event = d3.select('#event_tooltip_text').text(events[0].description)\n                .attr('y', 18)\n                .attr('x', 6)\n                d3.select('#event_tooltip_text').call(wrap);\n\n                d3.selectAll('#event_tooltip_text tspan').attr('dy', '1.3em');\n                var bbox = d3.select('#event_tooltip_text').node().getBBox();\n                d3.select('#event_tooltip_rect').attr('width', bbox.width+17)\n                .attr('height', bbox.height +26 );\n\n                var h = d3.select('#event_tooltip_rect').attr('height');\n                var ys = 0;\n\n                if(bbox.height<20){\n                    ys = 19;\n                } else if(bbox.height<30){\n                    ys = 9;\n                } else if(bbox.height<40){\n                    ys = 0;\n                } else if(bbox.height<50){\n                    ys = -20;\n                } else if(bbox.height<60){\n                    ys = -20;\n                }\n\n                var y = d3.select('#event_tooltip_rect').attr('y');\n\n                d3.select('#event_tooltip_rect').attr('y', ys);\n                \n                d3.selectAll('#event_tooltip_text').attr('y', function(d,i){\n                    return parseInt(d3.select(this).attr('y')) + ys;\n                });\n\n                d3.selectAll('#event_tooltip_date tspan').attr('dy', function(d,i){\n                    return ys;\n                });\n\n                eventTooltip.attr('opacity', 1);\n\n            } else {\n                d3.selectAll('.event_marker circle').style('stroke', colors.black)\n                eventTooltip.attr('opacity', 0);\n            }\n        } else {\n            eventTooltip.attr('opacity', 0);\n            timelineTooltip.attr('opacity', 0);\n            hoverBar.attr('opacity', 0);\n            hoverBar.attr('height', '100%');\n        }\n\n        if((options.timeline_frequency=='day')&&((xDate.toDate().getTime()<minDate.getTime()))){\n            hoverBar.attr('opacity', 0);\n            timelineTooltip.attr('opacity', 0);\n            return false;\n        }\n    });\n\n}\n\nexport default drawTimechart;\n","import * as d3 from \"d3\";\nimport moment from 'moment';\nimport colors from './colors';\nimport {addCommas} from './HelperFunctions';\nimport {filter} from './App';\n\nlet maxCases;\nlet maxDeaths;\nlet maxVaccinations;\nlet xScaleCases; \nlet xScaleDeaths;\nlet xScaleVaccines;\nlet labelWidth; \nconst margin = { left: 20, top: 0, right: 58 };\nlet rcSize; \nlet groupedData = [];\n\nexport function drawRegionchart(data, options, filter) {\n\n    const barSpacing = 0.1;\n\n    // reset region values to zero\n    data.regions.forEach(function(d,i){\n        d.population = 0;\n        d.cumulative_deaths = 0;\n        d.cumulative_cases = 0;\n        d.cumulative_vaccines = 0;\n    })\n\n    // loop through countries and calculate region totals\n    data.country.forEach(function(d,i){\n        data.regions.forEach(function(dd,ii){\n            if((dd.code==d.ifrc_region)){ \n                if((d.population>0)&&(d.who_daily_latest)){\n                    if(d.who_daily_latest.cumulative_cases>0)\n                    dd.cumulative_cases += d.who_daily_latest.cumulative_cases;\n                    if(d.who_daily_latest.cumulative_deaths>0)\n                    dd.cumulative_deaths += d.who_daily_latest.cumulative_deaths||0;\n                    dd.population += d.population;\n                }\n                if((d.population>0)&&(d.vaccine_daily_latest)){\n                    dd.cumulative_vaccines += (d.vaccine_daily_latest.total_vaccinations)||0;\n                }\n            }\n        });\n    });\n\n    // calculate regions per 100k values using total population for each region\n    data.regions.forEach(function(d,i){\n        d.cumulative_cases_per_100k = d.cumulative_cases/(d.population/100000)\n        d.cumulative_deaths_per_100k = d.cumulative_deaths/(d.population/100000);\n        d.cumulative_vaccines_per_100k = d.cumulative_vaccines/(d.population/100000);\n        if(!isFinite(d.cumulative_cases_per_100k)) d.cumulative_cases_per_100k = 0;\n        if(!isFinite(d.cumulative_deaths_per_100k)) d.cumulative_deaths_per_100k = 0;\n        if(!isFinite(d.cumulative_vaccines_per_100k)) d.cumulative_vaccines_per_100k = 0;\n    })\n\n    // get maximum values for each series\n    if(options.region_switch=='per100'){\n        // get maximum values for each series\n        maxVaccinations = d3.max(data.regions, function(d,i){\n            return d.cumulative_vaccines_per_100k;\n        })\n\n        maxCases = d3.max(data.regions, function(d,i){\n            return d.cumulative_cases_per_100k;\n        })\n\n        maxDeaths = d3.max(data.regions, function(d,i){\n            return d.cumulative_deaths_per_100k;\n        });\n    } else {\n         // get maximum values for each series\n         maxVaccinations = d3.max(data.regions, function(d,i){\n            return d.cumulative_vaccines;\n        })\n\n        maxCases = d3.max(data.regions, function(d,i){\n            return d.cumulative_cases;\n        })\n\n        maxDeaths = d3.max(data.regions, function(d,i){\n            return d.cumulative_deaths;\n        });\n    }\n\n    // append region chart container\n    const regionChartContainer = d3.select('#layout #region_chart_container').attr('opacity', 0);\n\n    // get dimensions\n    rcSize = {\n        x: regionChartContainer.attr('x'), y: regionChartContainer.attr('y'), width: regionChartContainer.attr('width'), height: regionChartContainer.attr('height')\n    }\n\n    // create svg container\n    const svg = d3.select('#layout').append('g').attr('transform', 'translate('+rcSize.x+', '+rcSize.y+')')\n    .attr('id', 'region_chart');\n\n    // calculate chart row height\n\tvar rowHeight = rcSize.height/(data.regions.length-1); // remove OTH\n\n    // create rows\n    var rows = svg.selectAll('.bar-row')\n\t.data(data.regions.filter(d=>d.code!=='OTH'))\n\t.enter()\n\t.append('g')\n\t.attr('class', 'bar-row')\n\t.attr('transform', function(d,i){\n\t\treturn 'translate(0,' + ((i*rowHeight) + margin.top) + ')';\n\t});\n\n    // create region labels\n    var label = rows.append('text')\n\t.attr('y', rowHeight/2 )\n    .attr('x', margin.left-5)\n\t.attr('class', function(d,i){ return 'bar-labels bar-label-'+d.code })\n\t.style('alignment-baseline', 'middle')\n\t.style('font-size', '11px')\n    .attr('opacity', 1)\n\t.attr('fill', '#000')\n\t.text(function(d,i){\n\t\tif(d.code==='AM') return 'Americas';\n\t\tif(d.code==='EU') return 'Europe';\n\t\tif(d.code==='AF') return 'Africa';\n\t\tif(d.code==='ME') return 'Middle East and North Africa';\n\t\tif(d.code==='AP') return 'Asia-Pacific';\n\t}).style('text-anchor', 'end');\n\n    // get label node width for use in scale\n    labelWidth = rows.node().getBBox().width + margin.left;\n\tlabel.attr('x', labelWidth+89);\n\tlabelWidth = labelWidth + 94;\n    d3.selectAll('.timeBar').attr('opacity',1);\n    \n    // create fading background click area\n    var rowBg = rows.append('rect')\n\t.attr('y', 0)\n\t.attr('x', 0)\n\t.attr('width', labelWidth)\n\t.attr('height', rowHeight-2)\n\t.style('opacity', 0)\n    .attr('fill', 'grey')\n\t.style('cursor', 'pointer')\n\t.attr('class', function(d,i){ return 'bar-bg-'+d.code })\n\t.attr('data-id', function(d,i){ return d.code })\n\t.on('mouseover', function(d){\n\t\td3.select(this).style('opacity', 0.1);\n\t})\n\t.on('mouseout', function(){\n\t\td3.select(this).style('opacity', 0);\n\t})\n\t.on('click', function(d,i){\n        var t = d3.select(this).attr('data-id');\n        filter([t],'regionchart');\n    });\n\n    // define scales\n    xScaleCases = d3.scaleLinear()\n\t.range([0, rcSize.width - margin.right - labelWidth])\n\t.domain([0, maxCases]);\n\n    xScaleDeaths = d3.scaleLinear()\n\t.range([0, rcSize.width - margin.right - labelWidth])\n\t.domain([0, maxDeaths]);\n\n    xScaleVaccines = d3.scaleLinear()\n\t.range([labelWidth, rcSize.width - margin.right - labelWidth])\n\t.domain([0, maxVaccinations]);\n\n    var bars = rows.append('rect')\n    .attr('id', function(d,i){\n        return 'bar-'+d.code;\n    })\n\t.attr('data-id', function(d,i){ return d.code })\n    .attr('class', 'region-bar')\n    .attr('width', function(d,i){\n        var val = 0;\n        if(options.region_switch=='per100'){\n            if(options.region_chart_toggle == 'cases') val = xScaleCases(d.cumulative_cases_per_100k);\n            if(options.region_chart_toggle == 'deaths') val = xScaleDeaths(d.cumulative_deaths_per_100k);\n            if(options.region_chart_toggle == 'vaccines') val = xScaleVaccines(d.cumulative_vaccines_per_100k);\n        } else {\n            if(options.region_chart_toggle == 'cases') val = xScaleCases(d.cumulative_cases);\n            if(options.region_chart_toggle == 'deaths') val = xScaleDeaths(d.cumulative_deaths);\n            if(options.region_chart_toggle == 'vaccines') val = xScaleVaccines(d.cumulative_vaccines);                \n        }\n        if(!isNaN(val)) { return parseFloat(val) } else { return 0}\n    })\n    .attr('x', labelWidth)\n    .style('outline', 'none')\n    .style('cursor', 'pointer')\n    .attr('y', rowHeight*barSpacing - 1)\n    .attr('height', rowHeight-((rowHeight*barSpacing)*2))\n    .style('fill', function(d){\n        return colors.regions[d.code]\n    })\n    .attr('opacity',1)\n    .on('click', function(d,i){\n        var t = d3.select(this).attr('data-id');\n        filter([t],'regionchart');\n    })\n    .on('mouseover', function(d){\n        var dat = d3.select(this.parentNode).datum();\n        // d3.selectAll('.timeBar:not(.time_'+dat.region).transition().duration(500).attr('opacity', 0.3);\n        // d3.selectAll('.time_'+dat.region).attr('opacity', 1);\n\t})\n\t.on('mouseout', function(){\n        // d3.selectAll('.timeBar').transition().duration(500).attr('opacity', 1);\n\t})\n\n    // create data value labels\n    var dataLabel = rows.append('text')\n\t.text(function(d){\n        var val = 0;\n        if(options.region_switch=='per100'){\n            if(options.region_chart_toggle == 'cases') val = (Math.round(d.cumulative_cases_per_100k));\n            if(options.region_chart_toggle == 'deaths') val = (Math.round(d.cumulative_deaths_per_100k));\n            if(options.region_chart_toggle == 'vaccines') val = (Math.round(d.cumulative_vaccines_per_100k));\n        } else {\n            if(options.region_chart_toggle == 'cases') val = (Math.round(d.cumulative_cases));\n            if(options.region_chart_toggle == 'deaths') val = (Math.round(d.cumulative_deaths));\n            if(options.region_chart_toggle == 'vaccines') val = (Math.round(d.cumulative_vaccines));             \n        }\n        return addCommas(val);\n    })\n\t.attr('id', function(d,i){\n\t\treturn 'data-label'+d.code;\n\t})\n    .attr('data-id', function(d,i){ return d.code })\n\t.attr('class', 'data-label')\n\t.attr('y', rowHeight/2)\n\t.style('alignment-baseline', 'middle')\n\t.style('text-anchor', 'start')\n\t.attr('x', function(d,i){\n        var val = 0;\n        if(options.region_switch=='per100'){\n            if(options.region_chart_toggle == 'cases') val = xScaleCases(d.cumulative_cases_per_100k)+labelWidth+5;\n            if(options.region_chart_toggle == 'deaths') val = xScaleDeaths(d.cumulative_deaths_per_100k)+labelWidth+5;\n            if(options.region_chart_toggle == 'vaccines') val = xScaleVaccines(d.cumulative_vaccines_per_100k)+labelWidth+5;\n        } else {\n            if(options.region_chart_toggle == 'cases') val = xScaleCases(d.cumulative_cases)+labelWidth+5;\n            if(options.region_chart_toggle == 'deaths') val = xScaleDeaths(d.cumulative_deaths)+labelWidth+5;\n            if(options.region_chart_toggle == 'vaccines') val = xScaleVaccines(d.cumulative_vaccines)+labelWidth+5;               \n        }\n        return val;\n    })\n    .attr('opacity', function(d,i){\n        var val = 0;\n        if(options.region_switch=='per100'){\n            if(options.region_chart_toggle == 'cases') val = (d.cumulative_cases_per_100k);\n            if(options.region_chart_toggle == 'deaths') val = (d.cumulative_deaths_per_100k);\n            if(options.region_chart_toggle == 'vaccines') val = (d.cumulative_vaccines_per_100k);\n        } else {\n            if(options.region_chart_toggle == 'cases') val = (d.cumulative_cases);\n            if(options.region_chart_toggle == 'deaths') val = (d.cumulative_deaths);\n            if(options.region_chart_toggle == 'vaccines') val = (d.cumulative_vaccines);\n        }\n        if(val>0){ return 1 } else { return 0}\n    })\n\t.style('fill', '#696969')\n\t.style('font-weight', 'normal')\n\t.style('font-size', '10px');\n\n}\n\nexport function updateRegionchart(options,data) {\n    \n    // reset region values to zero\n    data.regions.forEach(function(d,i){\n        d.population = 0;\n        d.cumulative_deaths = 0;\n        d.cumulative_cases = 0;\n        d.cumulative_vaccines = 0;\n    })\n\n    // loop through countries and calculate region totals\n    data.country.forEach(function(d,i){\n        data.regions.forEach(function(dd,ii){\n            if((dd.code==d.ifrc_region)){ \n                if((d.population>0)&&(d.who_daily_latest)){\n                    if(d.who_daily_latest.cumulative_cases>0)\n                    dd.cumulative_cases += d.who_daily_latest.cumulative_cases;\n                    if(d.who_daily_latest.cumulative_deaths>0)\n                    dd.cumulative_deaths += d.who_daily_latest.cumulative_deaths||0;\n                    dd.population += d.population;\n                }\n                if((d.population>0)&&(d.vaccine_daily_latest)){\n                    dd.cumulative_vaccines += (d.vaccine_daily_latest.total_vaccinations)||0;\n                }\n            }\n        });\n    });\n\n    // calculate regions per 100k values using total population for each region\n    data.regions.forEach(function(d,i){\n        d.cumulative_cases_per_100k = d.cumulative_cases/(d.population/100000)\n        d.cumulative_deaths_per_100k = d.cumulative_deaths/(d.population/100000);\n        d.cumulative_vaccines_per_100k = d.cumulative_vaccines/(d.population/100000);\n        if(!isFinite(d.cumulative_cases_per_100k)) d.cumulative_cases_per_100k = 0;\n        if(!isFinite(d.cumulative_deaths_per_100k)) d.cumulative_deaths_per_100k = 0;\n        if(!isFinite(d.cumulative_vaccines_per_100k)) d.cumulative_vaccines_per_100k = 0;\n    })\n\n    if(options.region_switch=='per100'){\n        // get maximum values for each series\n        maxVaccinations = d3.max(data.regions, function(d,i){\n            return d.cumulative_vaccines_per_100k;\n        })\n\n        maxCases = d3.max(data.regions, function(d,i){\n            return d.cumulative_cases_per_100k;\n        })\n\n        maxDeaths = d3.max(data.regions, function(d,i){\n            return d.cumulative_deaths_per_100k;\n        });\n    } else {\n         // get maximum values for each series\n         maxVaccinations = d3.max(data.regions, function(d,i){\n            return d.cumulative_vaccines;\n        })\n\n        maxCases = d3.max(data.regions, function(d,i){\n            return d.cumulative_cases;\n        })\n\n        maxDeaths = d3.max(data.regions, function(d,i){\n            return d.cumulative_deaths;\n        });\n    }\n\n    // redefine scales using new extent\n    xScaleCases = d3.scaleLinear()\n\t.range([0, rcSize.width - margin.right - labelWidth])\n\t.domain([0, maxCases]);\n\n    xScaleDeaths = d3.scaleLinear()\n\t.range([0, rcSize.width - margin.right - labelWidth])\n\t.domain([0, maxDeaths]);\n\n    xScaleVaccines = d3.scaleLinear()\n\t.range([0, rcSize.width - margin.right - labelWidth])\n\t.domain([0, maxVaccinations]);\n\n    // update bars\n    if((maxVaccinations==0)&&(maxCases==0)&&(maxDeaths==0)){\n        d3.selectAll('.region-bar')\n        .transition().duration(500)\n        .attr('width', 0);\n\n        d3.selectAll('.data-label')\n        .transition()\n          .duration(500) \n          .attr('x', labelWidth)\n          .attr('opacity', 0);\n    } else {\n        d3.selectAll('.region-bar')\n        .transition().duration(500)\n        .style('fill', function(d){\n            return colors.regions[d.code];\n            if(options.region_chart_toggle=='vaccines'){\n                return colors.regions_blue[d.code]\n            } else {\n                return colors.regions[d.code]\n            }\n        })\n        .attr('width', function(d,i){\n            var id = d3.select(this).attr('data-id');\n            var d;\n            groupedData.forEach(function(dd,ii){\n                if(dd.code == id){\n                    d = dd;\n                }\n            })\n            var val = 0;\n            if(options.region_switch=='per100'){\n                if(options.region_chart_toggle == 'cases') val = xScaleCases(d.cumulative_cases_per_100k);\n                if(options.region_chart_toggle == 'deaths') val = xScaleDeaths(d.cumulative_deaths_per_100k);\n                if(options.region_chart_toggle == 'vaccines') val = xScaleVaccines(d.cumulative_vaccines_per_100k);\n            } else {\n                if(options.region_chart_toggle == 'cases') val = xScaleCases(d.cumulative_cases);\n                if(options.region_chart_toggle == 'deaths') val = xScaleDeaths(d.cumulative_deaths);\n                if(options.region_chart_toggle == 'vaccines') val = xScaleVaccines(d.cumulative_vaccines);                \n            }\n            if(!isNaN(val)) { return parseFloat(val) } else { return 0}\n        })   \n        d3.selectAll('.data-label')\n        .transition()\n          .duration(500)\n          .tween(\"text\", function(d,i) {\n            var val = 0;\n            var id = d3.select(this).attr('data-id');\n            var d;\n            groupedData.forEach(function(dd,ii){\n                if(dd.code == id){\n                    d = dd;\n                }\n            })\n            if(options.region_switch=='per100'){\n                if(options.region_chart_toggle == 'cases') val = (Math.round(d.cumulative_cases_per_100k));\n                if(options.region_chart_toggle == 'deaths') val = (Math.round(d.cumulative_deaths_per_100k));\n                if(options.region_chart_toggle == 'vaccines') val = (Math.round(d.cumulative_vaccines_per_100k));\n            } else {\n                if(options.region_chart_toggle == 'cases') val = (Math.round(d.cumulative_cases));\n                if(options.region_chart_toggle == 'deaths') val = (Math.round(d.cumulative_deaths));\n                if(options.region_chart_toggle == 'vaccines') val = (Math.round(d.cumulative_vaccines));             \n            }\n            var i = d3.interpolate(Math.floor((Math.random() * 2346) + 9345), val);\n            return function(t) {\n              d3.select(this).text(addCommas(Math.round(i(t))));\n            };\n          })\n        .attr('x', function(d,i){\n            var id = d3.select(this).attr('data-id');\n            var d;\n            groupedData.forEach(function(dd,ii){\n                if(dd.code == id){\n                    d = dd;\n                }\n            })\n            var val = 0;\n            if(options.region_switch=='per100'){\n                if(options.region_chart_toggle == 'cases') val = xScaleCases(d.cumulative_cases_per_100k)+labelWidth+5;\n                if(options.region_chart_toggle == 'deaths') val = xScaleDeaths(d.cumulative_deaths_per_100k)+labelWidth+5;\n                if(options.region_chart_toggle == 'vaccines') val = xScaleVaccines(d.cumulative_vaccines_per_100k)+labelWidth+5;\n            } else {\n                if(options.region_chart_toggle == 'cases') val = xScaleCases(d.cumulative_cases)+labelWidth+5;\n                if(options.region_chart_toggle == 'deaths') val = xScaleDeaths(d.cumulative_deaths)+labelWidth+5;\n                if(options.region_chart_toggle == 'vaccines') val = xScaleVaccines(d.cumulative_vaccines)+labelWidth+5;               \n            }\n            return val;\n        })\n        .attr('opacity', function(d,i){\n            var d;\n            var id = d3.select(this).attr('data-id');\n            groupedData.forEach(function(dd,ii){\n                if(dd.code == id){\n                    d = dd;\n                }\n            })\n            var val = 0;\n            if(options.region_switch=='per100'){\n                if(options.region_chart_toggle == 'cases') val = (d.cumulative_cases_per_100k);\n                if(options.region_chart_toggle == 'deaths') val = (d.cumulative_deaths_per_100k);\n                if(options.region_chart_toggle == 'vaccines') val = (d.cumulative_vaccines_per_100k);\n            } else {\n                if(options.region_chart_toggle == 'cases') val = (d.cumulative_cases);\n                if(options.region_chart_toggle == 'deaths') val = (d.cumulative_deaths);\n                if(options.region_chart_toggle == 'vaccines') val = (d.cumulative_vaccines);\n            }\n            if(val>0){ return 1 } else { return 0}\n        })\n\n    }\n\n}\n\nexport default drawRegionchart;\n","import * as d3 from \"d3\";\nimport {drawTimechart, updateTimechart} from './Timechart';\nimport {updateRegionchart} from './Regionchart';\nimport colors from './colors';\nimport tippy from 'tippy.js';\nimport 'tippy.js/dist/svg-arrow.css';\nimport 'tippy.js/themes/light.css';\nimport { jsPDF } from \"jspdf\";\nimport html2canvas from 'html2canvas';\n\nconst selectedToggle = '#595454';\nconst unselectedToggle = '#EAEAEA';\nconst unselectedToggleText = '#000';\nconst selectedToggleText = '#FFF';\n\nfunction Layout(svg, options, data, filter, updateTable, updateMap) {\n\n  // vaccine info\n  d3.select('#vaccine_tooltip').attr('opacity', 0).style('display', 'none');\n  d3.select('#vaccine_info path').attr('fill', colors.black);\n\n  svg.select('#vaccine_info').style('cursor', 'pointer')\n  .on('mouseover', function(event, bd){\n    d3.select('#svg_container').style('z-index', 10);\n    d3.select('#vaccine_tooltip').style('display', 'inline').transition().duration(500).attr('opacity', 1);\n    d3.select('#vaccine_info path').transition().duration(200).attr('fill', colors.blue);\n  }).on('mouseout', function(event, d){\n    d3.select('#svg_container').style('z-index', 1);\n    d3.select('#vaccine_tooltip').style('display', 'none').attr('opacity', 0);\n    d3.select('#vaccine_info path').transition().duration(500).attr('fill', colors.black);\n  })\n\n  // region chart toggle\n  svg.select('#region_remove_filter').attr('opacity', 0).style('cursor', 'pointer').on('click', function(d,i){\n    options.region_filter = []; \n    filter('clear-region');\n  });\n\n  svg.select('#region_switch').style('cursor', 'pointer').on('click', function(d,i){\n    if(options.region_switch=='total'){\n      options.region_switch = 'per100';\n      d3.select('#region_switch_toggle').transition().duration(200).attr('x', 15.1);\n    } else {\n      options.region_switch = 'total';\n      d3.select('#region_switch_toggle').transition().duration(200).attr('x', 3.1);\n    }\n    updateRegionchart(options,data);\n  })\n\n  svg.select('#region-chart-toggle #region-chart-toggle-cases').style('cursor', 'pointer').on('click', function(d){\n    if(options.region_chart_toggle === 'cases') return false;\n    options.region_chart_toggle = 'cases';\n    svg.selectAll('#region-chart-toggle rect').attr('fill', unselectedToggle);\n    svg.selectAll('#region-chart-toggle text').attr('fill', unselectedToggleText);\n    svg.select('#region-chart-toggle-cases rect').attr('fill', selectedToggle);\n    svg.select('#region-chart-toggle-cases text').attr('fill', selectedToggleText);\n    updateRegionchart(options,data);\n  });\n\n  svg.select('#region-chart-toggle #region-chart-toggle-deaths').style('cursor', 'pointer').on('click', function(d){\n    if(options.region_chart_toggle === 'deaths') return false;\n    options.region_chart_toggle = 'deaths';\n    svg.selectAll('#region-chart-toggle rect').attr('fill', unselectedToggle);\n    svg.selectAll('#region-chart-toggle text').attr('fill', unselectedToggleText);\n    svg.select('#region-chart-toggle-deaths rect').attr('fill', selectedToggle);\n    svg.select('#region-chart-toggle-deaths text').attr('fill', selectedToggleText);\n    updateRegionchart(options,data);\n  });\n\n  svg.select('#region-chart-toggle #region-chart-toggle-vaccines').style('cursor', 'pointer').on('click', function(d){\n    if(options.region_chart_toggle === 'vaccines') return false;\n    options.region_chart_toggle = 'vaccines';\n    svg.selectAll('#region-chart-toggle rect').attr('fill', unselectedToggle);\n    svg.selectAll('#region-chart-toggle text').attr('fill', unselectedToggleText);\n    svg.select('#region-chart-toggle-vaccines rect').attr('fill', selectedToggle);\n    svg.select('#region-chart-toggle-vaccines text').attr('fill', selectedToggleText);\n    updateRegionchart(options,data);\n  });\n\n  // map toggle\n  svg.select('#map-toggle #map-toggle-bi-weekly-change').style('cursor', 'pointer').on('click', function(d){\n    if(options.map_toggle === 'bi-weekly-change') return false;\n    options.map_toggle = 'bi-weekly-change';\n    svg.selectAll('#map-toggle rect').attr('fill', unselectedToggle);\n    svg.selectAll('#map-toggle text').attr('fill', unselectedToggleText);\n    svg.select('#map-toggle-bi-weekly-change rect').attr('fill', selectedToggle);\n    svg.select('#map-toggle-bi-weekly-change text').attr('fill', selectedToggleText);\n    // update map legend\n\n    updateMap(data, options, 700);\n  });\n\n  svg.select('#map-toggle #map-toggle-cases').style('cursor', 'pointer').on('click', function(d){\n    if(options.map_toggle === 'cases') return false;\n    options.map_toggle = 'cases';\n    svg.selectAll('#map-toggle rect').attr('fill', unselectedToggle);\n    svg.selectAll('#map-toggle text').attr('fill', unselectedToggleText);\n    svg.select('#map-toggle-cases rect').attr('fill', selectedToggle);\n    svg.select('#map-toggle-cases text').attr('fill', selectedToggleText);\n    // update map legend\n\n    updateMap(data, options, 700);\n  });\n\n  svg.select('#map-toggle #map-toggle-deaths').style('cursor', 'pointer').on('click', function(d){\n    if(options.map_toggle === 'deaths') return false;\n    options.map_toggle = 'deaths';\n    svg.selectAll('#map-toggle rect').attr('fill', unselectedToggle);\n    svg.selectAll('#map-toggle text').attr('fill', unselectedToggleText);\n    svg.select('#map-toggle-deaths rect').attr('fill', selectedToggle);\n    svg.select('#map-toggle-deaths text').attr('fill', selectedToggleText);\n    // update map legend\n\n    updateMap(data, options, 700);\n  });\n\n  svg.select('#map-toggle #map-toggle-percent-fully-vaccinated').style('cursor', 'pointer').on('click', function(d){\n    if(options.map_toggle === 'percent-fully-vaccinated') return false;\n    options.map_toggle = 'percent-fully-vaccinated';\n    svg.selectAll('#map-toggle rect').attr('fill', unselectedToggle);\n    svg.selectAll('#map-toggle text').attr('fill', unselectedToggleText);\n    svg.select('#map-toggle-percent-fully-vaccinated rect').attr('fill', selectedToggle);\n    svg.select('#map-toggle-percent-fully-vaccinated text').attr('fill', selectedToggleText);\n    // update map legend\n    updateMap(data, options, 700);\n  });\n\n  svg.select('#map-toggle #map-toggle-percent-vaccine-acceptance').style('cursor', 'pointer').on('click', function(d){\n    if(options.map_toggle === 'percent-vaccine-acceptance') return false;\n    options.map_toggle = 'percent-vaccine-acceptance';\n    svg.selectAll('#map-toggle rect').attr('fill', unselectedToggle);\n    svg.selectAll('#map-toggle text').attr('fill', unselectedToggleText);\n    svg.select('#map-toggle-percent-vaccine-acceptance rect').attr('fill', selectedToggle);\n    svg.select('#map-toggle-percent-vaccine-acceptance text').attr('fill', selectedToggleText);\n    // update map legend\n    updateMap(data, options, 700);\n  });\n\n    // time chart type \n    svg.select('#timechart-type-toggle #timechart-type-toggle-cumulative').style('cursor', 'pointer').on('click', function(d){\n      if(options.timeline_type === 'cumulative') return false;\n      options.timeline_type = 'cumulative';\n      svg.selectAll('#timechart-type-toggle rect').attr('fill', unselectedToggle);\n      svg.selectAll('#timechart-type-toggle polyline').attr('stroke', unselectedToggleText);\n      svg.select('#timechart-type-toggle-cumulative rect').attr('fill', selectedToggle);\n      svg.select('#timechart-type-toggle-cumulative polyline').attr('stroke', selectedToggleText);\n      svg.selectAll('#timechart-type-toggle-stacked polygon').attr('fill', selectedToggle);\n      updateTimechart(data, options);\n    });\n  \n    tippy('#timechart-type-toggle-cumulative', {\n      content: 'Cumulative',\n      duration: 0,\n      placement: 'bottom',\n      theme: 'light',\n      arrow: true,\n      delay: [500, 200],\n    });\n\n    svg.select('#timechart-type-toggle #timechart-type-toggle-non-cumulative').style('cursor', 'pointer').on('click', function(d){\n      if(options.timeline_type === 'non-cumulative') return false;\n      options.timeline_type = 'non-cumulative';\n      svg.selectAll('#timechart-type-toggle rect').attr('fill', unselectedToggle);\n      svg.selectAll('#timechart-type-toggle polyline').attr('stroke', unselectedToggleText);\n      svg.select('#timechart-type-toggle-non-cumulative rect').attr('fill', selectedToggle);\n      svg.select('#timechart-type-toggle-non-cumulative polyline').attr('stroke', selectedToggleText);\n      svg.selectAll('#timechart-type-toggle-stacked polygon').attr('fill', selectedToggle);\n      updateTimechart(data, options);\n    });\n\n    tippy('#timechart-type-toggle-non-cumulative', {\n      content: 'Non-cumulative',\n      duration: 0,\n      placement: 'bottom',\n      theme: 'light',\n      arrow: true,\n      delay: [500, 200],\n    });\n\n    svg.select('#timechart-type-toggle #timechart-type-toggle-stacked').style('cursor', 'pointer').on('click', function(d){\n      if(options.timeline_type === 'stacked') return false;\n      options.timeline_type = 'stacked';\n      svg.selectAll('#timechart-type-toggle rect').attr('fill', unselectedToggle);\n      svg.selectAll('#timechart-type-toggle polyline').attr('stroke', unselectedToggleText);\n      svg.select('#timechart-type-toggle-stacked rect').attr('fill', selectedToggle);\n      svg.select('#timechart-type-toggle-stacked polyline').attr('stroke', selectedToggleText);\n      svg.selectAll('#timechart-type-toggle-stacked polygon').attr('fill', selectedToggleText);\n      updateTimechart(data, options);\n    });\n\n    tippy('#timechart-type-toggle-stacked', {\n      content: 'Stacked 100%',\n      duration: 0,\n      placement: 'bottom',\n      theme: 'light',\n      arrow: true,\n      delay: [500, 200],\n    });\n\n  // time chart frequency toggle\n  svg.select('#timechart-frequency-toggle #timechart-frequency-toggle-day').style('cursor', 'pointer').on('click', function(d){\n    if(options.timeline_frequency === 'day') return false;\n    options.timeline_frequency = 'day';\n    svg.selectAll('#timechart-frequency-toggle rect').attr('fill', unselectedToggle);\n    svg.selectAll('#timechart-frequency-toggle text').attr('fill', unselectedToggleText);\n    svg.select('#timechart-frequency-toggle-day rect').attr('fill', selectedToggle);\n    svg.select('#timechart-frequency-toggle-day text').attr('fill', selectedToggleText);\n    svg.select('#tooltip_frequency tspan').attr('text-anchor', 'end').attr('dx', 20).text('DAY');\n    drawTimechart(data, options);\n  });\n\n  svg.select('#timechart-frequency-toggle #timechart-frequency-toggle-week').style('cursor', 'pointer').on('click', function(d){\n    if(options.timeline_frequency === 'week') return false;\n    options.timeline_frequency = 'week';\n    svg.selectAll('#timechart-frequency-toggle rect').attr('fill', unselectedToggle);\n    svg.selectAll('#timechart-frequency-toggle text').attr('fill', unselectedToggleText);\n    svg.select('#timechart-frequency-toggle-week rect').attr('fill', selectedToggle);\n    svg.select('#tooltip_frequency tspan').attr('text-anchor', 'end').attr('dx', 20).text('WEEK');\n    svg.select('#timechart-frequency-toggle-week text').attr('fill', selectedToggleText);\n    drawTimechart(data, options);\n  });\n\n  svg.select('#timechart-frequency-toggle #timechart-frequency-toggle-month').style('cursor', 'pointer').on('click', function(d){\n    if(options.timeline_frequency === 'month') return false;\n    options.timeline_frequency = 'month';\n    svg.selectAll('#timechart-frequency-toggle rect').attr('fill', unselectedToggle);\n    svg.selectAll('#timechart-frequency-toggle text').attr('fill', unselectedToggleText);\n    svg.select('#timechart-frequency-toggle-month rect').attr('fill', selectedToggle);\n    svg.select('#tooltip_frequency tspan').attr('text-anchor', 'end').attr('dx', 20).text('MONTH');\n    svg.select('#timechart-frequency-toggle-month text').attr('fill', selectedToggleText);\n    drawTimechart(data, options);\n  });\n\n    // HDI toggle\n\n    svg.select('#hdi_remove_filter').attr('opacity', 0).style('cursor', 'pointer').on('click', function(d,i){\n      d3.selectAll('#hdi-toggle-very-high, #hdi-toggle-high, #hdi-toggle-medium, #hdi-toggle-low').attr('opacity', 1);\n      filter('clear-hdi');\n    });\n\n    svg.select('#hdi-toggle #hdi-toggle-very-high').style('cursor', 'pointer').on('click', function(d){\n      toggle(options.hdi_filter, 'very-high');\n      if(options.hdi_filter.length === 4) { options.hdi_filter = []; d3.selectAll('#hdi-toggle-very-high, #hdi-toggle-high, #hdi-toggle-medium, #hdi-toggle-low').attr('opacity', 1); }\n      else if(options.hdi_filter.length === 0) { d3.selectAll('#hdi-toggle-very-high, #hdi-toggle-high, #hdi-toggle-medium, #hdi-toggle-low').attr('opacity', 1);}\n      else if(options.hdi_filter.length > 0) { d3.selectAll('#hdi-toggle-very-high, #hdi-toggle-high, #hdi-toggle-medium, #hdi-toggle-low').attr('opacity', 0.3);}\n      if(options.hdi_filter.length > 0){\n        options.hdi_filter.forEach(function(d,i){\n          d3.select('#hdi-toggle-'+d).attr('opacity', 1);\n        })\n      }\n      filter('hdi');\n    });\n\n    svg.select('#hdi-toggle #hdi-toggle-high').style('cursor', 'pointer').on('click', function(d){\n      toggle(options.hdi_filter, 'high');\n      if(options.hdi_filter.length === 4) { options.hdi_filter = []; d3.selectAll('#hdi-toggle-very-high, #hdi-toggle-high, #hdi-toggle-medium, #hdi-toggle-low').attr('opacity', 1); }\n      else if(options.hdi_filter.length === 0) { d3.selectAll('#hdi-toggle-very-high, #hdi-toggle-high, #hdi-toggle-medium, #hdi-toggle-low').attr('opacity', 1);}\n      else if(options.hdi_filter.length > 0) { d3.selectAll('#hdi-toggle-very-high, #hdi-toggle-high, #hdi-toggle-medium, #hdi-toggle-low').attr('opacity', 0.3);}\n      if(options.hdi_filter.length > 0){\n        options.hdi_filter.forEach(function(d,i){\n          d3.select('#hdi-toggle-'+d).attr('opacity', 1);\n        })\n      }\n      filter('hdi');\n    });\n    svg.select('#hdi-toggle #hdi-toggle-medium').style('cursor', 'pointer').on('click', function(d){\n      toggle(options.hdi_filter, 'medium');\n      if(options.hdi_filter.length === 4) { options.hdi_filter = []; d3.selectAll('#hdi-toggle-very-high, #hdi-toggle-high, #hdi-toggle-medium, #hdi-toggle-low').attr('opacity', 1); }\n      else if(options.hdi_filter.length === 0) { d3.selectAll('#hdi-toggle-very-high, #hdi-toggle-high, #hdi-toggle-medium, #hdi-toggle-low').attr('opacity', 1);}\n      else if(options.hdi_filter.length > 0) { d3.selectAll('#hdi-toggle-very-high, #hdi-toggle-high, #hdi-toggle-medium, #hdi-toggle-low').attr('opacity', 0.3);}\n      if(options.hdi_filter.length > 0){\n        options.hdi_filter.forEach(function(d,i){\n          d3.select('#hdi-toggle-'+d).attr('opacity', 1);\n        })\n      }\n      filter('hdi');\n    });\n    svg.select('#hdi-toggle #hdi-toggle-low').style('cursor', 'pointer').on('click', function(d){\n      toggle(options.hdi_filter, 'low');\n      if(options.hdi_filter.length === 4) { options.hdi_filter = []; d3.selectAll('#hdi-toggle-very-high, #hdi-toggle-high, #hdi-toggle-medium, #hdi-toggle-low').attr('opacity', 1);}\n      else if(options.hdi_filter.length === 0) { d3.selectAll('#hdi-toggle-very-high, #hdi-toggle-high, #hdi-toggle-medium, #hdi-toggle-low').attr('opacity', 1);}\n      else if(options.hdi_filter.length > 0) { d3.selectAll('#hdi-toggle-very-high, #hdi-toggle-high, #hdi-toggle-medium, #hdi-toggle-low').attr('opacity', 0.3);}\n      if(options.hdi_filter.length > 0){\n        options.hdi_filter.forEach(function(d,i){\n          d3.select('#hdi-toggle-'+d).attr('opacity', 1);\n        })\n      }\n      filter('hdi');\n    });\n\n    // inform severity toggle\n\n    svg.select('#inform_remove_filter').attr('opacity', 0).style('cursor', 'pointer').on('click', function(d,i){\n      d3.selectAll('#inform-toggle-very-high, #inform-toggle-high, #inform-toggle-medium, #inform-toggle-low, #inform-toggle-no-score').attr('opacity', 1);\n      filter('clear-inform');\n    });\n\n    svg.select('#inform-toggle #inform-toggle-no-score').style('cursor', 'pointer').on('click', function(d){\n      toggle(options.inform_filter, 'no-score');\n      if(options.inform_filter.length === 5) { options.inform_filter = []; d3.selectAll('#inform-toggle-very-high, #inform-toggle-high, #inform-toggle-medium, #inform-toggle-low, #inform-toggle-no-score').attr('opacity', 1);}\n      else if(options.inform_filter.length === 0) { d3.selectAll('#inform-toggle-very-high, #inform-toggle-high, #inform-toggle-medium, #inform-toggle-low, #inform-toggle-no-score').attr('opacity', 1);}\n      else if(options.inform_filter.length > 0) { d3.selectAll('#inform-toggle-very-high, #inform-toggle-high, #inform-toggle-medium, #inform-toggle-low, #inform-toggle-no-score').attr('opacity', 0.3);}\n      if(options.inform_filter.length > 0){\n        options.inform_filter.forEach(function(d,i){\n          d3.select('#inform-toggle-'+d).attr('opacity', 1);\n        })\n      }\n      filter('inform');\n    });\n\n    svg.select('#inform-toggle #inform-toggle-low').style('cursor', 'pointer').on('click', function(d){\n      toggle(options.inform_filter, 'low');\n      if(options.inform_filter.length === 5) { options.inform_filter = []; d3.selectAll('#inform-toggle-very-high, #inform-toggle-high, #inform-toggle-medium, #inform-toggle-low, #inform-toggle-no-score').attr('opacity', 1);}\n      else if(options.inform_filter.length === 0) { d3.selectAll('#inform-toggle-very-high, #inform-toggle-high, #inform-toggle-medium, #inform-toggle-low, #inform-toggle-no-score').attr('opacity', 1);}\n      else if(options.inform_filter.length > 0) { d3.selectAll('#inform-toggle-very-high, #inform-toggle-high, #inform-toggle-medium, #inform-toggle-low, #inform-toggle-no-score').attr('opacity', 0.3);}\n      if(options.inform_filter.length > 0){\n        options.inform_filter.forEach(function(d,i){\n          d3.select('#inform-toggle-'+d).attr('opacity', 1);\n        })\n      }\n      filter('inform');\n    });\n\n    svg.select('#inform-toggle #inform-toggle-medium').style('cursor', 'pointer').on('click', function(d){\n      toggle(options.inform_filter, 'medium');\n      if(options.inform_filter.length === 5) { options.inform_filter = []; d3.selectAll('#inform-toggle-very-high, #inform-toggle-high, #inform-toggle-medium, #inform-toggle-low, #inform-toggle-no-score').attr('opacity', 1);}\n      else if(options.inform_filter.length === 0) { d3.selectAll('#inform-toggle-very-high, #inform-toggle-high, #inform-toggle-medium, #inform-toggle-low, #inform-toggle-no-score').attr('opacity', 1);}\n      else if(options.inform_filter.length > 0) { d3.selectAll('#inform-toggle-very-high, #inform-toggle-high, #inform-toggle-medium, #inform-toggle-low, #inform-toggle-no-score').attr('opacity', 0.3);}\n      if(options.inform_filter.length > 0){\n        options.inform_filter.forEach(function(d,i){\n          d3.select('#inform-toggle-'+d).attr('opacity', 1);\n        })\n      }\n      filter('inform');\n    });\n\n    svg.select('#inform-toggle #inform-toggle-high').style('cursor', 'pointer').on('click', function(d){\n      toggle(options.inform_filter, 'high');\n      if(options.inform_filter.length === 5) { options.inform_filter = []; d3.selectAll('#inform-toggle-very-high, #inform-toggle-high, #inform-toggle-medium, #inform-toggle-low, #inform-toggle-no-score').attr('opacity', 1);}\n      else if(options.inform_filter.length === 0) { d3.selectAll('#inform-toggle-very-high, #inform-toggle-high, #inform-toggle-medium, #inform-toggle-low, #inform-toggle-no-score').attr('opacity', 1);}\n      else if(options.inform_filter.length > 0) { d3.selectAll('#inform-toggle-very-high, #inform-toggle-high, #inform-toggle-medium, #inform-toggle-low, #inform-toggle-no-score').attr('opacity', 0.3);}\n      if(options.inform_filter.length > 0){\n        options.inform_filter.forEach(function(d,i){\n          d3.select('#inform-toggle-'+d).attr('opacity', 1);\n        })\n      }\n      filter('inform');\n    });\n\n    svg.select('#inform-toggle #inform-toggle-very-high').style('cursor', 'pointer').on('click', function(d){\n      toggle(options.inform_filter, 'very-high');\n      if(options.inform_filter.length === 5) { options.inform_filter = []; d3.selectAll('#inform-toggle-very-high, #inform-toggle-high, #inform-toggle-medium, #inform-toggle-low, #inform-toggle-no-score').attr('opacity', 1);}\n      else if(options.inform_filter.length === 0) { d3.selectAll('#inform-toggle-very-high, #inform-toggle-high, #inform-toggle-medium, #inform-toggle-low, #inform-toggle-no-score').attr('opacity', 1);}\n      else if(options.inform_filter.length > 0) { d3.selectAll('#inform-toggle-very-high, #inform-toggle-high, #inform-toggle-medium, #inform-toggle-low, #inform-toggle-no-score').attr('opacity', 0.3);}\n      if(options.inform_filter.length > 0){\n        options.inform_filter.forEach(function(d,i){\n          d3.select('#inform-toggle-'+d).attr('opacity', 1);\n        })\n      }\n      filter('inform');\n    });\n  \n  // tabs\n\n  d3.select('#additional-indicators-tab').attr('opacity', 0).select('#additional-indicators-tab-content').attr('display', 'none');\n  d3.select('#vac-tab').attr('opacity', 1).select('#vac-tab-content').attr('display', 'inline');\n  d3.select('#bubblechart-tab').attr('opacity', 0).selectAll('#bubblechart, #bubblechart-tab-content').attr('display', 'none');\n  d3.select('#bubbleSelectContainer').style('display', 'none');\n\n  svg.select('#tabs #vaccination-tab').style('cursor', 'pointer').on('click', function(d){\n    if(options.tab_toggle === 'vaccination-data') return false;\n    options.tab_toggle = 'vaccination-data';\n    d3.select('#additional-indicators-tab').attr('opacity', 0).select('#additional-indicators-tab-content').attr('display', 'none');\n    d3.select('#vac-tab').attr('opacity', 1).select('#vac-tab-content').attr('display', 'inline');\n    d3.select('#bubblechart-tab').attr('opacity', 0).selectAll('#bubblechart, #bubblechart-tab-content').attr('display', 'none');\n    svg.selectAll('#tabs rect').attr('fill', unselectedToggle);\n    svg.selectAll('#tabs text').attr('fill', unselectedToggleText);\n    svg.select('#vaccination-tab rect').attr('fill', selectedToggle);\n    svg.select('#vaccination-tab text').attr('fill', selectedToggleText);\n    d3.select('#bubbleSelectContainer').style('display', 'none');\n\n  });\n\n  svg.select('#tabs #indicators-tab').style('cursor', 'pointer').on('click', function(d){\n    if(options.tab_toggle === 'indicators') return false;\n    options.tab_toggle = 'indicators';\n    d3.select('#additional-indicators-tab').attr('opacity', 1).select('#additional-indicators-tab-content').attr('display', 'inline');\n    d3.select('#vac-tab').attr('opacity', 0).select('#vac-tab-content').attr('display', 'none');\n    d3.select('#bubblechart-tab').attr('opacity', 0).selectAll('#bubblechart, #bubblechart-tab-content').attr('display', 'none');\n    svg.selectAll('#tabs rect').attr('fill', unselectedToggle);\n    svg.selectAll('#tabs text').attr('fill', unselectedToggleText);\n    svg.select('#indicators-tab rect').attr('fill', selectedToggle);\n    svg.select('#indicators-tab text').attr('fill', selectedToggleText);\n    d3.select('#bubbleSelectContainer').style('display', 'none');\n\n  });\n\n  svg.select('#tabs #bubble-chart-tab').style('cursor', 'pointer').on('click', function(d){\n    if(options.tab_toggle === 'bubble-chartt') return false;\n    options.tab_toggle = 'bubble-chart';\n    d3.select('#additional-indicators-tab').attr('opacity', 0).select('#additional-indicators-tab-content').attr('display', 'none');\n    d3.select('#vac-tab').attr('opacity', 0).select('#vac-tab-content').attr('display', 'none');\n    d3.select('#bubblechart-tab').attr('opacity', 1).selectAll('#bubblechart, #bubblechart-tab-content').attr('display', 'inline');\n    svg.selectAll('#tabs rect').attr('fill', unselectedToggle);\n    svg.selectAll('#tabs text').attr('fill', unselectedToggleText);\n    svg.select('#bubble-chart-tab rect').attr('fill', selectedToggle);\n    svg.select('#bubble-chart-tab text').attr('fill', selectedToggleText);\n    d3.select('#bubbleSelectContainer').style('display', 'inline-block');\n\n  });\n\n  // time chart mask\n    d3.select('#svg defs').append('clipPath').attr('id', 'mask')\n    .append('rect')\n    .attr('y', 340)\n    .attr('height', 590)\n    .attr('width', 660)\n    .attr('x', 22);\n\n  \n  // append timechart svg\n  const timechartContainer = svg.select('#timechart_container').attr('opacity', 0);\n  const tcSize = {\n    x: timechartContainer.attr('x'), y: timechartContainer.attr('y'), width: timechartContainer.attr('width'), height: timechartContainer.attr('height')\n  }\n\n  const timechartSvg = svg.append('svg').attr('id', 'timechart_svg').attr('viewBox', '0 0 '+2000 +' '+ tcSize.height)\n  .attr('preserveAspectRatio', \"none\")\n  .attr('x', tcSize.x)\n  .attr('y', tcSize.y)\n  .attr('width', tcSize.width)\n  .attr('height', tcSize.height)\n\n  const layer1 = timechartSvg\n  .append('g')\n  .attr('id', 'layer1')\n\n  const timechartBg = timechartSvg.append('g').attr('id', 'layer0');\n\n  layer1.append('rect')\n  .attr('x', 0)\n  .attr('y', 0)\n  .attr('width', '100%')\n  .attr('height', '100%')\n  .attr('opacity', 0)\n  .style('fill', 'transparent');\n  \n  // table bars\n\n  var tableRowHeight = 18;\n  var tableBarYOffset = 68;\n\n  for(let i = 0; i < 10; i++){\n\n    // row bg\n    var row = d3.select('#vac-tab').append('g').attr('class', 'row').attr('id', 'row'+i);\n\n    row.on('mouseover', function(d,i){\n      d3.selectAll('.rowbg').attr('fill', '#fff');\n      var textNodes = d3.select(this).selectAll('text').nodes();\n      if(textNodes.length>0) d3.select(this).select('.rowbg').attr('fill', '#FAFAFA');\n    }).on('mouseout', function(d,i){\n      d3.selectAll('.rowbg').attr('fill', '#fff');\n    });\n\n    row.append('rect')\n    .attr('class','rowbg')\n    .attr('x', 0)\n    .attr('y', function(){\n      return tableBarYOffset-2+(i*24.8);\n    })\n    .attr('height', tableRowHeight+4)\n    .attr('width', 622)\n    .attr('fill', colors.white)\n\n    // col 1 bg\n    row.append('rect')\n    .attr('class','col1bg colbg')\n    .attr('id','col1bg'+i)\n    .attr('x', 120)\n    .attr('y', function(){\n      return tableBarYOffset+(i*24.8);\n    })\n    .attr('height', tableRowHeight)\n    .attr('width', 68)\n    .attr('fill', colors.lightgrey)\n\n    // col 1 bar\n    row.append('rect')\n    .attr('class','col1bar')\n    .attr('id','col1bar'+i)\n    .attr('x', 120)\n    .attr('y', function(){\n      return tableBarYOffset+(i*24.8);\n    })\n    .attr('height', tableRowHeight)\n    .attr('width', 0)\n    .attr('fill', colors.blue);\n\n    // col 2 bg\n    row.append('rect')\n    .attr('class','col2bg colbg')\n    .attr('id','col2bg'+i)\n    .attr('x', 230)\n    .attr('y', function(){\n      return tableBarYOffset+(i*24.8);\n    })\n    .attr('height', tableRowHeight)\n    .attr('width', 68)\n    .attr('fill', colors.lightgrey)\n\n    // col 2 bar\n    row.append('rect')\n    .attr('class','col2bar')\n    .attr('id','col2bar'+i)\n    .attr('x', 230)\n    .attr('y', function(){\n      return tableBarYOffset+(i*24.8);\n    })\n    .attr('height', tableRowHeight)\n    .attr('width', 0)\n    .attr('fill', colors.blue);\n\n    // col 3 bg\n    row.append('rect')\n    .attr('class','col3bg colbg')\n    .attr('id','col3bg'+i)\n    .attr('x', 340)\n    .attr('y', function(){\n      return tableBarYOffset+(i*24.8);\n    })\n    .attr('height', tableRowHeight)\n    .attr('width', 68)\n    .attr('fill', colors.lightgrey)\n\n    // col 3 bar\n    row.append('rect')\n    .attr('class','col3bar')\n    .attr('id','col3bar'+i)\n    .attr('x', 340)\n    .attr('y', function(){\n      return tableBarYOffset+(i*24.8);\n    })\n    .attr('height', tableRowHeight)\n    .attr('width', 0)\n    .attr('fill', colors.blue);\n\n    // col 4 bg\n    row.append('rect')\n    .attr('class','col4bg colbg')\n    .attr('id','col4bg'+i)\n    .attr('x', 454)\n    .attr('y', function(){\n      return 67+(i*24.8);\n    })\n    .attr('height', tableRowHeight)\n    .attr('width', 68)\n    .attr('fill', colors.lightgrey)\n\n    // col 3 bar\n    row.append('rect')\n    .attr('class','col4bar')\n    .attr('id','col4bar'+i)\n    .attr('x', 454)\n    .attr('y', function(){\n      return 67+(i*24.8);\n    })\n    .attr('height', tableRowHeight)\n    .attr('width', 0)\n    .attr('fill', colors.blue);\n\n    for(var x = 0; x<6; x++){\n      d3.select('#col'+x+'_sort_desc').attr('opacity', 0);\n      d3.select('#col'+x+'_sort_asc').attr('opacity', 0);\n      d3.select('#col'+x+'_sort').style('cursor', 'pointer')\n      .on('click', function(){\n        var thisId = d3.select(this).attr('id');\n        if(options.table_sort==thisId){\n          if(options.table_sort_direction=='desc'){\n            options.table_sort_direction = 'asc';\n          } else {\n            options.table_sort_direction = 'desc';\n          }\n        } else {\n          options.table_sort = thisId;\n          options.table_sort_direction = 'desc';\n        }\n        options.page = 1;\n        updateTable(data, options);\n    })\n    // d3.select('#col1_sort_desc').attr('opacity', 1);\n    }\n  }\n\n  d3.select('#reset_locations').attr('display', 'none');\n\n  printCopySave();\n\n}\n\n// print copy save\n\nvar printing;\n\nfunction printCopySave(){\n\n  tippy('#button-png', {\n    content: 'Save as PNG',\n    duration: 0,\n    placement: 'bottom',\n    theme: 'light',\n    arrow: true,\n    delay: [500, 200],\n  });\n\n  tippy('#button-copy', {\n    content: 'Copy to clipboard',\n    duration: 0,\n    placement: 'bottom',\n    theme: 'light',\n    arrow: true,\n    delay: [500, 200],\n  });\n\n  tippy('#button-print', {\n    content: 'Print to PDF',\n    duration: 0,\n    placement: 'bottom',\n    theme: 'light',\n    arrow: true,\n    delay: [500, 200],\n  });\n\n  tippy('#button-expand', {\n    content: 'Open in new window',\n    duration: 0,\n    placement: 'bottom',\n    theme: 'light',\n    arrow: true,\n    delay: [500, 200],\n  });\n\n  d3.select('#button-print').on('click', function(){\n\n    if(printing) return false;\n    printing = true;\n\n    setTimeout(function(){\n      html2canvas(document.querySelector(\"#root\"),{\n            allowTaint: true,\n            onclone: function(doc){\n\n            },\n            useCORS: false,\n            foreignObjectRendering: true,\n            ignoreElements: function(element){\n              // if(element.id=='adm-toggle') return true;\n              // if($(element).hasClass('select2')) return true;\n            return false;\n            },\n            scale: 2,\n            x: 0,\n            y: 0,\n            scrollX: 0,\n            scrollY: 0,\n            logging: false\n        }).then(canvas => {\n          var img = canvas.toDataURL(\"image/png\");\n          var pdf = new jsPDF(\"l\", \"mm\", \"a4\");\n          var imgProps= pdf.getImageProperties(img);\n          var pdfWidth = pdf.internal.pageSize.getWidth();\n          var pdfHeight = (imgProps.height * pdfWidth) / imgProps.width;\n          pdf.addImage(img, 'JPEG', 10, 10, pdfWidth-20, pdfHeight-30);\n          pdf.save('deep-pdf-export.pdf');\n          printing = false;\n      },200);\n    });\n  });\n\n  d3.select('#button-png').on('click',function(){\n\n    if(printing) return false;\n    printing = true;\n\n    setTimeout(function(){\n      html2canvas(document.querySelector(\"#root\"),{\n            allowTaint: true,\n            onclone: function(doc){\n\n            },\n            useCORS: false,\n            foreignObjectRendering: true,\n            ignoreElements: function(element){\n              // if(element.id=='adm-toggle') return true;\n              // if($(element).hasClass('select2')) return true;\n            return false;\n            },\n            scale: 2,\n            x: 0,\n            y: 0,\n            scrollX: 0,\n            scrollY: 0,\n            logging: false\n        }).then(canvas => {\n\n      var img = canvas.toDataURL(\"image/png\").replace(\"image/png\", \"image/octet-stream\");\n      var link = document.createElement('a');\n      link.download = 'dashboard-export.png';\n      link.href = img;\n      link.click();\n      link.remove();\n\n      printing = false;\n      },200);\n    });\n  });\n\n  d3.select('#button-expand').on('click', function(){\n    window.open(window.location.href, \"_blank\");\n  });\n\n//   d3.select('#button-copy').on('click',function(){\n\n//     if(printing) return false;\n//     printing = true;\n\n//     setTimeout(function(){\n//       html2canvas(document.querySelector(\"#root\"),{\n//             allowTaint: true,\n//             onclone: function(doc){\n\n//             },\n//             useCORS: false,\n//             foreignObjectRendering: true,\n//             ignoreElements: function(element){\n//               // if(element.id=='adm-toggle') return true;\n//               // if($(element).hasClass('select2')) return true;\n//             return false;\n//             },\n//             scale: 1.8,\n//             windowWidth: 2800,\n//             windowHeight: 2000,\n//             logging: false\n//         }).then(canvas => {\n//           canvas.toBlob(blob, function(){\n//             navigator.clipboard.write([\n//               new ClipboardItem({\n//                 [blob.type]: blob\n//               })\n//             ]).then(() => {\n\n//             })\n//           })\n//         // copied to clipboard\n//         printing = false;\n//       });\n//       },200);\n//     });\n}\n\n\nexport default Layout;\n\nfunction toggle(collection, item) {\n  var idx = collection.indexOf(item);\n  if (idx !== -1) {\n    collection.splice(idx, 1);\n  } else {\n    collection.push(item);\n  }\n}\n\n/*\n\n#timechart-type-toggle #timechart-type-toggle-stacked\n#timechart-type-toggle #timechart-type-toggle-non-cumulative\n#timechart-type-toggle #timechart-type-toggle-cumulative\n\n#timechart-frequency-toggle #timechart-frequency-toggle-day\n#timechart-frequency-toggle #timechart-frequency-toggle-week\n#timechart-frequency-toggle #timechart-frequency-toggle-month\n\n#map-toggle #map-toggle-bi-weekly-change\n#map-toggle #map-toggle-deaths\n#map-toggle #map-toggle-percent-fully-vaccinated\n#map-toggle #map-toggle-percent-vaccine-acceptance\n#map-toggle #map-toggle-cases\n\n#tabs #bubble-chart-tab\n#tabs #indicators-tab\n#tabs #vaccination-tab\n\n#hdi-toggle #hdi-toggle-very-high\n#hdi-toggle #hdi-toggle-high\n#hdi-toggle #hdi-toggle-medium\n#hdi-toggle #hdi-toggle-low\n\n\n#inform-toggle #inform-toggle-no-score\n#inform-toggle #inform-toggle-low\n#inform-toggle #inform-toggle-medium\n#inform-toggle #inform-toggle-high\n#inform-toggle #inform-toggle-very-high\n\n*/","import * as d3 from \"d3\";\nimport moment from 'moment';\nimport colors from './colors';\nimport {addCommas, nFormatter} from './HelperFunctions';\nimport {filter} from './App';\n\nlet maxX =1000;\nlet maxY = 100;\nlet maxZ = 1000000;\nlet xScale; \nlet yScale; \nlet zScale; \nlet groupedData = [];\nlet width = 600;\nlet height = 233;\nlet x = 35;\nlet y = 58;\nlet bubbles;\n\nexport function drawBubblechart(data, options, filter) {\n\n    maxX = d3.max(data.country, function(d,i){\n        return parseFloat(d.gni_2017);\n    })\n\n    maxY = d3.max(data.country, function(d,i){\n        // if(options.bubble_chart_y_axis == 'percent-vaccinated-at-least-1-dose') return parseFloat(d.people_vaccinated_per_hundred);\n        if(options.bubble_chart_y_axis == 'percent-vaccinated-at-least-1-dose') return 100;\n        // if(options.bubble_chart_y_axis == 'percent-fully-vaccinated') return parseFloat(d.people_fully_vaccinated_per_hundred);\n        if(options.bubble_chart_y_axis == 'percent-fully-vaccinated') return 100;\n        if(options.bubble_chart_y_axis == 'percent-vaccine-acceptance') return 100;\n    });\n\n    maxZ = d3.max(data.country, function(d,i){\n        return parseFloat(d.population);\n    });\n\n    xScale = d3.scaleLinear()\n\t.range([0, width])\n\t.domain([0, maxX]).nice();\n\n    yScale = d3.scaleLinear()\n\t.range([height, 0])\n\t.domain([0, maxY]);\n\n    zScale = d3.scaleSqrt()\n    .domain([0, maxZ])\n    .range([1, 20]);\n\n    const svg = d3.select('#bubblechart-tab').append('g').attr('transform', 'translate('+x+', '+y+')')\n    .attr('id', 'bubblechart');\n\n    // create y-axis\n    svg.append(\"g\")\n    .attr('id', 'bubbley')\n    .call(d3.axisLeft(yScale).ticks(3).tickSize(3));\n\n    // create x-axis\n    svg.append(\"g\")\n    .attr('id', 'bubblex')\n    .attr('class', 'xAxis')\n    .attr(\"transform\", \"translate(0,\" + height + \")\")\n    .call(d3.axisBottom(xScale).ticks(4).tickSize(3));\n\n    // Add dots\n    bubbles = d3.select('#bubblechart').selectAll(\".bubble\")\n    .data(data.country)\n    .join(function(enter){\n        enter.append(\"circle\")\n        .attr(\"class\", function(d) { return \"bubble\" })\n        .attr(\"cx\", function (d) { return xScale(parseFloat(d.gni_2017)); } )\n        .attr(\"cy\", function (d) { \n            if(options.bubble_chart_y_axis == 'percent-vaccinated-at-least-1-dose') return yScale(parseFloat(d.people_vaccinated_per_hundred));\n            if(options.bubble_chart_y_axis == 'percent-fully-vaccinated') return yScale(parseFloat(d.people_fully_vaccinated_per_hundred));\n            if(options.bubble_chart_y_axis == 'percent-vaccine-acceptance') return yScale(parseFloat(d.vaccine_acceptance_percent));\n        })\n        .attr(\"r\", function (d) { return zScale(parseFloat(d.population)); } )\n        .style(\"fill\", function (d) { \n            if(options.bubble_chart_color_by == 'region') {\n               if(colors.regions[d.ifrc_region]) return colors.regions[d.ifrc_region];\n            } \n            if(options.bubble_chart_color_by == 'hdi') {\n                if(colors.hdi_category[d.hdi_category]) return colors.hdi_category[d.hdi_category];\n             }\n             if(options.bubble_chart_color_by == 'inform-severity') {\n                if(colors.inform_severity[d.inform_severity]) return colors.inform_severity[d.inform_severity];\n             }\n            return  'transparent';\n        })\n        .style(\"stroke\", function (d) { \n            // if(options.bubble_chart_color_by == 'region') {\n            //    if(colors.regions[d.ifrc_region]) return colors.regions[d.ifrc_region];\n            // } \n            // if(options.bubble_chart_color_by == 'hdi') {\n            //     if(colors.hdi_category[d.hdi_category]) return colors.hdi_category[d.hdi_category];\n            //  }\n            //  if(options.bubble_chart_color_by == 'inform-severity') {\n            //     if(colors.inform_severity[d.inform_severity]) return colors.inform_severity[d.inform_severity];\n            //  }\n            // return  'transparent';\n            return '#FFF';\n        })\n        .style(\"stroke-width\", 1)\n        // .style(\"fill-opacity\", 0.8)\n        .attr('display', function(d,i){\n            var val = 0;\n            if(options.bubble_chart_y_axis == 'percent-vaccinated-at-least-1-dose') val = yScale(parseFloat(d.people_vaccinated_per_hundred));\n            if(options.bubble_chart_y_axis == 'percent-fully-vaccinated') val = yScale(parseFloat(d.people_fully_vaccinated_per_hundred));\n            if(options.bubble_chart_y_axis == 'percent-vaccine-acceptance') val = yScale(parseFloat(d.vaccine_acceptance_percent));\n            if(isNaN(val))return 'none'\n            return 'inline';\n        })\n        .attr('opacity', function(d,i){\n            var val = 0;\n            if(options.bubble_chart_y_axis == 'percent-vaccinated-at-least-1-dose') val = yScale(parseFloat(d.people_vaccinated_per_hundred));\n            if(options.bubble_chart_y_axis == 'percent-fully-vaccinated') val = yScale(parseFloat(d.people_fully_vaccinated_per_hundred));\n            if(options.bubble_chart_y_axis == 'percent-vaccine-acceptance') val = yScale(parseFloat(d.vaccine_acceptance_percent));\n            if(isNaN(val))return 0;\n            return 1;\n        })\n    }, function(update){\n        update.transition().duration(800).attr(\"cx\", function (d) { return xScale(parseFloat(d.gni_2017)); } )\n        .attr(\"cy\", function (d) { \n            if(options.bubble_chart_y_axis == 'percent-vaccinated-at-least-1-dose') return yScale(parseFloat(d.people_vaccinated_per_hundred));\n            if(options.bubble_chart_y_axis == 'percent-fully-vaccinated') return yScale(parseFloat(d.people_fully_vaccinated_per_hundred));\n            if(options.bubble_chart_y_axis == 'percent-vaccine-acceptance') return yScale(parseFloat(d.vaccine_acceptance_percent));\n        })\n        .attr(\"r\", function (d) { return zScale(parseFloat(d.population)); } )\n        .style(\"fill\", function (d) { \n            if(options.bubble_chart_color_by == 'region') {\n               if(colors.regions[d.ifrc_region]) return colors.regions[d.ifrc_region];\n            } \n            if(options.bubble_chart_color_by == 'hdi') {\n                if(colors.hdi_category[d.hdi_category]) return colors.hdi_category[d.hdi_category];\n             }\n             if(options.bubble_chart_color_by == 'inform-severity') {\n                if(colors.inform_severity[d.inform_severity]) return colors.inform_severity[d.inform_severity];\n             }\n            return  'transparent';\n        })\n        .style(\"stroke\", function (d) { \n            // if(options.bubble_chart_color_by == 'region') {\n            //    if(colors.regions[d.ifrc_region]) return colors.regions[d.ifrc_region];\n            // } \n            // if(options.bubble_chart_color_by == 'hdi') {\n            //     if(colors.hdi_category[d.hdi_category]) return colors.hdi_category[d.hdi_category];\n            //  }\n            //  if(options.bubble_chart_color_by == 'inform-severity') {\n            //     if(colors.inform_severity[d.inform_severity]) return colors.inform_severity[d.inform_severity];\n            //  }\n            // return  'transparent';\n            return '#FFF';\n        }).attr('display', function(d,i){\n            var val = 0;\n            if(options.bubble_chart_y_axis == 'percent-vaccinated-at-least-1-dose') val = yScale(parseFloat(d.people_vaccinated_per_hundred));\n            if(options.bubble_chart_y_axis == 'percent-fully-vaccinated') val = yScale(parseFloat(d.people_fully_vaccinated_per_hundred));\n            if(options.bubble_chart_y_axis == 'percent-vaccine-acceptance') val = yScale(parseFloat(d.vaccine_acceptance_percent));\n            if(isNaN(val))return 'none'\n            return 'inline';\n        })\n        .attr('opacity', function(d,i){\n            var val = 0;\n            if(options.bubble_chart_y_axis == 'percent-vaccinated-at-least-1-dose') val = yScale(parseFloat(d.people_vaccinated_per_hundred));\n            if(options.bubble_chart_y_axis == 'percent-fully-vaccinated') val = yScale(parseFloat(d.people_fully_vaccinated_per_hundred));\n            if(options.bubble_chart_y_axis == 'percent-vaccine-acceptance') val = yScale(parseFloat(d.vaccine_acceptance_percent));\n            if(isNaN(val))return 0;\n            return 1;\n        })\n    },function(exit){\n        exit.remove();\n    });\n\n    d3.select('#bubblechart').selectAll(\".bubble\").on('mousemove', function(event, d){\n        d3.select('#bubbleSelectContainer').style('z-index', 1);\n        d3.select('#bubblechart_tooltip_title tspan').text(d.country_name);\n        if(options.bubble_chart_y_axis=='percent-vaccinated-at-least-1-dose'){\n            d3.select('#bubblechart_tooltip_label tspan').text('% vaccinated at least 1 dose');\n            d3.select('#bubblechart_tooltip_value tspan').text(parseFloat(d.people_vaccinated_per_hundred)+'%')\n            .attr(\"text-anchor\", \"end\").attr('dx', 37)\n        }\n        if(options.bubble_chart_y_axis=='percent-fully-vaccinated'){\n            d3.select('#bubblechart_tooltip_label tspan').text('% fully vaccinated');\n            d3.select('#bubblechart_tooltip_value tspan').text(parseFloat(d.people_fully_vaccinated_per_hundred)+'%')\n            .attr(\"text-anchor\", \"end\").attr('dx', 37)\n        }\n        if(options.bubble_chart_y_axis=='percent-vaccine-acceptance'){\n            d3.select('#bubblechart_tooltip_label tspan').text('% vaccine acceptance');\n            d3.select('#bubblechart_tooltip_value tspan').text(parseFloat((d.vaccine_acceptance_percent)).toFixed(2)+'%')\n            .attr(\"text-anchor\", \"end\").attr('dx', 37)\n        }\n        d3.select('#bubblechart_tooltip_gni tspan').text('$'+addCommas(Math.round(parseFloat(d.gni_2017)))).attr(\"text-anchor\", \"end\").attr('dx', 37)\n        d3.select('#bubblechart_tooltip_population tspan').text(nFormatter(Math.round(parseInt(d.population)))).attr(\"text-anchor\", \"end\").attr('dx', 37)\n\n        var coords = d3.pointer( event, (d3.select('#svg').node()));\n        if(coords[0]<1110){\n            d3.select('#bubblechart_tooltip').attr('transform', 'translate('+(coords[0]+20)+','+(coords[1]+y-90)+')').attr('display', 'inline');\n            d3.select('#bubblechart_tooltip_arrow_left').attr('display', 'inline');\n            d3.select('#bubblechart_tooltip_arrow_right').attr('display', 'none');\n        } else {\n            d3.select('#bubblechart_tooltip').attr('transform', 'translate('+(coords[0]-220)+','+(coords[1]+y-90)+')').attr('display', 'inline');\n            d3.select('#bubblechart_tooltip_arrow_left').attr('display', 'none');\n            d3.select('#bubblechart_tooltip_arrow_right').attr('display', 'inline');\n        }\n        d3.selectAll(\".bubble\").attr('opacity', 0.4);\n        d3.select(this).attr('opacity', 1).style('stroke-width', 2);\n    }).on('mouseout', function(event){\n        if(event.toElement=='tspan') return false;\n        d3.select('#bubbleSelectContainer').style('z-index', 2);\n\n        // mapTooltip.attr('display', 'none');\n        d3.select('#bubblechart_tooltip').attr('display', 'none');\n        d3.selectAll(\".bubble\").attr('opacity', 1).style('stroke-width', 1);\n    });\n\n    d3.select('#bubblechart_tooltip').attr('display', 'none');\n\n    d3.select('#bubble_y_axis_label').attr('text-anchor', 'middle').select('tspan').attr('dx', 50);\n    if(options.bubble_chart_y_axis=='percent-vaccinated-at-least-1-dose'){\n        d3.select('#bubble_y_axis_label tspan').text('% vaccinated at least 1 dose');\n    }\n    if(options.bubble_chart_y_axis=='percent-fully-vaccinated'){\n        d3.select('#bubble_y_axis_label tspan').text('% fully vaccinated');\n    }\n    if(options.bubble_chart_y_axis=='percent-vaccine-acceptance'){\n        d3.select('#bubble_y_axis_label tspan').text('% vaccine acceptance');\n    }\n\n\n}\n\nexport function updateBubblechart(data,options,filter) {\n    \n    maxX = d3.max(data.country, function(d,i){\n        return parseFloat(d.gni_2017);\n    })\n\n    maxY = d3.max(data.country, function(d,i){\n        if(options.bubble_chart_y_axis == 'percent-vaccinated-at-least-1-dose') return parseFloat(d.people_vaccinated_per_hundred);\n        if(options.bubble_chart_y_axis == 'percent-fully-vaccinated') return parseFloat(d.people_fully_vaccinated_per_hundred);\n        if(options.bubble_chart_y_axis == 'percent-vaccine-acceptance') return parseFloat(d.vaccine_acceptance_percent);\n    });\n\n    maxZ = d3.max(data.country, function(d,i){\n        return parseFloat(d.population);\n    });\n\n    xScale = d3.scaleLinear()\n\t.range([0, width])\n\t.domain([0, maxX]);\n\n    yScale = d3.scaleLinear()\n\t.range([height, 0])\n\t.domain([0, maxY]);\n\n    zScale = d3.scaleSqrt()\n    .domain([0, maxZ])\n    .range([1, 20]);\n\n    const svg = d3.select('#bubblechart');\n\n    // create y-axis\n    svg.select('#bubbley')\n    .transition().duration(800)\n    .call(d3.axisLeft(yScale).ticks(3));\n\n    // create x-axis\n    svg.select('#bubblex')\n    .transition().duration(800)\n    .call(d3.axisBottom(xScale).ticks(3));\n\n    bubbles = d3.select('#bubblechart').selectAll(\".bubble\")\n    .data(data.country)\n    .join(function(enter){\n        enter.append(\"circle\")\n        .attr(\"cx\", function (d) { return xScale(maxX)})\n        .attr(\"cy\", function (d) { return yScale(maxY)})\n        .attr(\"class\", function(d) { return \"bubble\" })\n        .transition().duration(800)\n        .attr(\"cx\", function (d) { return xScale(parseFloat(d.gni_2017)); } )\n        .attr(\"cy\", function (d) { \n            if(options.bubble_chart_y_axis == 'percent-vaccinated-at-least-1-dose') return yScale(parseFloat(d.people_vaccinated_per_hundred));\n            if(options.bubble_chart_y_axis == 'percent-fully-vaccinated') return yScale(parseFloat(d.people_fully_vaccinated_per_hundred));\n            if(options.bubble_chart_y_axis == 'percent-vaccine-acceptance') return yScale(parseFloat(d.vaccine_acceptance_percent));\n        })\n        .attr(\"r\", function (d) { return zScale(parseFloat(d.population)); } )\n        .style(\"fill\", function (d) { \n            if(options.bubble_chart_color_by == 'region') {\n               if(colors.regions[d.ifrc_region]) return colors.regions[d.ifrc_region];\n            } \n            if(options.bubble_chart_color_by == 'hdi') {\n                if(colors.hdi_category[d.hdi_category]) return colors.hdi_category[d.hdi_category];\n             }\n             if(options.bubble_chart_color_by == 'inform-severity') {\n                if(colors.inform_severity[d.inform_severity]) return colors.inform_severity[d.inform_severity];\n             }\n            return  'transparent';\n        })\n        .style(\"stroke\", function (d) { \n            // if(options.bubble_chart_color_by == 'region') {\n            //    if(colors.regions[d.ifrc_region]) return colors.regions[d.ifrc_region];\n            // } \n            // if(options.bubble_chart_color_by == 'hdi') {\n            //     if(colors.hdi_category[d.hdi_category]) return colors.hdi_category[d.hdi_category];\n            //  }\n            //  if(options.bubble_chart_color_by == 'inform-severity') {\n            //     if(colors.inform_severity[d.inform_severity]) return colors.inform_severity[d.inform_severity];\n            //  }\n            // return  'transparent';\n            return '#FFF';\n        })\n        .style(\"stroke-width\", 1)\n        // .style(\"fill-opacity\", 0.8)\n        .attr('display', function(d,i){\n            var val = 0;\n            if(options.bubble_chart_y_axis == 'percent-vaccinated-at-least-1-dose') val = yScale(parseFloat(d.people_vaccinated_per_hundred));\n            if(options.bubble_chart_y_axis == 'percent-fully-vaccinated') val = yScale(parseFloat(d.people_fully_vaccinated_per_hundred));\n            if(options.bubble_chart_y_axis == 'percent-vaccine-acceptance') val = yScale(parseFloat(d.vaccine_acceptance_percent));\n            if(isNaN(val))return 'none'\n            return 'inline';\n        })\n        .attr('opacity', function(d,i){\n            var val = 0;\n            if(options.bubble_chart_y_axis == 'percent-vaccinated-at-least-1-dose') val = yScale(parseFloat(d.people_vaccinated_per_hundred));\n            if(options.bubble_chart_y_axis == 'percent-fully-vaccinated') val = yScale(parseFloat(d.people_fully_vaccinated_per_hundred));\n            if(options.bubble_chart_y_axis == 'percent-vaccine-acceptance') val = yScale(parseFloat(d.vaccine_acceptance_percent));\n            if(isNaN(val))return 0;\n            return 1;\n        })\n    }, function(update){\n        update\n        .attr('display', function(d,i){\n            var val = 0;\n            if(options.bubble_chart_y_axis == 'percent-vaccinated-at-least-1-dose') val = yScale(parseFloat(d.people_vaccinated_per_hundred));\n            if(options.bubble_chart_y_axis == 'percent-fully-vaccinated') val = yScale(parseFloat(d.people_fully_vaccinated_per_hundred));\n            if(options.bubble_chart_y_axis == 'percent-vaccine-acceptance') val = yScale(parseFloat(d.vaccine_acceptance_percent));\n            if(isNaN(val))return 'none'\n            if(yScale.invert(val)==0) return 'none';\n            return 'inline';\n        }).attr('opacity', function(d,i){\n            var val = 0;\n            if(options.bubble_chart_y_axis == 'percent-vaccinated-at-least-1-dose') val = yScale(parseFloat(d.people_vaccinated_per_hundred));\n            if(options.bubble_chart_y_axis == 'percent-fully-vaccinated') val = yScale(parseFloat(d.people_fully_vaccinated_per_hundred));\n            if(options.bubble_chart_y_axis == 'percent-vaccine-acceptance') val = yScale(parseFloat(d.vaccine_acceptance_percent));\n            if(isNaN(val))return 0;\n            return 1;\n        })\n        .style(\"fill\", function (d) { \n            if(options.bubble_chart_color_by == 'region') {\n               if(colors.regions[d.ifrc_region]) return colors.regions[d.ifrc_region];\n            } \n            if(options.bubble_chart_color_by == 'hdi') {\n                if(colors.hdi_category[d.hdi_category]) return colors.hdi_category[d.hdi_category];\n             }\n             if(options.bubble_chart_color_by == 'inform-severity') {\n                if(colors.inform_severity[d.inform_severity]) return colors.inform_severity[d.inform_severity];\n             }\n            return  'transparent';\n        })\n        .transition().duration(800).attr(\"cx\", function (d) { return xScale(parseFloat(d.gni_2017)); } )\n        .attr(\"cy\", function (d) { \n            if(options.bubble_chart_y_axis == 'percent-vaccinated-at-least-1-dose') return yScale(parseFloat(d.people_vaccinated_per_hundred));\n            if(options.bubble_chart_y_axis == 'percent-fully-vaccinated') return yScale(parseFloat(d.people_fully_vaccinated_per_hundred));\n            if(options.bubble_chart_y_axis == 'percent-vaccine-acceptance') return yScale(parseFloat(d.vaccine_acceptance_percent));\n        })\n        .attr(\"r\", function (d) { return zScale(parseFloat(d.population)); } )\n        \n        \n    },function(exit){\n        exit.remove();\n    });\n\n    d3.select('#bubblechart').selectAll(\".bubble\").on('mousemove', function(event, d){\n        d3.select('#bubbleSelectContainer').style('z-index', 1);\n        d3.select('#bubblechart_tooltip_title tspan').text(d.country_name);\n        if(options.bubble_chart_y_axis=='percent-vaccinated-at-least-1-dose'){\n            d3.select('#bubblechart_tooltip_label tspan').text('% vaccinated at least 1 dose');\n            d3.select('#bubblechart_tooltip_value tspan').text(parseFloat(d.people_vaccinated_per_hundred)+'%')\n            .attr(\"text-anchor\", \"end\").attr('dx', 37)\n        }\n        if(options.bubble_chart_y_axis=='percent-fully-vaccinated'){\n            d3.select('#bubblechart_tooltip_label tspan').text('% fully vaccinated');\n            d3.select('#bubblechart_tooltip_value tspan').text(parseFloat(d.people_fully_vaccinated_per_hundred)+'%')\n            .attr(\"text-anchor\", \"end\").attr('dx', 37)\n        }\n        if(options.bubble_chart_y_axis=='percent-vaccine-acceptance'){\n            d3.select('#bubblechart_tooltip_label tspan').text('% vaccine acceptance');\n            d3.select('#bubblechart_tooltip_value tspan').text(parseFloat((d.vaccine_acceptance_percent)).toFixed(2)+'%')\n            .attr(\"text-anchor\", \"end\").attr('dx', 37)\n        }\n        d3.select('#bubblechart_tooltip_gni tspan').text('$'+addCommas(Math.round(parseFloat(d.gni_2017)))).attr(\"text-anchor\", \"end\").attr('dx', 37)\n        d3.select('#bubblechart_tooltip_population tspan').text(nFormatter(Math.round(parseInt(d.population)))).attr(\"text-anchor\", \"end\").attr('dx', 37)\n        var coords = d3.pointer( event, (d3.select('#svg').node()));\n        if(coords[0]<1110){\n            d3.select('#bubblechart_tooltip').attr('transform', 'translate('+(coords[0]+20)+','+(coords[1]+y-90)+')').attr('display', 'inline');\n            d3.select('#bubblechart_tooltip_arrow_left').attr('display', 'inline');\n            d3.select('#bubblechart_tooltip_arrow_right').attr('display', 'none');\n        } else {\n            d3.select('#bubblechart_tooltip').attr('transform', 'translate('+(coords[0]-220)+','+(coords[1]+y-90)+')').attr('display', 'inline');\n            d3.select('#bubblechart_tooltip_arrow_left').attr('display', 'none');\n            d3.select('#bubblechart_tooltip_arrow_right').attr('display', 'inline');\n        }\n        d3.selectAll(\".bubble\").attr('opacity', 0.4);\n        d3.select(this).attr('opacity', 1).style('stroke-width', 2);\n    }).on('mouseout', function(event){\n        if(event.toElement=='tspan') return false;\n        d3.select('#bubbleSelectContainer').style('z-index', 2);\n\n        // mapTooltip.attr('display', 'none');\n        d3.select('#bubblechart_tooltip').attr('display', 'none');\n        d3.selectAll(\".bubble\").attr('opacity', 1).style('stroke-width', 1);\n    });\n\n    if(options.bubble_chart_y_axis=='percent-vaccinated-at-least-1-dose'){\n        d3.select('#bubble_y_axis_label tspan').text('% vaccinated at least 1 dose');\n    }\n    if(options.bubble_chart_y_axis=='percent-fully-vaccinated'){\n        d3.select('#bubble_y_axis_label tspan').text('% fully vaccinated');\n    }\n    if(options.bubble_chart_y_axis=='percent-vaccine-acceptance'){\n        d3.select('#bubble_y_axis_label tspan').text('% vaccine acceptance');\n    }\n    \n    \n\n\n}\n\nexport default drawBubblechart;\n","// default options\nconst options = {\n    region_chart_toggle: 'cases', // cases, deaths, vaccines\n    region_switch: 'total', // total, per100\n    region_filter: [],\n    country_filter: [],\n    hdi_filter: [], // very-high, high, medium, low\n    inform_filter: [], // no-score, low, medium, high, very-high\n    timeline_type: 'non-cumulative', // cumulative, non-cumulative, stacked \n    timeline_frequency: 'week', // day, week, month\n    map_toggle: 'cases', // bi-weekly-change, cases, deaths, percent-fully-vaccinated, percent-vaccine-acceptance\n    tab_toggle: 'vaccination-data', // vaccination-data, indicators, bubble-chart\n    table_sort: 'col1_sort',\n    table_sort_direction: 'desc',\n    bubble_chart_color_by: 'hdi', // hdi, inform-severity, region\n    bubble_chart_y_axis: 'percent-vaccinated-at-least-1-dose', // percent-vaccinated-at-least-1-dose, percent-fully-vaccinated, percent-vaccine-acceptance\n    brushL: 0,\n    brushR: 600,\n    page: 1,\n    numPages: 1\n}\n\nexport default options;\n","import {min,max,group,flatGroup} from \"d3\";\nimport moment from 'moment';\nimport clone from 'just-clone';\nimport { data } from \"jquery\";\n\nexport function ParseData(data, options) {\n\n    //*********************\n    // create regions\n    //*********************\n    data.regions = [\n        {sort: 5, 'code': 'AF', cumulative_cases: 0, cumulative_deaths: 0, cumulative_vaccines: 0, population: 0},\n        {sort: 3, 'code': 'ME', cumulative_cases: 0, cumulative_deaths: 0, cumulative_vaccines: 0, population: 0},\n        {sort: 4, 'code': 'AP', cumulative_cases: 0, cumulative_deaths: 0, cumulative_vaccines: 0, population: 0},\n        {sort: 2, 'code': 'EU', cumulative_cases: 0, cumulative_deaths: 0, cumulative_vaccines: 0, population: 0},\n        {sort: 1, 'code': 'AM', cumulative_cases: 0, cumulative_deaths: 0, cumulative_vaccines: 0, population: 0},\n        {sort: 6, 'code': 'OTH', cumulative_cases: 0, cumulative_deaths: 0, cumulative_vaccines: 0, population: 0}\n    ]\n\n    data.regions.sort(function(a,b){\n        return (a.sort) - (b.sort);\n    });\n\n    //*********************\n    // clean up country data\n    //*********************\n    data.ns_involvement = [];\n    data.country = data.equity_data;\n    data.country.forEach(function(d,i){\n\n        // if not an IFRC region then set to OTH\n        if((d.ifrc_region!='AF')&&(d.ifrc_region!='ME')&&(d.ifrc_region!='AP')&&(d.ifrc_region!='EU')&&(d.ifrc_region!='AM')){\n            d.ifrc_region = 'OTH';\n        }\n        \n        // parse country population\n        d.population = parseInt(d.population)||0;\n        var pop = 0;\n        if(d.population>0) pop = d.population;\n\n        // sum up ifrc region population \n        data.regions.forEach(function(dd,ii){\n            if(dd.code==d.ifrc_region){\n                dd.population += pop\n            }\n        });\n\n        // get WHO vaccine data (vaccine types used, vaccines_per_100\n        d.vaccines_used = [];\n        d.avg_tests_per_1000 = parseFloat(d.avg_tests_per_1000)||0;\n        d.number_vaccine_types_used = 0;\n        d.vaccines_per_100 = 0;\n        d.number_vaccine_types_used = parseInt(d.avg_tests_per_1000);\n        data.vaccines_who_data.forEach(function(dd,ii){\n            if(d.country_iso3==dd.ISO3){\n                // d.data_updated = moment(dd.DATE_UPDATED).startOf('day').toDate();\n                d.number_vaccine_types_used = parseInt(dd.NUMBER_VACCINES_TYPES_USED);\n                d.vaccines_per_100 = parseFloat(dd.TOTAL_VACCINATIONS_PER100);\n                if(isNaN(d.vaccines_per_100))d.vaccines_per_100 = 0;\n                d.vaccines_used = dd.VACCINES_USED.split(',').map(function(item) {\n                    return item.trim();\n                  });\n            }\n        })\n\n        // get ns involvement in activities\n        d.ns_involvement = 0;\n        data.self_assessment.forEach(function(dd,ii){\n            if((d.country_iso3==dd.ISO3)&&(d.country_iso3!='')){\n                if(dd['Final involvement']=='Yes') {\n                    d.ns_involvement = 1;\n                    data.ns_involvement.push(d.country_iso3);\n                }\n            }\n        });\n\n        d.vaccine_acceptance_percent = 0;\n        // get vaccine acceptance\n        data.vaccine_acceptance.forEach(function(dd,ii){\n            if(d.country_iso3==dd.iso3){\n                // if(dd['Final involvement']=='Yes') d.ns_involvement = 1;\n                d.vaccine_acceptance_percent = parseFloat(dd.indicator_value)*100;\n                d.vaccine_acceptance_population = parseInt(dd.population_size);\n            }\n        })\n\n        // get contrat tracing\n        if((d.contract_tracing.toLowerCase()=='all')||(d.contract_tracing.toLowerCase()=='some')){\n            d.contract_tracing = 1;\n        } else {\n            d.contract_tracing = 0\n        }\n\n        // parse equity data inform/hdi indexes\n        if(d.hdi_category.match(/very high/i)){\n            d.hdi_category = 'very-high'\n        }\n        else if(d.hdi_category.match(/high/i)){\n            d.hdi_category = 'high'\n        }\n        else if(d.hdi_category.match(/medium/i)){\n            d.hdi_category = 'medium'\n        }\n        else if(d.hdi_category.match(/low/i)){\n            d.hdi_category = 'low'\n        }\n        if(d.inform_severity.match(/very high/i)){\n            d.inform_severity = 'very-high'\n        }\n        else if(d.inform_severity.match(/high/i)){\n            d.inform_severity = 'high'\n        }\n        else if(d.inform_severity.match(/medium/i)){\n            d.inform_severity = 'medium'\n        }\n        else if(d.inform_severity.match(/low/i)){\n            d.inform_severity = 'low'\n        }\n        else if(d.inform_severity.match(/no/i)){\n            d.inform_severity = 'no-score'\n        }\n\n    });\n\n    //*********************\n    // get min/max dates\n    //*********************\n\n    // get min and max dates from daily who data\n    let maxDate = moment(new Date(max(data.who_data, function(d){\n        return d.Date_reported;\n    }))).startOf('day');\n\n    // override min date to week start\n    data.min_date = moment('2019-12-31').startOf('day').toDate();\n\n    let maxDateVaccines = moment(new Date(max(data.vaccines_data, function(d){\n        return d.date;\n    }))).startOf('day');\n\n    data.min_vaccine_date = moment(new Date(min(data.vaccines_data, function(d){\n        return d.date;\n    }))).startOf('day').toDate();\n\n    data.max_vaccine_date = maxDateVaccines.toDate();\n\n    if(maxDateVaccines.unix()>maxDate.unix()) {\n        maxDate = maxDateVaccines;\n    }\n\n    data.max_date = maxDate.toDate();\n\n    //*********************\n    // parse who data\n    //*********************\n\n    data.who_data.forEach(function(d,i){\n        // parse dates\n        d.date = moment(d.Date_reported).startOf('day').toDate();\n        // override country name and code\n        d.country_code = d.Country_code;\n        d.country_name = null;\n        data.country.forEach(function(dd,ii){\n            if(dd.country_iso2===d.country_code){\n                d.ifrc_region = dd.ifrc_region;\n                d.country_name = dd.country_name;\n            }\n        })\n\n        // parse cases and deaths\n        d.cumulative_deaths = parseInt(d.Cumulative_deaths);\n        d.cumulative_cases = parseInt(d.Cumulative_cases);\n        d.new_cases = parseInt(d.New_cases);\n        d.new_deaths = parseInt(d.New_deaths);\n        \n    });\n\n    // sort by date\n    data.who_data.sort(function(a,b){\n        return new Date(a.date) - new Date(b.Date_reported);\n    });\n    \n    //*************************\n    // check for missing who dates and fill in the max date\n    //*************************\n\n    // group by country\n    var whoDataGrouped = flatGroup(data.who_data, d => d.country_code);\n\n    var datesToAdd = [];\n\n    whoDataGrouped.forEach(function(d,i){\n        \n        var maxDate = moment(max(d[1], d=>d.date)).startOf('day');\n        \n        var lastRecord = clone(d[1][d[1].length-1]);\n\n        if(maxDate.unix()!=data.max_date.getTime()){\n            lastRecord.date = new Date(data.max_date);\n            lastRecord.new_cases = 0;\n            lastRecord.new_deaths = 0;\n            datesToAdd.push(lastRecord);\n        }\n\n    })\n\n    data.who_data.push(...datesToAdd);\n\n    data.who_data.sort(function(a,b){\n        return new Date(a.date) - new Date(b.date);\n    });\n\n    // set count for incremental day/week/month numbers\n    let dayTotal = -1;\n    let dayCheck = 0;\n    let weekTotal = -1;\n    let weekCheck = -1;\n    let monthTotal = 0;\n    let monthCheck = 0;\n\n    // parse and clean up WHO data\n    let whoCountryCodes = [];\n    data.who_data.forEach(function(d,i){\n        // parse dates\n        // d.date = moment(d.Date_reported).startOf('day').toDate();\n        d.dayOfYear =  moment(d.date).dayOfYear();\n        if(d.dayOfYear!==dayCheck) dayTotal++;\n        d.dayTotal = dayTotal;\n        d.week = moment(d.date).isoWeek();\n        if(d.week!==weekCheck) weekTotal++;\n        d.weekTotal = weekTotal;\n        d.month = d.date.getMonth();\n        if(d.month!==monthCheck) monthTotal++;\n        d.monthTotal = monthTotal;\n        d.year = d.date.getFullYear();\n        d.week_start = new Date(moment(d.date).startOf('isoWeek').startOf('day').toDate());\n        d.month_start = new Date(moment(d.date).startOf('month').startOf('day').toDate());\n\n        // set negative values to zero for new cases/deaths\n        if(d.new_deaths<0)d.new_deaths = 0;\n        if(d.new_cases<0)d.new_cases = 0;\n\n        if(d.ifrc_region==undefined) d.ifrc_region = 'OTH';\n\n        // add country code to array so we know it is used\n        if((!whoCountryCodes.includes(d.country_code))&&(d.country_code.length>1)) {\n            whoCountryCodes.push(d.country_code);\n        }\n\n        // delete old unused keys\n        delete d.Date_reported;\n        delete d.Country;\n        delete d.New_cases;\n        delete d.New_deaths;\n        delete d.Country_code;\n        delete d.Cumulative_deaths;\n        delete d.Cumulative_cases;\n        delete d.Country_code;\n        delete d.WHO_region;\n        delete d.Country;\n        \n        // set incremental count\n        dayCheck = d.dayOfYear;\n        weekCheck = d.week;\n        monthCheck = d.month;\n    })\n   \n    //*********************\n    // parse vaccine cumulative data\n    //*********************\n\n    // clean up values\n    data.vaccines_data.forEach(function(d,i){\n        d.date = moment(d.date).startOf('day').toDate();\n    });\n    \n    data.vaccines_data.sort(function(a,b){\n        return new Date(a.date) - new Date(b.date);\n    });\n\n    // filter out vaccine data to only include records with ISO3 country codes\n    data.vaccines_data = data.vaccines_data.filter(function(d,i){\n        return d.iso_code.length===3 && d.total_vaccinations > 0;\n    })\n\n    var vaccineDataByCountry = flatGroup(data.vaccines_data, d => d.iso_code);\n\n    // fill out missing vaccinations date records (extend cumulative from last data date)\n    var newDays = [];\n    var hasDays = [];\n    var lastRecord = {};\n    var vDataFlat = [];\n\n    vaccineDataByCountry.forEach(function(d,i){\n\n        var minDt = new Date(data.min_date);\n        var maxDt = new Date(data.max_date);\n\n        hasDays = [];\n        newDays = [];\n\n        // set the last recorded date fo this country\n        d.lastDate = moment(max(d[1], function(d,i){ return d.date })).startOf('day').toDate();\n        \n        // reset country name and code using country table\n        data.country.forEach(function(dd,ii){\n            if(dd.country_iso3===d[0]){\n                d.ifrc_region = dd.ifrc_region;\n                d.country_name = dd.country_name;\n                d.country_code = dd.country_iso2;\n                dd.data_updated = d.lastDate;\n\n            }\n        })\n\n        // loop through all date records for this country and add to hasDays array\n        d[1].forEach(function(dd,ii){\n            dd.total_vaccinations = parseInt(dd.total_vaccinations);\n            dd.daily_vaccinations = parseInt(dd.daily_vaccinations);\n            hasDays.push(new Date(dd.date).getTime());\n        })\n\n        // fill in missing dates\n        // d[1].forEach(function(dd,ii){\n            for (var day = new Date(data.min_vaccine_date);day <= data.max_date; day.setDate(day.getDate() + 1)) {\n                var newDay = new Date(day).getTime();\n                if(!hasDays.includes(newDay)){\n                    newDays.push({date: new Date(day), total_vaccinations: null, daily_vaccinations: 0})\n                }\n            }\n        // });\n\n        d[1].push(...newDays);\n        d[1].sort(function(a,b){\n            return new Date(a.date) - new Date(b.date);\n        });\n\n        // loop through dates and fill in missing cumulative values\n        var totalVac = 0;\n        var totalVac100 = 0;\n        var people_vaccinated_per_hundred = 0;\n        var people_fully_vaccinated_per_hundred = 0;\n        d[1].forEach(function(dd,ii){\n            if(dd.total_vaccinations){\n                totalVac = dd.total_vaccinations;\n            } else {\n                dd.total_vaccinations = totalVac;\n            }\n            if(dd.total_vaccinations_per_hundred){\n                totalVac100 = dd.total_vaccinations_per_hundred\n            } else {\n                dd.total_vaccinations_per_hundred = totalVac100;\n            }\n            if(dd.people_vaccinated_per_hundred){\n                people_vaccinated_per_hundred = dd.people_vaccinated_per_hundred;\n            } else {\n                dd.people_vaccinated_per_hundred = people_vaccinated_per_hundred;\n            }\n            if(dd.people_fully_vaccinated_per_hundred){\n                people_fully_vaccinated_per_hundred = dd.people_fully_vaccinated_per_hundred;\n            } else {\n                dd.people_fully_vaccinated_per_hundred = people_fully_vaccinated_per_hundred;\n            }\n\n            var countryName;\n            if(d.country_name==null) { countryName = d[0];\n            } else {\n                countryName = d.country_name\n            }\n            var dailyVac = 0;\n            if((dd.daily_vaccinations)&&(dd.daily_vaccinations>0)) dailyVac = dd.daily_vaccinations;\n\n            vDataFlat.push({\n                date: new Date(dd.date),\n                lastDate: d.lastDate,\n                total_vaccinations_per_hundred: parseFloat(totalVac100),\n                people_vaccinated_per_hundred: parseFloat(people_vaccinated_per_hundred),\n                people_fully_vaccinated_per_hundred: parseFloat(people_fully_vaccinated_per_hundred),\n                iso_code: d[0], \n                ifrc_region: d.ifrc_region,\n                country_name: countryName,\n                country_code: d.country_code, \n                total_vaccinations: totalVac,\n                daily_vaccinations: dailyVac\n            })\n        })\n    });\n\n    data.vaccines_data = vDataFlat;\n\n    data.vaccines_data.sort(function(a,b){\n        return new Date(a.date) - new Date(b.date);\n    });\n\n    // reset count for incremental day/week/month numbers\n    dayTotal = -1;\n    dayCheck = 0;\n    weekTotal = -1;\n    weekCheck = -1;\n    monthTotal = 0;\n    monthCheck = 0;\n    \n    data.vaccines_data.forEach(function(d,i){\n        if(d.ifrc_region==undefined) d.ifrc_region = 'OTH';\n        d.dayOfYear =  moment(d.date).dayOfYear();\n        if(d.dayOfYear!==dayCheck) dayTotal++;\n        d.dayTotal = dayTotal;\n        d.week = moment(d.date).isoWeek();\n        if(d.week!==weekCheck) weekTotal++;\n        d.weekTotal = weekTotal;\n        d.month = d.date.getMonth();\n        if(d.month!==monthCheck) monthTotal++;\n        d.monthTotal = monthTotal;\n        d.year = d.date.getFullYear();\n        dayCheck = d.dayOfYear;\n        weekCheck = d.week;\n        monthCheck = d.month;\n        d.week_start = new Date(moment(d.date).startOf('isoWeek').toDate());\n        d.month_start = new Date(moment(d.date).startOf('month').toDate());\n    })\n\n    //*********************\n    // add most recent owid vaccine data record to data.country\n    //*********************\n\n    // group who data by country\n    var vaccineDataByCountry = flatGroup(data.vaccines_data, d => d.country_code);\n\n    //*********************\n    // add most recent records from both datasets to data.country\n    //*********************\n\n    // first group who data by country\n    var whoDataByCountry = flatGroup(data.who_data, d => d.country_code);\n\n    data.country.forEach(function(d,i){\n        d.cumulative_cases_per_100k = 0;\n        d.cumulative_deaths_per_100k = 0;\n        d.cumulative_vaccines_per_100k = 0;\n        d.people_fully_vaccinated_per_hundred = 0;\n        d.people_vaccinated_per_hundred = 0;\n        d.total_vaccinations_per_hundred = 0;\n        var countryCode = d.country_iso2;\n\n        // calculate latest date and at weekly intervals (for bi-weekly percent change calculation)\n        whoDataByCountry.forEach(function(dd,ii){\n            if(dd[0]==countryCode){\n                d.who_daily_latest = dd[1][dd[1].length-1];\n                d.who_daily_7_days = dd[1][dd[1].length-8];\n                d.who_daily_14_days = dd[1][dd[1].length-15];\n                d.who_daily_21_days = dd[1][dd[1].length-22];\n                d.who_daily_28_days = dd[1][dd[1].length-29];\n                d.cumulative_cases_per_100k = (d.who_daily_latest.cumulative_cases/(d.population/100000));\n                d.cumulative_deaths_per_100k = (d.who_daily_latest.cumulative_deaths/(d.population/100000));\n                d.cumulative_cases = d.who_daily_latest.cumulative_cases;\n                d.cumulative_deaths = d.who_daily_latest.cumulative_deaths;\n                d.cumulative_deaths_7_days = d.who_daily_7_days.cumulative_deaths;\n                d.cumulative_deaths_14_days = d.who_daily_14_days.cumulative_deaths;\n                d.cumulative_deaths_21_days = d.who_daily_21_days.cumulative_deaths;\n                d.cumulative_deaths_28_days = d.who_daily_28_days.cumulative_deaths;\n                d.cumulative_cases_7_days = d.who_daily_7_days.cumulative_cases;\n                d.cumulative_cases_14_days = d.who_daily_14_days.cumulative_cases;\n                d.cumulative_cases_21_days = d.who_daily_21_days.cumulative_cases;\n                d.cumulative_cases_28_days = d.who_daily_28_days.cumulative_cases;\n                var percentChange = parseFloat(((d.cumulative_cases - d.cumulative_cases_14_days)-(d.cumulative_cases_14_days-d.cumulative_cases_28_days))/(d.cumulative_cases_14_days-d.cumulative_cases_28_days));\n                if(isFinite(percentChange)) { d.percent_change = percentChange; } else { d.percent_change = 0 }\n            }\n        })\n\n        vaccineDataByCountry.forEach(function(dd,ii){\n            if(dd[0]==countryCode){\n                if(typeof(dd[0]!='undefined')){\n                    d.vaccine_daily_latest = dd[1][dd[1].length-1];\n                    d.cumulative_vaccines_per_100k = (d.vaccine_daily_latest.total_vaccinations/(d.population/100000));\n                    d.people_fully_vaccinated_per_hundred = d.vaccine_daily_latest.people_fully_vaccinated_per_hundred;\n                    d.people_vaccinated_per_hundred = d.vaccine_daily_latest.people_vaccinated_per_hundred;\n                    d.total_vaccinations_per_hundred = d.vaccine_daily_latest.total_vaccinations_per_hundred;\n                    d.total_vaccinations = d.vaccine_daily_latest.total_vaccinations;\n                }\n            }\n        })\n\n        if(!isFinite(d.cumulative_cases_per_100k))d.cumulative_cases_per_100k = 0;\n        if(!isFinite(d.cumulative_deaths_per_100k))d.cumulative_deaths_per_100k = 0;\n        if(!isFinite(d.cumulative_vaccines_per_100k))d.cumulative_vaccines_per_100k = 0;\n        d.country_code = d.country_iso2;\n\n    })\n\n    data.original = clone(data);\n\n}\n\nexport default ParseData;\n","import * as d3 from \"d3\";\nimport moment from 'moment';\nimport colors from './colors';\nimport {filter} from './App';\nimport mapboxgl from '!mapbox-gl'; // eslint-disable-line import/no-webpack-loader-syntax\nimport 'mapbox-gl/dist/mapbox-gl.css';\nimport {addCommas} from './HelperFunctions';\n\nmapboxgl.accessToken = 'pk.eyJ1IjoiZ28taWZyYyIsImEiOiJjams3b2ZhZWswMGFvM3hxeHp2ZHFhOTRrIn0._pqO9OQ2iNeDGrpopJNjpg';\nvar mapboxStyle = 'mapbox://styles/go-ifrc/ckqrsg27f1cwu17pex8w2de2e';\n\nlet map;\nlet dots; \nlet maxSize = 15; \nlet mapTooltip;\n\nexport function createMap(data, options, filter) {\n\n    d3.select('#map-refresh').attr('display', 'none').style('cursor', 'pointer')\n    .on('click', function(d,i){\n        map.setCenter([8, 22]);\n        map.setZoom(0);\n        d3.select('#map-refresh').attr('display', 'none');\n    })\n    \n    map = new mapboxgl.Map({\n        container: 'map_div', // container ID\n        style: mapboxStyle, // style URL\n        center: [8, 22], // starting position [lng, lat]\n        preserveDrawingBuffer: true,\n        zoom: 0 // starting zoom\n    });\n\n    map.setRenderWorldCopies(false);\n    map.addControl(new mapboxgl.NavigationControl());\n    \n    // disable map zoom when using scroll\n    map.scrollZoom.disable();\n\n    map.on('zoom', function() {\n        d3.select('#map_tooltip').attr('display', 'none');\n        d3.select('#map-refresh').attr('display', 'inline');\n    });\n\n    map.on('touchmove', function() {\n        d3.select('#map_tooltip').attr('display', 'none');\n        d3.select('#map-refresh').attr('display', 'inline');\n    });\n\n    map.on('wheel', function() {\n        d3.select('#map_tooltip').attr('display', 'none');\n        d3.select('#map-refresh').attr('display', 'inline');\n    });\n\n    map.on('drag', function() {\n        d3.select('#map_tooltip').attr('display', 'none');\n        d3.select('#map-refresh').attr('display', 'inline');\n    });\n\n    var container = map.getCanvasContainer();\n\n    var svg = d3\n    .select(container)\n    .append(\"svg\")\n    .attr('id', 'mapoverlay')\n    .attr(\"width\", \"100%\")\n    .attr(\"height\", \"24vw\")\n    .style(\"position\", \"absolute\")\n    .style(\"z-index\", 2);\n\n    mapTooltip = d3.select('#map_tooltip').attr('opacity', 1).attr('transform', 'translate(0,0)').attr('display', 'inline');\n\n    // dots = svg\n    // .selectAll(\".country-map\")\n    // .data(data.world)\n    // .enter()\n    // .append(\"circle\")\n    // .attr('class', 'country-map')\n    // .attr('id', function(d,i){ return 'country-map-'+d.iso2 })\n    // .attr(\"r\", 0)\n    \n\n    // var maxValue = d3.max(data.country, function(d,i){\n    //     return d[1].cumulative_cases;\n    // })\n\n    // var rScale = d3.scalePow().exponent(0.5)\n    //   .domain([0, maxValue])\n    //   .range([0, 15]);\n\n    // data.country.forEach(function(d,i){\n    //     d3.select('#country-'+d[0]).attr('r', rScale(d[1].cumulative_cases))\n    //     .attr('data-name', d[1].country)\n    // })\n    \n    d3.select(\"#map_div\").append('svg')\n    .attr('width', '18vw')\n    .attr('height', '1.5vw')\n    .attr('id', 'maplegend')\n    .attr('viewBox', '-3 0 227 18')\n    .style('background-color', 'rgba(255,255,255,0.8)')\n\n    document.getElementById(\"maplegend\").appendChild(d3.select('#red_legend').node());\n    document.getElementById(\"maplegend\").appendChild(d3.select('#blue_legend').node());\n    document.getElementById(\"maplegend\").appendChild(d3.select('#bi_legend').node());\n\n    d3.select('#red_legend').attr('transform', 'translate(20,0)');\n    d3.select('#blue_legend').attr('transform', 'translate(20,0)');\n    d3.select('#bi_legend').attr('transform', 'translate(0,0)');\n\n    d3.select('#bi_legend').attr('display', 'none');\n    d3.select('#blue_legend').attr('display', 'none');\n\n    document.getElementById(\"mapoverlay\").appendChild(d3.select('#map_tooltip').node());\n    mapTooltip.attr('display', 'none')  \n\n    map.on('load', function (e) {\n\n        map.setPaintProperty('countries', 'fill-opacity-transition', {duration: 0, delay: 0});\n\n        updateMap(data, options) ;\n\n    });\n\n}\n\nexport function updateMap(data, options) {\n   \n    var duration = 800;\n    var delay = 10;\n\n    map.setLayoutProperty(\n        'countries',\n        'visibility',\n        'none'\n    );\n\n    if(options.map_toggle == 'bi-weekly-change'){\n        \n        var maxIncrease = d3.max(data.country, function(d,i){\n            return d.percent_change;\n        })\n\n        var maxDecrease = d3.min(data.country, function(d,i){\n            return d.percent_change;\n        })\n\n        d3.select('#bi_legend').attr('display', 'inline');\n        d3.select('#blue_legend').attr('display', 'none');\n        d3.select('#red_legend').attr('display', 'none');\n\n        maxIncrease = (Math.ceil(maxIncrease/0.1))*0.1;\n        maxDecrease = (Math.floor(maxDecrease/0.1))*0.1;\n\n        if(maxIncrease>1) maxIncrease = 1;\n        if(maxDecrease<-1) maxDecrease = -1;\n\n        d3.select('#bi_legend_dec_val').attr('text-anchor', 'end');\n        if(maxIncrease<1){\n            d3.select('#bi_legend_inc_val tspan').text(Math.round(maxIncrease*100)+'%');\n        } else {\n            d3.select('#bi_legend_inc_val tspan').text(Math.round(maxIncrease*100)+'% +');\n        }\n        if(maxDecrease>-1){\n            d3.select('#bi_legend_dec_val tspan').text(Math.round(Math.abs(maxDecrease)*100)+'%').attr('dx', 14);\n        } else {\n            d3.select('#bi_legend_dec_val tspan').text(Math.round(Math.abs(maxDecrease)*100)+'% +').attr('dx', 14);\n        }\n\n        // var rScale = d3.scalePow().exponent(0.5)\n        // .domain([-1, 0, 1])\n        // .range([maxSize, 0, maxSize])\n        // .clamp(true);\n\n        // d3.selectAll('.country-map').transition('c').duration(duration/1.7).attr('r',0);\n\n        // data.country.forEach(function(d,i){\n        //     d3.select('#country-map-'+d[0])\n        //     .transition('c').duration(duration).delay(delay)\n        //     .attr('r', rScale(d[1].percent_change))\n        //     .style('stroke', function(){\n        //         // if(d[1].percent_change>1){ return '#E02225'} else { return '#1F558C'}\n        //         return '#FFF'\n        //     }).style('fill', function(){\n        //         if(d[1].percent_change>0){ return colors.red } else { return colors.blue}\n        //     })\n        // })\n\n        var colorScale = d3.scaleLinear()\n        .domain([-1, 0, 1])\n        // .domain([maxDecrease, 0, maxIncrease])\n        .range([colors.blue, colors.lightgrey, colors.red])\n        .clamp(true);\n\n        var fillColorArray = ['case']\n        data.country.forEach(function(d,i){\n            if(isFinite(d.percent_change)){\n                fillColorArray.push(['==', ['get', \"iso\"], d.country_code]);\n                fillColorArray.push(colorScale(d.percent_change));\n            }\n        });\n\n        if(fillColorArray.length>1){\n            fillColorArray.push(colors.darkgrey)\n            map.setPaintProperty(\n                'countries', \n                'fill-color', fillColorArray\n            );\n        }\n        \n    }\n\n    if(options.map_toggle == 'cases'){\n\n        var maxValue = d3.max(data.country, function(d,i){\n            return d.cumulative_cases_per_100k;\n        });\n\n        d3.select('#bi_legend').attr('display', 'none');\n        d3.select('#blue_legend').attr('display', 'none');\n        d3.select('#red_legend').attr('display', 'inline');\n\n        d3.select('#red_legend_title tspan').text('Cases per 100k');\n\n        if(maxValue>1000){\n            maxValue = (Math.ceil(maxValue/100))*100;\n        } else {\n            maxValue = (Math.ceil(maxValue/10))*10;\n        }\n\n        d3.select('#red_legend_val tspan').text(addCommas(maxValue));\n\n        // var rScale = d3.scalePow().exponent(0.5)\n        // .domain([0, maxValue])\n        // .range([0, maxSize]);\n\n        // d3.selectAll('.country-map').transition('c').duration(duration/1.7).attr('r',0);\n\n        // data.country.forEach(function(d,i){\n        //     d3.select('#country-map-'+d[0])\n        //     .transition('c').duration(duration).delay(delay)\n        //     .attr('r', rScale(d[1].cumulative_cases))\n        //     .style('fill', colors.red)\n        //     .style('stroke', '#FFF');\n        // })\n\n        var colorScale = d3.scaleLinear()\n        .domain([0, maxValue])\n        .range([colors.lightred, colors.red]);\n\n        var fillColorArray = ['case']\n        data.country.forEach(function(d,i){\n            fillColorArray.push(['==', ['get', \"iso\"], d.country_code]);\n            fillColorArray.push(colorScale(d.cumulative_cases_per_100k));\n        });\n\n        if(fillColorArray.length>1){\n            fillColorArray.push(colors.darkgrey)\n            map.setPaintProperty(\n                'countries', \n                'fill-color', fillColorArray\n            );\n        }\n\n    }\n    \n    if(options.map_toggle == 'deaths'){\n\n        var maxValue = d3.max(data.country, function(d,i){\n            return d.cumulative_deaths_per_100k;\n        })\n\n        d3.select('#bi_legend').attr('display', 'none');\n        d3.select('#blue_legend').attr('display', 'none');\n        d3.select('#red_legend').attr('display', 'inline');\n\n        d3.select('#red_legend_title tspan').text('Deaths per 100k');\n\n        if(maxValue>1000){\n            maxValue = (Math.ceil(maxValue/100))*100;\n        } else {\n            maxValue = (Math.ceil(maxValue/10))*10;\n        }\n\n        d3.select('#red_legend_val tspan').text(addCommas(maxValue));\n\n        // var rScale = d3.scalePow().exponent(0.5)\n        // .domain([0, maxValue])\n        // .range([0, maxSize]);\n\n        // d3.selectAll('.country-map').transition('c').duration(duration/1.7).attr('r',0);\n\n        // data.country.forEach(function(d,i){\n        //     d3.select('#country-map-'+d[0])\n        //     .transition('c').duration(duration).delay(delay)\n        //     .attr('r', rScale(d[1].cumulative_deaths))\n        //     .style('fill', colors.red)\n        //     .style('stroke', '#FFF');\n        // })\n\n        var colorScale = d3.scaleLinear()\n        .domain([0, maxValue])\n        .range([colors.lightred, colors.red]);\n\n        var fillColorArray = ['case']\n\n        data.country.forEach(function(d,i){\n            fillColorArray.push(['==', ['get', \"iso\"], d.country_code]);\n            fillColorArray.push(colorScale(d.cumulative_deaths_per_100k));\n        });\n\n        if(fillColorArray.length>1){\n            fillColorArray.push(colors.darkgrey)\n            map.setPaintProperty(\n                'countries', \n                'fill-color', fillColorArray\n            );\n        }\n    }\n\n    if(options.map_toggle == 'percent-fully-vaccinated'){\n\n        d3.select('#bi_legend').attr('display', 'none');\n        d3.select('#blue_legend').attr('display', 'inline');\n        d3.select('#red_legend').attr('display', 'none');\n        d3.select('#blue_legend_title tspan').text('Percent fully vaccinated');\n        d3.select('#blue_legend_val tspan').text('100%');\n\n        // var rScale = d3.scalePow().exponent(0.55)\n        // .domain([0, 1])\n        // .range([1, maxSize])\n        // .clamp(true);\n\n        // d3.selectAll('.country-map').transition('c').duration(duration/1.7).attr('r',0);\n\n        // data.vGroup.forEach(function(d,i){\n        //     var peoplevaccinated = parseFloat(d[1][0].people_fully_vaccinated_per_hundred)/100;\n        //     if(isNaN(peoplevaccinated)) peoplevaccinated = 0;\n        //     d3.select('#country-map-'+d[1][0].country_code)\n        //     .transition('c').duration(duration).delay(delay)\n        //     .attr('r', rScale(peoplevaccinated))\n        //     .style('stroke', '#FFF')\n        //     .style('fill', function(){\n        //         return colors.blue;\n        //     })\n        // })\n\n        var colorScale = d3.scaleLinear()\n        .domain([0, 1])\n        .range([colors.lightblue, colors.blue])\n        .clamp(true);\n\n        var fillColorArray = ['case']\n        data.country.forEach(function(d,i){\n            var peoplevaccinated = parseFloat(d.people_fully_vaccinated_per_hundred)/100;\n            if(isNaN(peoplevaccinated)) peoplevaccinated = 0;\n            if(peoplevaccinated>0){\n                if(d.country_code) fillColorArray.push(['==', ['get', \"iso\"], d.country_code]);\n                if(d.country_code) fillColorArray.push(colorScale(peoplevaccinated));\n            }\n        });\n\n        if(fillColorArray.length>1){\n            fillColorArray.push(colors.darkgrey)\n            map.setPaintProperty(\n                'countries', \n                'fill-color', fillColorArray\n            );\n        } else {\n            map.setPaintProperty(\n                'countries', \n                'fill-color',\n                colors.darkgrey\n            );\n        }\n        \n    }\n\n    if(options.map_toggle == 'percent-vaccine-acceptance'){\n\n        d3.select('#bi_legend').attr('display', 'none');\n        d3.select('#blue_legend').attr('display', 'inline');\n        d3.select('#red_legend').attr('display', 'none');\n        d3.select('#blue_legend_title tspan').text('% vaccine acceptance');\n        d3.select('#blue_legend_val tspan').text('100%');\n        \n        // var rScale = d3.scalePow().exponent(1)\n        // .domain([0, 1])\n        // .range([1, maxSize*.7])\n        // // .clamp(true);\n\n        // d3.selectAll('.country-map').transition('c').duration(duration/1.7).attr('r',0);\n\n        // data.vGroup.forEach(function(d,i){\n        //     var vaccine_acceptance_percent = parseFloat(d[1][0].vaccine_acceptance_percent/100);\n            \n        //     if(isNaN(vaccine_acceptance_percent)) vaccine_acceptance_percent = 0;\n\n        //     d3.select('#country-map-'+d[1][0].country_code)\n        //     .transition('c').duration(duration).delay(delay)\n        //     .attr('r', rScale(vaccine_acceptance_percent))\n        //     .style('stroke', '#FFF')\n        //     .style('fill', function(){\n        //         return colors.blue;\n        //     })\n        // })\n\n        var colorScale = d3.scaleLinear()\n        .domain([0, 1])\n        .range([colors.lightblue, colors.blue])\n        .clamp(true);\n\n        var fillColorArray = ['case']\n        data.country.forEach(function(d,i){\n            var vaccine_acceptance_percent = parseFloat(d.vaccine_acceptance_percent)/100;\n            if(isNaN(vaccine_acceptance_percent)) vaccine_acceptance_percent = 0;\n            if(vaccine_acceptance_percent>0){\n                if(d.country_code) fillColorArray.push(['==', ['get', \"iso\"], d.country_code]);\n                if(d.country_code) fillColorArray.push(colorScale(vaccine_acceptance_percent));\n            }\n        });\n\n        if(fillColorArray.length>1){\n            fillColorArray.push(colors.darkgrey)\n            map.setPaintProperty(\n                'countries', \n                'fill-color', fillColorArray\n            );\n        } else {\n            map.setPaintProperty(\n                'countries', \n                'fill-color',\n                colors.darkgrey\n            );\n        }\n\n    }\n\n    mapTooltip.attr('display', 'none')  \n\n    map.on('mousemove', function (e) {\n        var features = map.queryRenderedFeatures(e.point);\n         \n        var displayProperties = [\n        'type',\n        'properties',\n        'id',\n        'layer',\n        'source',\n        'sourceLayer',\n        'state'\n        ];\n         \n        if((features.length==1)&&(features[0].layer.id=='countries')){\n\n            var id = features[0].properties.iso;\n            var countryfiltered = data.equity_data.filter(d=>d.country_iso2 == id);\n            var countryName;\n            if(countryfiltered[0]) countryName = countryfiltered[0].country_name;\n    \n            mapTooltip.select('#map_tooltip_name tspan').text(countryName);\n  \n            if(mapTooltip.select('#map_tooltip_name tspan').text().length==0){\n                mapTooltip\n                .attr('display', 'none');\n            };\n            \n            if(options.map_toggle=='cases'){\n                var country = data.country.filter(d=>d.country_code == id)[0];\n                if((!country)||(country.length==0)) return false;\n                mapTooltip.select('#map_tooltip_val tspan').text(addCommas(Math.round(country.cumulative_cases_per_100k))+' cases per 100k');\n            }\n    \n            if(options.map_toggle=='deaths'){\n                var country = data.country.filter(d=>d.country_code == id)[0];\n                if((!country)||(country.length==0)) return false;\n                mapTooltip.select('#map_tooltip_val tspan').text(addCommas(Math.round(country.cumulative_deaths_per_100k))+' deaths per 100k');\n            }\n    \n            if(options.map_toggle=='bi-weekly-change'){\n                var country = data.country.filter(d=>d.country_code == id);\n                if((!country)||(country.length==0)) return false;\n                var val = ((country[0].percent_change)*100).toFixed(1);\n                var str = '';\n                if(val>=0){\n                    str = '% increase';\n                } else {\n                    str = '% decrease';\n                }\n                mapTooltip.select('#map_tooltip_val tspan').text(Math.abs(val)+str);\n            }\n    \n            if(options.map_toggle=='percent-fully-vaccinated'){\n                var country = data.country.filter(d=>d.country_code == id);\n                if((!country)||(country.length==0)) return false;\n                var val = parseFloat(country[0].people_fully_vaccinated_per_hundred).toFixed(2)\n                if(isNaN(val)||(val==0)){ val = '-' } else { val = val + '% fully vaccinated'}\n                mapTooltip.select('#map_tooltip_val tspan').text(val);\n            }\n    \n            if(options.map_toggle=='percent-vaccine-acceptance'){\n                var country = data.country.filter(d=>d.country_code == id);\n                if((!country)||(country.length==0)) return false;\n                var val = parseFloat(country[0].vaccine_acceptance_percent).toFixed(2)\n                if(isNaN(val)||(val==0)){ val = '-' } else { val = val + '% vaccine acceptance'}\n                mapTooltip.select('#map_tooltip_val tspan').text(val);\n            }\n    \n            var str = mapTooltip.select('#map_tooltip_val tspan').text();\n            if(str.includes('NaN')) mapTooltip.attr('display', 'none')\n\n            d3.select('#map_tooltip_bg').attr('width', 20)\n\n            var scale = window.innerWidth/1329;\n            mapTooltip\n            .attr('display', 'inline')\n            .attr('transform', 'translate('+(e.point.x+20)+','+e.point.y+')scale('+scale+')');\n            var heightOffset = mapTooltip.node().getBBox();\n\n            var bbox = d3.select('#map_tooltip').node().getBBox();\n            d3.select('#map_tooltip_bg').attr('width', (parseFloat(bbox.width)+2))\n\n            if(mapTooltip.select('#map_tooltip_name tspan').text().length==0){\n                mapTooltip\n                .attr('display', 'none');\n            };\n\n            // mapTooltip.attr('transform', 'translate('+(project(([d.lng, d.lat])).x+3)+','+(project(([d.lng, d.lat])).y+2-heightOffset.height/2)+')scale('+scale+')');\n        } else {\n            mapTooltip.attr('display', 'none')\n        }\n    }).on('mouseout', function(event){\n        if(event.toElement=='tspan') return false;\n        mapTooltip.attr('display', 'none');\n    })\n\n\n    // function render() {\n    //     dots\n    //       .attr(\"cx\", function(d) {\n    //         return project(([d.lng, d.lat])).x;\n    //       })\n    //       .attr(\"cy\", function(d) {\n    //         return project(([d.lng, d.lat])).y;\n    //       });\n    //   }\n\n    // map.on(\"viewreset\", render);\n    // map.on(\"move\", render);\n    // map.on(\"moveend\", render);\n    // render(); // Call once to render\n\n    // tooltips\n\n    // var mapTooltip = d3.select('#map_tooltip').attr('opacity', 1).attr('transform', 'translate(0,0)').attr('display', 'none');\n\n    // d3.selectAll('.country-map').on('mousemove', function(event, d){\n\n    //     var id = d3.select(this).attr('id').substr(12,2);\n    //     var countryfiltered = data.equity_data.filter(d=>d.country_iso2 == id);\n    //     var countryName;\n    //     if(countryfiltered[0]) countryName = countryfiltered[0].country_name;\n\n    //     mapTooltip.select('#map_tooltip_name tspan').text(countryName);\n\n    //     if(options.map_toggle=='cases'){\n    //         var country = data.country.filter(d=>d.country_code == id)[0];\n    //         if((!country)||(country.length==0)) return false;\n    //         mapTooltip.select('#map_tooltip_val tspan').text(addCommas(country[1].cumulative_cases)+' cases');\n    //     }\n\n    //     if(options.map_toggle=='deaths'){\n    //         var country = data.country.filter(d=>d.country_code == id)[0];\n    //         if((!country)||(country.length==0)) return false;\n    //         mapTooltip.select('#map_tooltip_val tspan').text(addCommas(country[1].cumulative_deaths)+' deaths');\n    //     }\n\n    //     if(options.map_toggle=='bi-weekly-change'){\n    //         var country = data.country.filter(d=>d.country_code == id)[0];\n    //         if((!country)||(country.length==0)) return false;\n    //         var val = ((country[1].percent_change)*100).toFixed(1);\n    //         var str = '';\n    //         if(val>=0){\n    //             str = '% increase';\n    //         } else {\n    //             str = '% decrease';\n    //         }\n    //         mapTooltip.select('#map_tooltip_val tspan').text(Math.abs(val)+str);\n    //     }\n\n    //     if(options.map_toggle=='percent-fully-vaccinated'){\n    //         var country = data.vGroup.filter(d=>d[1][0].country_code == id)[0][1];\n    //         if((!country)||(country.length==0)) return false;\n    //         mapTooltip.select('#map_tooltip_val tspan').text(parseFloat(country[0].people_fully_vaccinated_per_hundred).toFixed(1)+'% fully vaccinated');\n    //     }\n\n    //     if(options.map_toggle=='percent-vaccine-acceptance'){\n    //         var country = data.vGroup.filter(d=>d[1][0].country_code == id)[0][1];\n    //         if((!country)||(country.length==0)) return false;\n    //         mapTooltip.select('#map_tooltip_val tspan').text(parseFloat(country[0].vaccine_acceptance_percent).toFixed(1)+'% vaccine acceptance');\n    //     }\n\n\n    //     d3.select('#map_tooltip_bg').attr('width', 0)\n\n    //     var bbox = mapTooltip.node().getBBox();\n    //     d3.select('#map_tooltip_bg').attr('width', (parseFloat(bbox.width)+2))\n    //     var scale = window.innerWidth/1329;\n    //     mapTooltip\n    //     .attr('display', 'inline')\n    //     .attr('transform', 'translate('+project(([d.lng, d.lat])).x+','+project(([d.lng, d.lat])).y+')scale('+scale+')');\n\n    //     var heightOffset = mapTooltip.node().getBBox();\n    //     mapTooltip.attr('transform', 'translate('+(project(([d.lng, d.lat])).x+3)+','+(project(([d.lng, d.lat])).y+2-heightOffset.height/2)+')scale('+scale+')');\n\n   \n\n    map.setLayoutProperty(\n        'countries',\n        'visibility',\n        'visible'\n    );\n\n}\n\n// function project(d) {\n//     return map.project(new mapboxgl.LngLat(d[0], d[1]));\n// }\n\nexport default createMap;\n","import React, { useEffect, useState } from \"react\";\nimport * as d3 from \"d3\";\nimport Layout from './Layout';\nimport {drawTimechart, updateTimechart} from './Timechart';\nimport {drawRegionchart, updateRegionchart} from './Regionchart';\nimport {drawBubblechart, updateBubblechart} from './Bubblechart';\nimport options from './Options';\nimport ParseData from './ParseData';\nimport './App.css'\nimport $ from \"jquery\";\nimport select2 from 'select2';\nimport 'select2/dist/css/select2.min.css'\nimport {addCommas, nFormatter} from './HelperFunctions';\nimport { createMap, updateMap } from './Map';\nimport moment from 'moment';\n\n  /* \n  add this attribute to package.json when deploying to github pages.\n \"homepage\": \"https://ifrcgo.github.io/ifrc-covid-dataviz/build\", \n  */\n\nconst equityDataUrl = './data/equity_data.csv';\nconst layoutUrl = \"./images/layout.svg\";\nconst whoDataUrl = \"./data/who_global_cases.csv\";\n// const whoDataUrl = \"http://covid19.who.int/WHO-COVID-19-global-data.csv\";\nconst vaccinesDataUrl = \"./data/owid_vaccinations.csv\";\n// const vaccinesDataUrl = \"http://raw.githubusercontent.com/owid/covid-19-data/master/public/data/vaccinations/vaccinations.csv\";\nconst vaccinesWhoDataUrl = \"./data/who_vaccination_data.csv\";\n// const vaccinesWhoDataUrl = \"http://covid19.who.int/who-data/vaccination-data.csv\";\nconst timelineDataUrl = \"./data/timeline.csv\";\nconst selfAssessmentDataUrl = \"./data/self_assessment.csv\";\nconst vaccineAcceptanceDataUrl = \"./data/vaccine_acceptance.csv\";\n\nconst data = {};\n\nconst regionOptions = [\n  { id: 'AM', text: 'Americas' },\n  { id: 'EU', text: 'Europe' },\n  { id: 'AP', text: 'Asia-Pacific' },\n  { id: 'ME', text: 'Middle East and North Africa'},\n  { id: 'AF', text: 'Africa' }\n]\n\nconst countryOptions = [];\n\nfunction App() {\n\n  const [progress, setProgress] = useState(0);\n  const [loaderText, setLoaderText] = useState('Loading SVG layout...');\n\n  async function init(){\n\n    // data source 1: layout.svg\n    const layout = d3.xml(layoutUrl);\n    layout.then(function(d){\n      d3.select('#svg_container').node().append(d3.select(d.documentElement).attr('width', '100%').attr('height', '100%').node());\n      const svg = d3.select('#svg_container svg');\n      svg.select('title').remove();\n      svg.attr('id', 'svg');\n      Layout(svg, options, data, filter, updateTable, updateMap);\n      setProgress(0.1);\n      setLoaderText('Loading equity data CSV...');\n      // data source 2: equity_data.csv\n      const equityData = d3.csv(equityDataUrl);\n      equityData.then(function(d){\n        data.equity_data = d;\n        d.forEach(function(d,i){\n          countryOptions.push({'text': d.country_name, 'id': 'Country-'+d.country_iso2 })\n        })\n        createSelects();\n        setProgress(0.1);\n        setLoaderText('Loading WHO data CSV...');\n        // data source 1: owid_vaccines.csv\n        const vaccinesData = d3.csv(vaccinesDataUrl);\n          vaccinesData.then(function(d){\n            data.vaccines_data = d;\n            setProgress(0.07);\n            setLoaderText('Loading OWID vaccines data...');\n             // data source 2: vaccinesWhoData.csv\n             const vaccinesWhoData = d3.csv(vaccinesWhoDataUrl);\n             vaccinesWhoData.then(function(d){\n               data.vaccines_who_data = d;\n               setProgress(0.15);\n               setLoaderText('Loading OWID vaccines data...');\n                // data source 3: self_assessment.csv\n                const selfAssessmentData = d3.csv(selfAssessmentDataUrl);\n                selfAssessmentData.then(function(d){\n                  data.self_assessment = d;\n                  setProgress(0.22);\n                  setLoaderText('Loading self assessment...');\n                  // data source 4: vaccine_acceptance.csv\n                  const vaccineAcceptanceData = d3.csv(vaccineAcceptanceDataUrl);\n                  vaccineAcceptanceData.then(function(d){\n                    data.vaccine_acceptance = d;\n                    setProgress(0.3);\n                      setLoaderText('Loading vaccine acceptance data...');\n                      // data source 3: timeline.csv\n                      const timelineData = d3.csv(timelineDataUrl);\n                      timelineData.then(function(d){\n                        data.timeline_data = d;\n                        setProgress(0.4);\n                        setLoaderText('Loading WHO daily data...');\n                          // data source 5: who_global_cases.csv\n                          const whoData = d3.csv(whoDataUrl);\n                          whoData.then(function(d){\n                            data.who_data = d;\n                            setProgress(0.8);\n                              setLoaderText('Loading complete.');\n                              setProgress(1);\n                              ParseData(data, options);\n                              createCharts();\n                              d3.select('#loaderDiv').transition().duration(1000).style('opacity', 0).on(\"end\", () => d3.select('#loaderDiv').remove());\n                    });\n                  });\n                });\n              });\n            });\n          });\n      });\n    })\n  }\n  \n  function createCharts(){\n    d3.select('#who_data_date tspan').text(moment(data.max_date).format('ll'));\n    d3.select('#owid_data_date tspan').text(moment(data.max_vaccine_date).format('ll'));\n    drawTimechart(data, options);\n    drawRegionchart(data, options, filter);\n    updateTable(data, options);\n    updateTotals(data, options);\n    createMap(data, options, filter);\n    drawBubblechart(data, options, filter);\n    d3.select('#bubblechart').attr('display', 'none');\n  }\n\n  function filter(id,e){\n    options.page = 1;\n    if(id=='clear'){\n      options.region_filter = [];\n      options.country_filter = [];\n      d3.select('#reset_locations').attr('display', 'none');\n    } \n    if(id=='clear-region'){\n      options.region_filter = [];\n    } \n\n    if(id=='clear-hdi'){\n      options.hdi_filter = [];\n    } \n\n    if(id=='clear-inform'){\n      options.inform_filter = [];\n    } \n\n    if((id.length==1)&&(id[0].length==2)&&(id!='filter')){\n      if(options.region_filter.includes(id[0])){\n        options.region_filter = options.region_filter.filter(d=>d!==id[0])\n      } else {\n        options.region_filter.push(id[0]);\n      }\n    }\n\n    if(options.region_filter.length==5) options.region_filter = [];\n\n    if(options.region_filter.length>0){\n      d3.select('#region_remove_filter').attr('opacity', 1);\n\n      d3.selectAll('.bar-labels').attr('opacity', 0.5);\n      options.region_filter.forEach(function(d,i){\n        d3.select('.bar-label-'+d).attr('opacity', 1);\n      })\n    } else {\n        d3.select('#region_remove_filter').attr('opacity', 0);\n        d3.selectAll('.bar-labels').attr('opacity', 1);\n    }\n\n    data.country = data.original.country;\n\n    var hdi_countries = [];\n    if(options.hdi_filter.length>0){\n      d3.select('#hdi_remove_filter').attr('opacity', 1);\n      data.country.forEach(function(d,i){\n        if(options.hdi_filter.includes(d.hdi_category)){\n          hdi_countries.push(d.country_iso2);\n        }\n      })\n    } else {\n      d3.select('#hdi_remove_filter').attr('opacity', 0);\n    }\n\n    var inform_countries = [];\n    if(options.inform_filter.length>0){\n      d3.select('#inform_remove_filter').attr('opacity', 1);\n      data.country.forEach(function(d,i){\n        if(options.inform_filter.includes(d.inform_severity)){\n          inform_countries.push(d.country_iso2);\n        }\n      })\n    } else {\n      d3.select('#inform_remove_filter').attr('opacity', 0);\n    }\n\n    if((id.length==1)&&(id[0].length>2)){\n      var code = id[0].substring(8);\n      if(options.country_filter.includes(code)){\n        options.country_filter = options.country_filter.filter(d=>d!==code)\n      } else {\n        options.country_filter.push(code);\n      }\n    }\n\n    if((options.region_filter.length==0)&&(options.country_filter.length==0)){\n      d3.select('#reset_locations').attr('display', 'none');\n    }\n\n    var countryIds = [];\n    options.country_filter.forEach(function(d,i){\n      countryIds.push('Country-'+d);\n    })\n\n    if((options.region_filter.length>0)||(options.country_filter.length>0)) {\n        d3.select('#reset_locations').attr('display', 'inline')\n      } else {\n        d3.select('#reset_locations').attr('display', 'none')\n      }\n\n    var mergeFilter = options.region_filter.concat(countryIds);\n    $('#regionSelect').val(mergeFilter)\n    $('#regionSelect').trigger('change');\n\n    // update data\n    data.who_data = data.original.who_data;\n\n    if(inform_countries.length>0){\n      data.who_data = data.who_data.filter(function(d,i){\n        return inform_countries.includes(d.country_code)\n      })\n    }\n    \n    if((options.region_filter.length>0)||(options.country_filter.length>0)||(hdi_countries.length>0)){\n      data.who_data = data.who_data.filter(function(d,i){\n        if(hdi_countries.length>0){\n          if((options.region_filter.length>0)||(options.country_filter.length>0)){\n            return (options.region_filter.includes(d.ifrc_region)||(options.country_filter.includes(d.country_code)))&&(hdi_countries.includes(d.country_code))\n          } else {\n            return (hdi_countries.includes(d.country_code))\n          }\n        } else {\n          return options.region_filter.includes(d.ifrc_region)||(options.country_filter.includes(d.country_code))\n        }\n      })\n    }\n    data.vaccines_data = data.original.vaccines_data;\n\n    if(inform_countries.length>0){\n      data.vaccines_data = data.vaccines_data.filter(function(d,i){\n        return inform_countries.includes(d.country_code)\n      })\n    }\n    if((options.region_filter.length>0)||(options.country_filter.length>0)||(hdi_countries.length>0)){\n      data.vaccines_data = data.vaccines_data.filter(function(d,i){\n        if(hdi_countries.length>0){\n          if((options.region_filter.length>0)||(options.country_filter.length>0)){\n            return (options.region_filter.includes(d.ifrc_region)||(options.country_filter.includes(d.country_code)))&&(hdi_countries.includes(d.country_code))\n          } else {\n            return (hdi_countries.includes(d.country_code))\n          }\n        } else {\n          return options.region_filter.includes(d.ifrc_region)||(options.country_filter.includes(d.country_code))\n        }\n      })\n    }\n\n    if(inform_countries.length>0){\n      data.country = data.country.filter(function(d,i){\n        return inform_countries.includes(d.country_iso2)\n      })\n    } \n    if((options.region_filter.length>0)||(options.country_filter.length>0)||(hdi_countries.length>0)){\n      data.country = data.country.filter(function(d,i){\n        if(hdi_countries.length>0){\n          if((options.region_filter.length>0)||(options.country_filter.length>0)){\n            return (options.region_filter.includes(d.ifrc_region)||(options.country_filter.includes(d.country_iso2)))&&(hdi_countries.includes(d.country_iso2))\n          } else {\n            return (hdi_countries.includes(d.country_iso2))\n          }\n        } else {\n          return options.region_filter.includes(d.ifrc_region)||(options.country_filter.includes(d.country_iso2))\n        }\n      })\n    }\n\n    handleSelectLength();\n    updateCharts();\n\n  }\n  function updateCharts(){\n    updateRegionchart(options,data);\n    updateTable(data, options);\n    updateTotals(data, options);\n    updateTimechart(data, options);\n    updateMap(data,options);\n    updateBubblechart(data, options, filter);\n  }\n\n  function updateTotals(data,options){\n\n    var numCountriesFiltered = data.country.length;\n\n    // total cases\n    var totalCases = d3.sum(data.country, d => d.cumulative_cases);\n    d3.select('#total_cases tspan').transition().duration(500)\n    .textTween(function() {\n      return function(t) {\n        return nFormatter(d3.interpolate(0, totalCases)(t))\n      };\n    });\n\n    // hide bars when zero cases\n    if(totalCases==0){\n      d3.selectAll('.bar_group').attr('opacity',0);\n    } else {\n      d3.selectAll('.bar_group').attr('opacity',1);\n    }\n\n    // total new cases\n    var totalNewCases = totalCases - d3.sum(data.country, d => d.cumulative_cases_7_days);\n    d3.select('#total_new_cases tspan').text('-');\n    d3.select('#total_new_cases tspan').transition().duration(500)\n    .textTween(function() {\n      return function(t) {\n        return nFormatter(d3.interpolate(0, totalNewCases)(t))\n      };\n    })\n\n    // total deaths\n    var totalDeaths = d3.sum(data.country, d => d.cumulative_deaths);\n    d3.select('#total_deaths tspan').transition().duration(500)\n    .textTween(function() {\n      return function(t) {\n        return nFormatter(d3.interpolate(0, totalDeaths)(t))\n      };\n    })\n\n    var totalVaccinations = d3.sum(data.country, d => d.total_vaccinations);\n    d3.select('#total_vaccines tspan').transition().duration(500)\n    .textTween(function() {\n      return function(t) {\n        return nFormatter(d3.interpolate(0, totalVaccinations)(t))\n      };\n    })\n\n    //***************************\n    // vaccies per 100 / acceptance / vaccine types / ns involvemnt\n    //***************************\n    var vaccinesPer100 = {population: 0, vaccine_population: 0};\n    var vaccineAcceptance = {population: 0, vaccine_acceptance_population: 0};\n    var numNsInvolvedCountres = 0;\n    data.vaccine_types = [];\n    data.country.forEach(function(dd,ii){\n      // vaccine per 100 including country population weight\n      if((dd.vaccines_per_100>0)&&(dd.population>0)) {\n        vaccinesPer100.population += dd.population;\n        vaccinesPer100.vaccine_population += dd.population*dd.vaccines_per_100;\n      }\n      // vaccine acceptance including country population weight\n      if(dd.vaccine_acceptance_population>0) {\n        vaccineAcceptance.population += dd.vaccine_acceptance_population;\n        vaccineAcceptance.vaccine_acceptance_population += dd.vaccine_acceptance_population*dd.vaccine_acceptance_percent;\n      }\n      // vacine types data\n      dd.vaccines_used.forEach(function(ddd){\n        if((!data.vaccine_types.includes(ddd))&&(ddd.length>1)&&(!ddd.includes('nactiv'))) data.vaccine_types.push(ddd);\n      })\n      // ns involved countries\n      // if(dd.ns_involvement>0){\n      //   numNsInvolvedCountres++;\n      // }\n      data.ns_involvement.forEach(function(ddd,iii){\n        if(ddd==dd.country_iso3){\n            numNsInvolvedCountres++;\n        }\n      })\n    });\n\n    // update total doses per 100 total\n    d3.select('#total_vac_100 tspan').text('-');\n    var vaccinePer100ByPopulation = vaccinesPer100.vaccine_population / vaccinesPer100.population;\n    if(vaccinePer100ByPopulation){\n      d3.select('#total_vac_100 tspan').transition().duration(500)\n      .textTween(function() {\n        return function(t) {\n          return (d3.interpolate(0, vaccinePer100ByPopulation)(t).toFixed(1))\n        };\n      })\n    }\n\n    // update vaccine acceptance percent total\n    d3.select('#percent_acceptance tspan').text('-');\n    var vaccineAcceptancePercent = vaccineAcceptance.vaccine_acceptance_population / vaccineAcceptance.population;\n    if(vaccineAcceptancePercent){\n      d3.select('#percent_acceptance tspan').transition().duration(500)\n      .textTween(function() {\n        return function(t) {\n          return Math.round(d3.interpolate(0, Math.round(vaccineAcceptancePercent))(t))+'%';\n        };\n      })\n    }\n\n    // update ns involved total\n    d3.select('#total_ns_countries tspan').transition().duration(500)\n    .textTween(function() {\n      return function(t) {\n        return Math.round(d3.interpolate(0, numNsInvolvedCountres)(t))\n      };\n    })\n\n    // update num types of vaccines total\n    d3.select('#num_vaccines tspan').transition().duration(500)\n    .textTween(function() {\n      return function(t) {\n        return Math.round(d3.interpolate(0, data.vaccine_types.length)(t))\n      };\n    })\n\n    // vaccine type tooltip list\n    d3.selectAll('.vaccine_type').remove();\n    d3.select('#vaccine_tooltip_bg').attr('height', 1);\n    data.vaccine_types.forEach(function(d,i){\n      d3.select(\"#vaccine_tooltip\").append('text')\n      .attr('font-size', 9)\n      .attr('fill', '#000')\n      .attr('class', 'vaccine_type')\n      .append('tspan').text(d)\n      .attr('dx', 6)\n      .attr('dy',((i*1.3)+1.8)+'em')\n    });\n\n    var vtooltipbbox = d3.select('#vaccine_tooltip').node().getBBox();\n    d3.select('#vaccine_tooltip_bg').attr('height', vtooltipbbox.height+6);\n\n    //***************************\n    // update hdi / inform numbers\n    //***************************\n\n    // define empty objects\n    var hdiData = {'very-high':0, 'high': 0, 'medium': 0, 'low': 0};\n    var hdiDataPopulation = {'very-high':0, 'high': 0, 'medium': 0, 'low': 0};\n    var hdiDataVaccines = {'very-high':0, 'high': 0, 'medium': 0, 'low': 0};\n    var hdiContactTracing = {'very-high':0, 'high': 0, 'medium': 0, 'low': 0};\n    var hdiTotalCasesData = {'very-high':0, 'high': 0, 'medium': 0, 'low': 0};\n    var hdiTestingData = {'very-high':[], 'high': [], 'medium': [], 'low': []};\n    var informData = {'very-high':0, 'high': 0, 'medium': 0, 'low': 0, 'no-score': 0};\n    var informDataPopulation = {'very-high':0, 'high': 0, 'medium': 0, 'low': 0, 'no-score': 0};\n    var informDataVaccines = {'very-high':0, 'high': 0, 'medium': 0, 'low': 0, 'no-score': 0};\n    var informContactTracing = {'very-high':0, 'high': 0, 'medium': 0, 'low': 0, 'no-score': 0};\n    var informTotalCasesData = {'very-high':0, 'high': 0, 'medium': 0, 'low': 0, 'no-score': 0};\n    var informTestingData = {'very-high':[], 'high': [], 'medium': [], 'low': [], 'no-score': []};\n    var totalRecordedPopulation = 0;\n\n    if(totalCases>0){\n      data.country.forEach(function(dd,ii){\n          \n          hdiData[dd.hdi_category] += 1;\n          hdiDataPopulation[dd.hdi_category] += parseInt(dd.population);\n          hdiDataVaccines[dd.hdi_category] += parseInt(dd.total_vaccinations)||0;\n\n          informData[dd.inform_severity] += 1;\n          \n          informContactTracing[dd.inform_severity] += dd.contract_tracing;\n          hdiContactTracing[dd.hdi_category] += dd.contract_tracing;\n\n          if((dd.hdi_category=='very-high')||(dd.hdi_category=='high')||(dd.hdi_category=='medium')||(dd.hdi_category=='low'))\n          hdiTestingData[dd.hdi_category].push(dd.avg_tests_per_1000);\n          if((dd.inform_severity=='very-high')||(dd.inform_severity=='high')||(dd.inform_severity=='medium')||(dd.inform_severity=='low')||(dd.inform_severity=='no-score'))\n          informTestingData[dd.inform_severity].push(dd.avg_tests_per_1000);\n\n          informDataPopulation[dd.inform_severity] += parseInt(dd.population);\n          informDataVaccines[dd.inform_severity] += parseInt(dd.total_vaccinations)||0;\n          // hdi index\n          hdiTotalCasesData[dd.hdi_category] += dd.cumulative_cases || 0;\n          informTotalCasesData[dd.inform_severity] += dd.cumulative_cases || 0;\n      })\n    }\n\n    var totalHdiPop = hdiDataPopulation['very-high']+hdiDataPopulation['high']+hdiDataPopulation['medium']+hdiDataPopulation['low'];\n    var totalInformPop = informDataPopulation['very-high']+informDataPopulation['high']+informDataPopulation['medium']+informDataPopulation['low']+informDataPopulation['no-score'];\n\n    // update additional indicators\n    // row 0 percent of vaccinations by hdi\n    d3.select('#hdi-percent-val-very-high tspan').text(parse((hdiTotalCasesData['very-high']/totalCases)*100).toFixed(0)+'%').style('text-anchor', 'end').attr('dx', '16');\n    d3.select('#hdi-percent-bar-very-high').transition().duration(500).attr('width', (parse(hdiTotalCasesData['very-high']/totalCases)*70));\n    d3.select('#hdi-percent-val-high tspan').text(parse((hdiTotalCasesData['high']/totalCases)*100).toFixed(0)+'%').style('text-anchor', 'end').attr('dx', '16');\n    d3.select('#hdi-percent-bar-high').transition().duration(500).attr('width', (parse(hdiTotalCasesData['high']/totalCases)*70));\n    d3.select('#hdi-percent-val-medium tspan').text(parse((hdiTotalCasesData['medium']/totalCases)*100).toFixed(0)+'%').style('text-anchor', 'end').attr('dx', '16');\n    d3.select('#hdi-percent-bar-medium').transition().duration(500).attr('width', (parse(hdiTotalCasesData['medium']/totalCases)*70));\n    d3.select('#hdi-percent-val-low tspan').text(parse((hdiTotalCasesData['low']/totalCases)*100).toFixed(0)+'%').style('text-anchor', 'end').attr('dx', '16');\n    d3.select('#hdi-percent-bar-low').transition().duration(500).attr('width', (parse(hdiTotalCasesData['low']/totalCases)*70));\n\n    d3.select('#inform-percent-val-very-high tspan').text(parse((informTotalCasesData['very-high']/totalCases)*100).toFixed(0)+'%').style('text-anchor', 'end').attr('dx', '16');\n    d3.select('#inform-percent-bar-very-high').transition().duration(500).attr('width', (parse(informTotalCasesData['very-high']/totalCases)*64));\n    d3.select('#inform-percent-val-high tspan').text(parse((informTotalCasesData['high']/totalCases)*100).toFixed(0)+'%').style('text-anchor', 'end').attr('dx', '16');\n    d3.select('#inform-percent-bar-high').transition().duration(500).attr('width', (parse(informTotalCasesData['high']/totalCases)*64));\n    d3.select('#inform-percent-val-medium tspan').text(parse((informTotalCasesData['medium']/totalCases)*100).toFixed(0)+'%').style('text-anchor', 'end').attr('dx', '16');\n    d3.select('#inform-percent-bar-medium').transition().duration(500).attr('width', (parse(informTotalCasesData['medium']/totalCases)*64));\n    d3.select('#inform-percent-val-low tspan').text(parse((informTotalCasesData['low']/totalCases)*100).toFixed(0)+'%').style('text-anchor', 'end').attr('dx', '16');\n    d3.select('#inform-percent-bar-low').transition().duration(500).attr('width', (parse(informTotalCasesData['low']/totalCases)*64));\n    d3.select('#inform-percent-val-no-score tspan').text(parse((informTotalCasesData['no-score']/totalCases)*100).toFixed(0)+'%').style('text-anchor', 'end').attr('dx', '16');\n    d3.select('#inform-percent-bar-no-score').transition().duration(500).attr('width', (parse(informTotalCasesData['no-score']/totalCases)*64));\n\n    d3.select('#hdi-toggle-very-high-val tspan').text(hdiData['very-high']).style('text-anchor', 'end').attr('dx', '10');\n    d3.select('#hdi-toggle-high-val tspan').text(hdiData['high']).style('text-anchor', 'end').attr('dx', '10');\n    d3.select('#hdi-toggle-medium-val tspan').text(hdiData['medium']).style('text-anchor', 'end').attr('dx', '10');\n    d3.select('#hdi-toggle-low-val tspan').text(hdiData['low']).style('text-anchor', 'end').attr('dx', '10');\n\n    d3.select('#inform-toggle-very-high-val tspan').text(informData['very-high']).style('text-anchor', 'end').attr('dx', '6');\n    d3.select('#inform-toggle-high-val tspan').text(informData['high']).style('text-anchor', 'end').attr('dx', '10');\n    d3.select('#inform-toggle-medium-val tspan').text(informData['medium']).style('text-anchor', 'end').attr('dx', '9');\n    d3.select('#inform-toggle-low-val tspan').text(informData['low']).style('text-anchor', 'end').attr('dx', '7');\n    d3.select('#inform-toggle-no-score-val tspan').text(informData['no-score']).style('text-anchor', 'end').attr('dx', '13');\n\n    // row 1 percnet of vaccinations by hdi\n    d3.select('#hdi1val-very-high tspan').text(parse((hdiDataPopulation['very-high']/totalHdiPop)*100).toFixed(0)+'%').style('text-anchor', 'end').attr('dx', '');\n    d3.select('#hdi1bar-very-high').transition().duration(500).attr('width', (parse(hdiDataPopulation['very-high']/totalHdiPop)*70));\n    d3.select('#hdi1val-high tspan').text(parse((hdiDataPopulation['high']/totalHdiPop)*100).toFixed(0)+'%').style('text-anchor', 'end').attr('dx', '');\n    d3.select('#hdi1bar-high').transition().duration(500).attr('width', (parse(hdiDataPopulation['high']/totalHdiPop)*70));\n    d3.select('#hdi1val-medium tspan').text(parse((hdiDataPopulation['medium']/totalHdiPop)*100).toFixed(0)+'%').style('text-anchor', 'end').attr('dx', '');\n    d3.select('#hdi1bar-medium').transition().duration(500).attr('width', (parse(hdiDataPopulation['medium']/totalHdiPop)*70));\n    d3.select('#hdi1val-low tspan').text(parse((hdiDataPopulation['low']/totalHdiPop)*100).toFixed(0)+'%').style('text-anchor', 'end').attr('dx', '');\n    d3.select('#hdi1bar-low').transition().duration(500).attr('width', (parse(hdiDataPopulation['low']/totalHdiPop)*70));\n\n    d3.select('#inform1val-very-high tspan').text(parse((informDataPopulation['very-high']/totalInformPop)*100).toFixed(0)+'%').style('text-anchor', 'end').attr('dx', '');\n    d3.select('#inform1bar-very-high').transition().duration(500).attr('width', (parse(informDataPopulation['very-high']/totalInformPop)*64));\n    d3.select('#inform1val-high tspan').text(parse((informDataPopulation['high']/totalInformPop)*100).toFixed(0)+'%').style('text-anchor', 'end').attr('dx', '');\n    d3.select('#inform1bar-high').transition().duration(500).attr('width', (parse(informDataPopulation['high']/totalInformPop)*64));\n    d3.select('#inform1val-medium tspan').text(parse((informDataPopulation['medium']/totalInformPop)*100).toFixed(0)+'%').style('text-anchor', 'end').attr('dx', '');\n    d3.select('#inform1bar-medium').transition().duration(500).attr('width', (parse(informDataPopulation['medium']/totalInformPop)*64));\n    d3.select('#inform1val-low tspan').text(parse((informDataPopulation['low']/totalInformPop)*100).toFixed(0)+'%').style('text-anchor', 'end').attr('dx', '');\n    d3.select('#inform1bar-low').transition().duration(500).attr('width', (parse(informDataPopulation['low']/totalInformPop)*64));\n    d3.select('#inform1val-no-score tspan').text(parse((informDataPopulation['no-score']/totalInformPop)*100).toFixed(0)+'%').style('text-anchor', 'end').attr('dx', '');\n    d3.select('#inform1bar-no-score').transition().duration(500).attr('width', (parse(informDataPopulation['no-score']/totalInformPop)*64));\n\n    // row 2 percent of total vaccinations\n    d3.select('#hdi2val-very-high tspan').text(parse((hdiDataVaccines['very-high']/totalVaccinations)*100).toFixed(0)+'%').style('text-anchor', 'end').attr('dx', '');\n    d3.select('#hdi2bar-very-high').transition().duration(500).attr('width', (parse(hdiDataVaccines['very-high']/totalVaccinations)*70));\n    d3.select('#hdi2val-high tspan').text(parse((hdiDataVaccines['high']/totalVaccinations)*100).toFixed(0)+'%').style('text-anchor', 'end').attr('dx', '');\n    d3.select('#hdi2bar-high').transition().duration(500).attr('width', (parse(hdiDataVaccines['high']/totalVaccinations)*70));\n    d3.select('#hdi2val-medium tspan').text(parse((hdiDataVaccines['medium']/totalVaccinations)*100).toFixed(0)+'%').style('text-anchor', 'end').attr('dx', '');\n    d3.select('#hdi2bar-medium').transition().duration(500).attr('width', (parse(hdiDataVaccines['medium']/totalVaccinations)*70));\n    d3.select('#hdi2val-low tspan').text(parse((hdiDataVaccines['low']/totalVaccinations)*100).toFixed(0)+'%').style('text-anchor', 'end').attr('dx', '');\n    d3.select('#hdi2bar-low').transition().duration(500).attr('width', (parse(hdiDataVaccines['low']/totalVaccinations)*70));\n\n    d3.select('#inform2val-very-high tspan').text(parse((informDataVaccines['very-high']/totalVaccinations)*100).toFixed(0)+'%').style('text-anchor', 'end').attr('dx', '');\n    d3.select('#inform2bar-very-high').transition().duration(500).attr('width', (parse(informDataVaccines['very-high']/totalVaccinations)*64));\n    d3.select('#inform2val-high tspan').text(parse((informDataVaccines['high']/totalVaccinations)*100).toFixed(0)+'%').style('text-anchor', 'end').attr('dx', '');\n    d3.select('#inform2bar-high').transition().duration(500).attr('width', (parse(informDataVaccines['high']/totalVaccinations)*64));\n    d3.select('#inform2val-medium tspan').text(parse((informDataVaccines['medium']/totalVaccinations)*100).toFixed(0)+'%').style('text-anchor', 'end').attr('dx', '');\n    d3.select('#inform2bar-medium').transition().duration(500).attr('width', (parse(informDataVaccines['medium']/totalVaccinations)*64));\n    d3.select('#inform2val-low tspan').text(parse((informDataVaccines['low']/totalVaccinations)*100).toFixed(0)+'%').style('text-anchor', 'end').attr('dx', '');\n    d3.select('#inform2bar-low').transition().duration(500).attr('width', (parse(informDataVaccines['low']/totalVaccinations)*64));\n    d3.select('#inform2val-no-score tspan').text(parse((informDataVaccines['no-score']/totalVaccinations)*100).toFixed(0)+'%').style('text-anchor', 'end').attr('dx', '');\n    d3.select('#inform2bar-no-score').transition().duration(500).attr('width', (parse(informDataVaccines['no-score']/totalVaccinations)*64));\n\n    // row 3 total doses by hdi/inform\n    var maxhdivac = d3.max([ hdiDataVaccines['low'],hdiDataVaccines['medium'],hdiDataVaccines['high'],hdiDataVaccines['very-high'] ]);\n    var maxinformvac = d3.max([ informDataVaccines['low'],informDataVaccines['medium'],informDataVaccines['high'],informDataVaccines['very-high'],informDataVaccines['no-score'] ]);\n\n    d3.select('#hdi3val-very-high tspan').text(nFormatter(hdiDataVaccines['very-high'])).style('text-anchor', 'end').attr('dx', '');\n    d3.select('#hdi3bar-very-high').transition().duration(500).attr('width', (parse(hdiDataVaccines['very-high']/maxhdivac)*70));\n    d3.select('#hdi3val-high tspan').text(nFormatter(hdiDataVaccines['high'])).style('text-anchor', 'end').attr('dx', '');\n    d3.select('#hdi3bar-high').transition().duration(500).attr('width', (parse(hdiDataVaccines['high']/maxhdivac)*70));\n    d3.select('#hdi3val-medium tspan').text(nFormatter(hdiDataVaccines['medium'])).style('text-anchor', 'end').attr('dx', '');\n    d3.select('#hdi3bar-medium').transition().duration(500).attr('width', (parse(hdiDataVaccines['medium']/maxhdivac)*70));\n    d3.select('#hdi3val-low tspan').text(nFormatter(hdiDataVaccines['low'])).style('text-anchor', 'end').attr('dx', '');\n    d3.select('#hdi3bar-low').transition().duration(500).attr('width', (parse(hdiDataVaccines['low']/maxhdivac)*70));\n\n    d3.select('#inform3val-very-high tspan').text(nFormatter(informDataVaccines['very-high'])).style('text-anchor', 'end').attr('dx', '');\n    d3.select('#inform3bar-very-high').transition().duration(500).attr('width', (parse(informDataVaccines['very-high']/maxinformvac)*64));\n    d3.select('#inform3val-high tspan').text(nFormatter(informDataVaccines['high'])).style('text-anchor', 'end').attr('dx', '');\n    d3.select('#inform3bar-high').transition().duration(500).attr('width', (parse(informDataVaccines['high']/maxinformvac)*64));\n    d3.select('#inform3val-medium tspan').text(nFormatter(informDataVaccines['medium'])).style('text-anchor', 'end').attr('dx', '');\n    d3.select('#inform3bar-medium').transition().duration(500).attr('width', (parse(informDataVaccines['medium']/maxinformvac)*64));\n    d3.select('#inform3val-low tspan').text(nFormatter(informDataVaccines['low'])).style('text-anchor', 'end').attr('dx', '');\n    d3.select('#inform3bar-low').transition().duration(500).attr('width', (parse(informDataVaccines['low']/maxinformvac)*64));\n    d3.select('#inform3val-no-score tspan').text(nFormatter(informDataVaccines['no-score'])).style('text-anchor', 'end').attr('dx', '');\n    d3.select('#inform3bar-no-score').transition().duration(500).attr('width', (parse(informDataVaccines['no-score']/maxinformvac)*64));\n\n    // row 4 total vaccinations\n    d3.select('#hdi4val-very-high tspan').text(parse((hdiContactTracing['very-high']/numCountriesFiltered)*100).toFixed(0)+'%').style('text-anchor', 'end').attr('dx', '');\n    d3.select('#hdi4bar-very-high').transition().duration(500).attr('width', (parse(hdiContactTracing['very-high']/numCountriesFiltered)*70));\n    d3.select('#hdi4val-high tspan').text(parse((hdiContactTracing['high']/numCountriesFiltered)*100).toFixed(0)+'%').style('text-anchor', 'end').attr('dx', '');\n    d3.select('#hdi4bar-high').transition().duration(500).attr('width', (parse(hdiContactTracing['high']/numCountriesFiltered)*70));\n    d3.select('#hdi4val-medium tspan').text(parse((hdiContactTracing['medium']/numCountriesFiltered)*100).toFixed(0)+'%').style('text-anchor', 'end').attr('dx', '');\n    d3.select('#hdi4bar-medium').transition().duration(500).attr('width', (parse(hdiContactTracing['medium']/numCountriesFiltered)*70));\n    d3.select('#hdi4val-low tspan').text(parse((hdiContactTracing['low']/numCountriesFiltered)*100).toFixed(0)+'%').style('text-anchor', 'end').attr('dx', '');\n    d3.select('#hdi4bar-low').transition().duration(500).attr('width', (parse(hdiContactTracing['low']/numCountriesFiltered)*70));\n\n    d3.select('#inform4val-very-high tspan').text(parse((informContactTracing['very-high']/numCountriesFiltered)*100).toFixed(0)+'%').style('text-anchor', 'end').attr('dx', '');\n    d3.select('#inform4bar-very-high').transition().duration(500).attr('width', (parse(informContactTracing['very-high']/numCountriesFiltered)*64));\n    d3.select('#inform4val-high tspan').text(parse((informContactTracing['high']/numCountriesFiltered)*100).toFixed(0)+'%').style('text-anchor', 'end').attr('dx', '');\n    d3.select('#inform4bar-high').transition().duration(500).attr('width', (parse(informContactTracing['high']/numCountriesFiltered)*64));\n    d3.select('#inform4val-medium tspan').text(parse((informContactTracing['medium']/numCountriesFiltered)*100).toFixed(0)+'%').style('text-anchor', 'end').attr('dx', '');\n    d3.select('#inform4bar-medium').transition().duration(500).attr('width', (parse(informContactTracing['medium']/numCountriesFiltered)*64));\n    d3.select('#inform4val-low tspan').text(parse((informContactTracing['low']/numCountriesFiltered)*100).toFixed(0)+'%').style('text-anchor', 'end').attr('dx', '');\n    d3.select('#inform4bar-low').transition().duration(500).attr('width', (parse(informContactTracing['low']/numCountriesFiltered)*64));\n    d3.select('#inform4val-no-score tspan').text(parse((informContactTracing['no-score']/numCountriesFiltered)*100).toFixed(0)+'%').style('text-anchor', 'end').attr('dx', '');\n    d3.select('#inform4bar-no-score').transition().duration(500).attr('width', (parse(informContactTracing['no-score']/numCountriesFiltered)*64));\n\n    // row 5 average testing\n    hdiTestingData['low'] = Math.round(d3.mean(hdiTestingData['low']))||0;\n    hdiTestingData['medium'] = Math.round(d3.mean(hdiTestingData['medium']))||0;\n    hdiTestingData['high'] = Math.round(d3.mean(hdiTestingData['high']))||0;\n    hdiTestingData['very-high'] = Math.round(d3.mean(hdiTestingData['very-high']))||0;\n    informTestingData['no-score'] = Math.round(d3.mean(informTestingData['no-score']))||0;\n    informTestingData['low'] = Math.round(d3.mean(informTestingData['low']))||0;\n    informTestingData['medium'] = Math.round(d3.mean(informTestingData['medium']))||0;\n    informTestingData['high'] = Math.round(d3.mean(informTestingData['high']))||0;\n    informTestingData['very-high'] = Math.round(d3.mean(informTestingData['very-high']))||0;\n\n    var maxhditest = d3.max([ hdiTestingData['low'],hdiTestingData['medium'],hdiTestingData['high'],hdiTestingData['very-high'] ]);\n    var maxinformtest = d3.max([ informTestingData['low'],informTestingData['medium'],informTestingData['high'],informTestingData['very-high'],informTestingData['no-score'] ]);\n\n    d3.select('#hdi5val-very-high tspan').text(addCommas(hdiTestingData['very-high'])).style('text-anchor', 'end').attr('dx', '');\n    d3.select('#hdi5bar-very-high').transition().duration(500).attr('width', (parse(hdiTestingData['very-high']/maxhditest)*70));\n    d3.select('#hdi5val-high tspan').text(addCommas(hdiTestingData['high'])).style('text-anchor', 'end').attr('dx', '');\n    d3.select('#hdi5bar-high').transition().duration(500).attr('width', (parse(hdiTestingData['high']/maxhditest)*70));\n    d3.select('#hdi5val-medium tspan').text(addCommas(hdiTestingData['medium'])).style('text-anchor', 'end').attr('dx', '');\n    d3.select('#hdi5bar-medium').transition().duration(500).attr('width', (parse(hdiTestingData['medium']/maxhditest)*70));\n    d3.select('#hdi5val-low tspan').text(addCommas(hdiTestingData['low'])).style('text-anchor', 'end').attr('dx', '');\n    d3.select('#hdi5bar-low').transition().duration(500).attr('width', (parse(hdiTestingData['low']/maxhditest)*70));\n\n    d3.select('#inform5val-very-high tspan').text(addCommas(informTestingData['very-high'])).style('text-anchor', 'end').attr('dx', '');\n    d3.select('#inform5bar-very-high').transition().duration(500).attr('width', (parse(informTestingData['very-high']/maxinformtest)*64));\n    d3.select('#inform5val-high tspan').text(addCommas(informTestingData['high'])).style('text-anchor', 'end').attr('dx', '');\n    d3.select('#inform5bar-high').transition().duration(500).attr('width', (parse(informTestingData['high']/maxinformtest)*64));\n    d3.select('#inform5val-medium tspan').text(addCommas(informTestingData['medium'])).style('text-anchor', 'end').attr('dx', '');\n    d3.select('#inform5bar-medium').transition().duration(500).attr('width', (parse(informTestingData['medium']/maxinformtest)*64));\n    d3.select('#inform5val-low tspan').text(addCommas(informTestingData['low'])).style('text-anchor', 'end').attr('dx', '');\n    d3.select('#inform5bar-low').transition().duration(500).attr('width', (parse(informTestingData['low']/maxinformtest)*64));\n    d3.select('#inform5val-no-score tspan').text(addCommas(informTestingData['no-score'])).style('text-anchor', 'end').attr('dx', '');\n    d3.select('#inform5bar-no-score').transition().duration(500).attr('width', (parse(informTestingData['no-score']/maxinformtest)*64));\n\n    // num countries filtered (table)\n    d3.select('#countries_filtered tspan').text(numCountriesFiltered+' countries filtered').style('text-anchor', 'end').attr('dx', '105');\n\n  }\n\n  d3.select('#prev').style('cursor', 'pointer')\n  .attr('opacity', 0.5)\n  .on('click',function(){\n    if(options.page==1) return false;\n    options.page = options.page-1;\n    updateTable(data, options);\n  })\n\n\n  d3.select('#next').style('cursor', 'pointer').on('click',function(){\n    if(options.page==options.numPages) return false;\n    options.page = options.page+1;\n    updateTable(data, options);\n  })\n\n  async function updateTable(data, options){\n\n    // var lastRecord = data.vaccines_data_cumulative.filter(d=>d.date.getTime()==data.max_date.getTime());\n    // var vGroup = d3.flatGroup(lastRecord, d => d.iso_code);\n\n    // data.country.forEach(function(d,i){\n    //   var vaccine_acceptance_percent = (d.vaccine_acceptance_percent) || 0\n    //   if(!vGroup.some(item => item[0] === d.country_iso3)){\n    //     vGroup.push([d.country_iso3, [{\n    //       country_name: d.country_name,\n    //       country_code: d.country_iso2,\n    //       vaccine_acceptance_percent: vaccine_acceptance_percent\n    //     }]])\n    //   }\n    //   vGroup.forEach(function(dd,ii){\n    //     if(dd[0]==d.country_iso3){\n    //       dd[1][0].vaccine_acceptance_percent = vaccine_acceptance_percent;\n    //       dd[1][0].country_name = d.country_name;\n    //       dd[1][0].country_code = d.country_iso2;\n    //     }\n    //   })\n    // })\n\n    var sortKey;\n    if(options.table_sort=='col0_sort') sortKey = 'country_name';\n    if(options.table_sort=='col1_sort') sortKey = 'total_vaccinations_per_hundred';\n    if(options.table_sort=='col2_sort') sortKey = 'people_vaccinated_per_hundred';\n    if(options.table_sort=='col3_sort') sortKey = 'people_fully_vaccinated_per_hundred';\n    if(options.table_sort=='col4_sort') sortKey = 'vaccine_acceptance_percent';\n    if(options.table_sort=='col5_sort') sortKey = 'total_vaccinations';\n\n    for(var x = 0; x<6; x++){\n      d3.select('#col'+x+'_sort_desc').attr('opacity', 0);\n      d3.select('#col'+x+'_sort_asc').attr('opacity', 0);\n    }\n\n    d3.select('#'+options.table_sort+'_'+options.table_sort_direction)\n    .attr('opacity', 1);\n\n    if(sortKey=='country_name'){\n      if(options.table_sort_direction=='asc') {\n        data.country.sort(function(b, a){\n          return a.country_name.localeCompare(b.country_name);\n        })\n      } else {\n        data.country.sort(function(a, b){\n          return a.country_name.localeCompare(b.country_name);\n        })    \n      }\n\n    } else {\n      if(options.table_sort_direction=='desc') {\n        data.country.sort(function(a,b){\n            return b[sortKey] - a[sortKey];\n        });\n      } else {\n        data.country.sort(function(b,a){\n          return b[sortKey] - a[sortKey];\n        });\n      }\n    }\n\n  //   data.vGroup = vGroup;\n\n  //   data.vGroup.forEach(function(d,i){\n  //     data.equity_data.forEach(function(dd,ii){\n  //         if(d[0] == dd.country_iso3){\n  //             dd.people_fully_vaccinated_per_hundred = parseFloat(d[1][0].people_fully_vaccinated_per_hundred);\n  //             dd.people_vaccinated_per_hundred = parseFloat(d[1][0].people_vaccinated_per_hundred);\n  //             dd.total_vaccinations = parseFloat(d[1][0].total_vaccinations);\n  //             dd.total_vaccinations_per_hundred = parseFloat(d[1][0].total_vaccinations_per_hundred);\n  //         }\n  //     })\n  // })\n\n\n    d3.selectAll('.tablerow').remove();\n    d3.selectAll('.col1bar').attr('opacity', 0);\n    d3.selectAll('.col2bar').attr('opacity', 0);\n    d3.selectAll('.col3bar').attr('opacity', 0);\n    d3.selectAll('.col4bar').attr('opacity', 0);\n    d3.selectAll('.colbg').attr('opacity', 0);\n    d3.selectAll('.table_country_name tspan').text('');\n\n    options.numPages = Math.ceil(data.country.length/10);\n\n    d3.select('#next').attr('opacity', function(){\n      if(options.page==options.numPages) return 0.5;\n      return 1;\n    })\n\n    d3.select('#prev')\n    .attr('opacity', function(){\n      if(options.page==1) return 0.5;\n      return 1;\n    })\n\n    d3.select('#pagination_text').attr('text-anchor', 'end');\n    d3.select('#pagination_text tspan').attr('x', 40);\n    d3.select('#pagination_text tspan').text('Page '+options.page + ' of '+options.numPages)\n\n    var i = 0;\n    var delay = 10;\n    const timer = ms => new Promise(res => setTimeout(res, ms));\n\n    for(let k = ((options.page-1)*10); k < ((options.page)*10); k++){\n\n      var d = data.country[k];\n      if(!data.country[k]) {\n        d3.select('#col1bar'+i)\n        .attr('width', 0);\n        d3.select('#col2bar'+i)\n        .attr('width', 0)\n        d3.select('#col3bar'+i)\n        .attr('width', 0)\n        d3.select('#col4bar'+i)\n        .attr('width', 0)\n        continue;\n      }\n\n      var row = d3.select('#row'+i);\n      \n      row.append('text')\n      .attr('class','tablerow table_country_name')\n      .text(function(){\n        var name;\n        if(d.country_name) { name = d.country_name; } else {\n          name = d.country_code;\n        }\n        name = name.substring(0,17);\n        if(name.length==17)name=name+'.';\n        return name;\n      })\n      .attr('data-id', d.country_code)\n      .attr('x', 0)\n      .attr('y', function(){\n        return 80+(i*24.8);\n      })\n      .style('fill', '#000')\n      .style('font-size', '9px');\n\n      // col 1 val\n      row.append('text')\n      .attr('class','tablerow')\n      .text(function(){\n        var val = parseFloat(d.total_vaccinations_per_hundred).toFixed(1);\n        if((isNaN(val))||(val==0)){ return ''} else { return val }\n      })\n      .style('text-anchor', 'end')\n      .attr('x', 112)\n      .attr('y', function(){\n        return 80+(i*24.8);\n      })\n      .style('fill', '#000')\n      .style('font-size', '9px');\n\n      // col 1 bar\n      d3.select('#col1bar'+i)\n      .attr('opacity', 1)\n      .transition()\n      .duration(200)\n      .attr('width', function(){\n        var val = d.total_vaccinations_per_hundred;\n        if(d.total_vaccinations_per_hundred>100){\n          val = 100\n        } \n        if(isNaN(val)){ return 0} else { return 68*(val/100) }\n      });\n\n      d3.select('#col1bg'+i)\n      .attr('opacity', 1);\n\n      // col 2 val\n      row.append('text')\n      .attr('class','tablerow')\n      .text(function(){\n        var val = parseFloat(d.people_vaccinated_per_hundred).toFixed(1);\n        if((isNaN(val))||(val==0)){ return ''} else { return val+'%' }\n      })\n      .style('text-anchor', 'end')\n      .attr('x', 223)\n      .attr('y', function(){\n        return 80+(i*24.8);\n      })\n      .style('fill', '#000')\n      .style('font-size', '9px');\n\n      // col 2 bar\n      d3.select('#col2bar'+i)\n      .attr('opacity', 1)\n      .transition()\n      .duration(200)\n      .attr('width', function(){\n        var val = d.people_vaccinated_per_hundred;\n        if(d.people_vaccinated_per_hundred>100){\n          val = 100\n        } \n        if(isNaN(val)){ return 0} else { return 68*(val/100) }\n      });\n\n      d3.select('#col2bg'+i)\n      .attr('opacity', 1);\n\n      // col 3 val\n      row.append('text')\n      .attr('class','tablerow')\n      .text(function(){\n        var val = parseFloat(d.people_fully_vaccinated_per_hundred).toFixed(1);\n        if((isNaN(val))||(val==0)){ return ''} else { return val+'%' }\n      })\n      .style('text-anchor', 'end')\n      .attr('x', 335)\n      .attr('y', function(){\n        return 80+(i*24.8);\n      })\n      .style('fill', '#000')\n      .style('font-size', '9px');\n\n      // col 3 bar\n      d3.select('#col3bar'+i)\n      .attr('opacity', 1)\n      .transition()\n      .duration(200)\n      .attr('width', function(){\n        var val = d.people_fully_vaccinated_per_hundred;\n        if(d.people_fully_vaccinated_per_hundred>100){\n          val = 100\n        } \n        if(isNaN(val)){ return 0} else { return 68*(val/100) }\n      });\n      \n      d3.select('#col3bg'+i)\n      .attr('opacity', 1);\n\n      // col 4 val\n      row.append('text')\n      .attr('class','tablerow')\n      .text(function(){\n        var val = parseFloat(d.vaccine_acceptance_percent).toFixed(1);\n        if((isNaN(val))||(val==0)){ return ''} else { return val+'%' }\n      })\n      .style('text-anchor', 'end')\n      .attr('x', 450)\n      .attr('y', function(){\n        return 80+(i*24.8);\n      })\n      .style('fill', '#000')\n      .style('font-size', '9px');\n\n      // col 4 bar\n      d3.select('#col4bar'+i)\n      .attr('opacity', 1)\n      .transition()\n      .duration(200)\n      .attr('width', function(){\n        var val = d.vaccine_acceptance_percent;\n        if(d.vaccine_acceptance_percent>100){\n          val = 100\n        } \n        if(isNaN(val)){ return 0} else { return 68*(val/100) }\n      });\n      \n      d3.select('#col4bg'+i)\n      .attr('opacity', 1);\n\n      var dayFormat = d3.timeFormat(\"%b %d\");\n      // col 5 val\n      row.append('text')\n      .attr('class','tablerow')\n      .text(function(){\n        var val = (d.total_vaccinations);\n        if((isNaN(val))||(val==0)){ return ''} else { return nFormatter(val) }\n      })\n      .style('text-anchor', 'end')\n      .attr('x', 572)\n      .attr('y', function(){\n        return 80+(i*24.8);\n      })\n      .style('fill', '#000')\n      .style('font-size', '9px');\n      \n      // col 6 val\n      row.append('text')\n      .attr('class','tablerow')\n      .text(function(){\n        var val = (d.data_updated);\n        if((val)){ return dayFormat(val)} else { return '' }\n      })\n      .style('text-anchor', 'end')\n      .attr('x', 620)\n      .attr('y', function(){\n        return 80+(i*24.8);\n      })\n      .style('fill', '#000')\n      .style('font-size', '9px');\n      \n      i++;\n      \n      await timer(5);\n\n    }\n\n    d3.selectAll('.row').style('cursor', function(d,i){\n      var textNodes = d3.select(this).selectAll('text').nodes();\n      if(textNodes.length>0) { return 'pointer' } else { return 'default' }\n    }).on('click', function(d,i){\n      var country = d3.select(this).select('.table_country_name')\n      ;\n      if(!country.empty()){\n        filter(['Country-'+country.attr('data-id')]);\n      }\n    })\n\n  }\n\n  function createSelects(){\n     // region select\n      $('#regionSelect').select2({\n        data: [{\n          id: 'regions',\n          text: 'IFRC Regions',\n          children: regionOptions\n        },{\n          id: 'countries',\n          text: 'Countries',\n          children: countryOptions\n        }],\n        placeholder: '',\n        scrollAfterSelect: true,\n        renderTemplate: item => item.text || '\\u200B',\n        dropdownParent: $('#regionDrop'),\n        shouldFocusInput: function() {\n        return false;\n      },\n        templateResult: function(data) {\n        var $state = $('<span>' + data.text + '<span>');\n        return $state;\n      }\n      }).on('select2:unselecting', function() {\n          $(this).data('unselecting', true);\n      }).on('select2:opening', function(e) {\n          if ($(this).data('unselecting')) {\n              $(this).removeData('unselecting');\n              e.preventDefault();\n          }\n      });\n\n      $('#regionSelect').on('select2:select', function (e) {\n          var data = e.params.data;\n          filter([data.id]);\n      });\n\n      $('#regionSelect').on('select2:unselect', function (e) {\n        var data = e.params.data;\n        filter([data.id]);\n    });\n\n      // reset locations\n      d3.select('#reset_locations').style('cursor', 'pointer')\n      .on('click', function(){\n        filter('clear');\n      }); \n\n      // bubble map select color by\n      $('#colorSelect').select2({\n        scrollAfterSelect: true,\n        minimumResultsForSearch: -1,\n        renderTemplate: item => item.text || '\\u200B',\n        dropdownParent: $('#regionDrop'),\n        shouldFocusInput: function() {\n        return false;\n      },\n        templateResult: function(data) {\n        var $state = $('<span>' + data.text + '<span>');\n        return $state;\n      }\n      }).on('select2:select', function(e) {\n        var d = e.params.data;\n        options.bubble_chart_color_by = d.id;\n        updateBubblechart(data, options, filter);\n      });\n\n      // bubble map select y-axis\n      $('#ySelect').select2({\n        scrollAfterSelect: true,\n        minimumResultsForSearch: -1,\n        renderTemplate: item => item.text || '\\u200B',\n        dropdownParent: $('#regionDrop'),\n        shouldFocusInput: function() {\n        return false;\n      },\n        templateResult: function(data) {\n        var $state = $('<span>' + data.text + '<span>');\n        return $state;\n      }\n      }).on('select2:select', function(e) {\n        var d = e.params.data;\n        options.bubble_chart_y_axis = d.id;\n        updateBubblechart(data, options, filter);\n      });\n\n  }\n\n  function handleSelectLength(){\n    var values = $('#regionSelect').select2('data');\n    // handle height for many selections\n    var select2HeightRatio = $('#regionSelectContainer').width()/$('#regionSelectContainer').height();\n    if(select2HeightRatio<10){\n      $('.select2-selection__choice').hide();\n      $('.select2-search__field').attr('placeholder', values.length+' LOCATIONS SELECTED' ).css('width', '100%')\n    } else {\n      $('.select2-search__field').attr('placeholder', '' );\n      $('.select2-selection__choice').show();\n    }\n  }\n\n  useEffect(() => {\n    init();\n  }, [])\n\n\n  const selectStyle = {\n    control: (base, state) => ({\n      ...base,\n      border: '1px solid #D8D8D8',\n      boxShadow: 'none',\n      '&:hover': {\n          border: '1px solid #D8D8D8',\n      }\n  })\n  };\n\n  return (\n    <div>\n      <div id=\"loaderDiv\">\n        <div id=\"loaderText\">{loaderText}</div>\n        <div id=\"loaderBar\">\n          <div id=\"loaderProgress\" style={{width: progress*100+'%'}}></div>\n        </div>\n      </div>\n\n      <div id=\"regionSelectContainer\">\n        <select id=\"regionSelect\" className=\"js-example-responsive\" name=\"region[]\" multiple=\"multiple\"></select>\n        <div id=\"regionDrop\"></div>\n      </div>\n\n      <div id=\"bubbleSelectContainer\">\n        <div id=\"colorSelectContainer\">Color by&nbsp;&nbsp;\n        <select id=\"colorSelect\" className=\"js-example-responsive\" name=\"colorby[]\" defaultValue=\"hdi\">\n          <option value=\"region\">IFRC region</option>\n          <option value=\"hdi\">Human Development Index (HDI)</option>\n          <option value=\"inform-severity\">INFORM Severity Index</option>\n        </select>\n        <div id=\"colorDrop\"></div>\n        </div>\n        <div id=\"ySelectContainer\">\n          y-Axis&nbsp;&nbsp;\n        <select id=\"ySelect\" className=\"js-example-responsive\" name=\"yaxis[]\">\n          <option value=\"percent-vaccinated-at-least-1-dose\">% vaccinated at least 1 dose</option>\n          <option value=\"percent-fully-vaccinated\">% fully vaccinated</option>\n          <option value=\"percent-vaccine-acceptance\">% vaccine acceptance</option>\n        </select>\n        <div id=\"yDrop\"></div>\n        </div>\n      </div>\n\n\n    <div id=\"svg_container\" className=\"App\">\n\n    </div>\n    <div id=\"map_div_outer\">\n      <div id=\"map_div\">\n      </div>\n    </div>\n    \n    <div id=\"footer\">Data Sources - <a href=\"https://covid19.who.int/info/\" target=\"_blank\">WHO Daily cases and deaths by date, vaccination data</a>, <a href=\"https://github.com/owid/covid-19-data/tree/master/public/data/vaccinations\" target=\"_blank\">OWID vaccinations csv</a></div>\n\n    </div>\n  );\n}\n\nfunction parse(p){\n  if(isNaN(p)){\n    return 0\n  } else {\n    return p;\n  }\n}\n\nexport default App;\n\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}