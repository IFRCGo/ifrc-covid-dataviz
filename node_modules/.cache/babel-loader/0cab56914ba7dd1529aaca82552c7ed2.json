{"ast":null,"code":"import * as d3 from \"d3\";\nimport moment from 'moment';\nimport colors from './colors';\nimport { filter } from './App';\nimport mapboxgl from '!mapbox-gl'; // eslint-disable-line import/no-webpack-loader-syntax\n\nimport 'mapbox-gl/dist/mapbox-gl.css';\nmapboxgl.accessToken = 'pk.eyJ1IjoiZ28taWZyYyIsImEiOiJjams3b2ZhZWswMGFvM3hxeHp2ZHFhOTRrIn0._pqO9OQ2iNeDGrpopJNjpg';\nexport function createMap(data, options, filter) {\n  console.log('createMap');\n  var map = new mapboxgl.Map({\n    container: 'map_div',\n    // container ID\n    style: 'mapbox://styles/go-ifrc/ck9tz6f150ub11ip8j97wrsww',\n    // style URL\n    center: [8, 22],\n    // starting position [lng, lat]\n    zoom: -0.01 // starting zoom\n\n  });\n  map.setRenderWorldCopies(false);\n  map.addControl(new mapboxgl.NavigationControl());\n  console.log(data);\n  var container = map.getCanvasContainer();\n  var svg = d3.select(container).append(\"svg\").attr(\"width\", \"100%\").attr(\"height\", \"500\").style(\"position\", \"absolute\").style(\"z-index\", 2); // map.on('load', function (e) {\n  //     map.setLayerZoomRange('countries', -1, 23);\n  //     map.setLayoutProperty(\n  //         'countries',\n  //         'visibility',\n  //         'visible'\n  //         );\n  // }).\n  // map.on('mousemove', function (e) {\n  //     var features = map.queryRenderedFeatures(e.point);\n  //     // Limit the number of properties we're displaying for\n  //     // legibility and performance\n  //     var displayProperties = [\n  //     'type',\n  //     'properties',\n  //     'id',\n  //     'layer',\n  //     'source',\n  //     'sourceLayer',\n  //     'state'\n  //     ];\n  //     var displayFeatures = features.map(function (feat) {\n  //     var displayFeat = {};\n  //     displayProperties.forEach(function (prop) {\n  //     displayFeat[prop] = feat[prop];\n  //     });\n  //     return displayFeat;\n  //     });\n  //     console.log(JSON.stringify(\n  //     displayFeatures,\n  //     null,\n  //     2\n  //     ))\n  //     })\n}\nexport default createMap;","map":{"version":3,"sources":["/Users/matthewsmawfield/www/ifrc-covid-dataviz/src/Map.js"],"names":["d3","moment","colors","filter","mapboxgl","accessToken","createMap","data","options","console","log","map","Map","container","style","center","zoom","setRenderWorldCopies","addControl","NavigationControl","getCanvasContainer","svg","select","append","attr"],"mappings":"AAAA,OAAO,KAAKA,EAAZ,MAAoB,IAApB;AACA,OAAOC,MAAP,MAAmB,QAAnB;AACA,OAAOC,MAAP,MAAmB,UAAnB;AACA,SAAQC,MAAR,QAAqB,OAArB;AACA,OAAOC,QAAP,MAAqB,YAArB,C,CAAmC;;AACnC,OAAO,8BAAP;AAEAA,QAAQ,CAACC,WAAT,GAAuB,2FAAvB;AAEA,OAAO,SAASC,SAAT,CAAmBC,IAAnB,EAAyBC,OAAzB,EAAkCL,MAAlC,EAA0C;AAC7CM,EAAAA,OAAO,CAACC,GAAR,CAAY,WAAZ;AAEA,MAAIC,GAAG,GAAG,IAAIP,QAAQ,CAACQ,GAAb,CAAiB;AACvBC,IAAAA,SAAS,EAAE,SADY;AACD;AACtBC,IAAAA,KAAK,EAAE,mDAFgB;AAEqC;AAC5DC,IAAAA,MAAM,EAAE,CAAC,CAAD,EAAI,EAAJ,CAHe;AAGN;AACjBC,IAAAA,IAAI,EAAE,CAAC,IAJgB,CAIX;;AAJW,GAAjB,CAAV;AAOAL,EAAAA,GAAG,CAACM,oBAAJ,CAAyB,KAAzB;AACAN,EAAAA,GAAG,CAACO,UAAJ,CAAe,IAAId,QAAQ,CAACe,iBAAb,EAAf;AAEAV,EAAAA,OAAO,CAACC,GAAR,CAAYH,IAAZ;AAEA,MAAIM,SAAS,GAAGF,GAAG,CAACS,kBAAJ,EAAhB;AAEA,MAAIC,GAAG,GAAGrB,EAAE,CACXsB,MADS,CACFT,SADE,EAETU,MAFS,CAEF,KAFE,EAGTC,IAHS,CAGJ,OAHI,EAGK,MAHL,EAITA,IAJS,CAIJ,QAJI,EAIM,KAJN,EAKTV,KALS,CAKH,UALG,EAKS,UALT,EAMTA,KANS,CAMH,SANG,EAMQ,CANR,CAAV,CAjB6C,CA2B7C;AACA;AACA;AACA;AACA;AACA;AACA;AAIA;AAGA;AACA;AAEA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACH;AAED,eAAeR,SAAf","sourcesContent":["import * as d3 from \"d3\";\nimport moment from 'moment';\nimport colors from './colors';\nimport {filter} from './App';\nimport mapboxgl from '!mapbox-gl'; // eslint-disable-line import/no-webpack-loader-syntax\nimport 'mapbox-gl/dist/mapbox-gl.css';\n\nmapboxgl.accessToken = 'pk.eyJ1IjoiZ28taWZyYyIsImEiOiJjams3b2ZhZWswMGFvM3hxeHp2ZHFhOTRrIn0._pqO9OQ2iNeDGrpopJNjpg';\n\nexport function createMap(data, options, filter) {\n    console.log('createMap');\n\n    var map = new mapboxgl.Map({\n        container: 'map_div', // container ID\n        style: 'mapbox://styles/go-ifrc/ck9tz6f150ub11ip8j97wrsww', // style URL\n        center: [8, 22], // starting position [lng, lat]\n        zoom: -0.01 // starting zoom\n    });\n\n    map.setRenderWorldCopies(false);\n    map.addControl(new mapboxgl.NavigationControl());\n    \n    console.log(data);\n\n    var container = map.getCanvasContainer();\n    \n    var svg = d3\n    .select(container)\n    .append(\"svg\")\n    .attr(\"width\", \"100%\")\n    .attr(\"height\", \"500\")\n    .style(\"position\", \"absolute\")\n    .style(\"z-index\", 2);\n    \n\n\n    // map.on('load', function (e) {\n    //     map.setLayerZoomRange('countries', -1, 23);\n    //     map.setLayoutProperty(\n    //         'countries',\n    //         'visibility',\n    //         'visible'\n    //         );\n\n\n\n    // }).\n\n\n    // map.on('mousemove', function (e) {\n    //     var features = map.queryRenderedFeatures(e.point);\n         \n    //     // Limit the number of properties we're displaying for\n    //     // legibility and performance\n\n\n    //     var displayProperties = [\n    //     'type',\n    //     'properties',\n    //     'id',\n    //     'layer',\n    //     'source',\n    //     'sourceLayer',\n    //     'state'\n    //     ];\n         \n    //     var displayFeatures = features.map(function (feat) {\n    //     var displayFeat = {};\n    //     displayProperties.forEach(function (prop) {\n    //     displayFeat[prop] = feat[prop];\n    //     });\n    //     return displayFeat;\n    //     });\n         \n    //     console.log(JSON.stringify(\n    //     displayFeatures,\n    //     null,\n    //     2\n    //     ))\n    //     })\n}\n\nexport default createMap;\n"]},"metadata":{},"sourceType":"module"}