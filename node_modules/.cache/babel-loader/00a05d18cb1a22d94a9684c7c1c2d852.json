{"ast":null,"code":"import * as d3 from \"d3\";\nimport { drawTimechart, updateTimechart } from './Timechart';\nimport { updateRegionchart } from './Regionchart';\nimport colors from './colors';\nimport tippy from 'tippy.js';\nimport 'tippy.js/dist/svg-arrow.css';\nimport 'tippy.js/themes/light.css';\nimport { jsPDF } from \"jspdf\";\nimport html2canvas from 'html2canvas';\nconst selectedToggle = '#595454';\nconst unselectedToggle = '#EAEAEA';\nconst unselectedToggleText = '#000';\nconst selectedToggleText = '#FFF';\n\nfunction Layout(svg, options, data, filter, updateTable, updateMap) {\n  // vaccine info\n  d3.select('#vaccine_tooltip').attr('opacity', 0).style('display', 'none');\n  d3.select('#vaccine_info path').attr('fill', colors.black);\n  svg.select('#vaccine_info').style('cursor', 'pointer').on('mouseover', function (event, bd) {\n    d3.select('#svg_container').style('z-index', 10);\n    d3.select('#vaccine_tooltip').style('display', 'inline').transition().duration(500).attr('opacity', 1);\n    d3.select('#vaccine_info path').transition().duration(200).attr('fill', colors.blue);\n  }).on('mouseout', function (event, d) {\n    d3.select('#svg_container').style('z-index', 1);\n    d3.select('#vaccine_tooltip').style('display', 'none').attr('opacity', 0);\n    d3.select('#vaccine_info path').transition().duration(500).attr('fill', colors.black);\n  }); // region chart toggle\n\n  svg.select('#region_remove_filter').attr('opacity', 0).style('cursor', 'pointer').on('click', function (d, i) {\n    options.region_filter = [];\n    filter('clear-region');\n  });\n  svg.select('#region_switch').style('cursor', 'pointer').on('click', function (d, i) {\n    if (options.region_switch == 'total') {\n      options.region_switch = 'per100';\n      d3.select('#region_switch_toggle').transition().duration(200).attr('x', 15.1);\n    } else {\n      options.region_switch = 'total';\n      d3.select('#region_switch_toggle').transition().duration(200).attr('x', 3.1);\n    }\n\n    updateRegionchart(options, data);\n  });\n  svg.select('#region-chart-toggle #region-chart-toggle-cases').style('cursor', 'pointer').on('click', function (d) {\n    if (options.region_chart_toggle === 'cases') return false;\n    options.region_chart_toggle = 'cases';\n    svg.selectAll('#region-chart-toggle rect').attr('fill', unselectedToggle);\n    svg.selectAll('#region-chart-toggle text').attr('fill', unselectedToggleText);\n    svg.select('#region-chart-toggle-cases rect').attr('fill', selectedToggle);\n    svg.select('#region-chart-toggle-cases text').attr('fill', selectedToggleText);\n    updateRegionchart(options, data);\n  });\n  svg.select('#region-chart-toggle #region-chart-toggle-deaths').style('cursor', 'pointer').on('click', function (d) {\n    if (options.region_chart_toggle === 'deaths') return false;\n    options.region_chart_toggle = 'deaths';\n    svg.selectAll('#region-chart-toggle rect').attr('fill', unselectedToggle);\n    svg.selectAll('#region-chart-toggle text').attr('fill', unselectedToggleText);\n    svg.select('#region-chart-toggle-deaths rect').attr('fill', selectedToggle);\n    svg.select('#region-chart-toggle-deaths text').attr('fill', selectedToggleText);\n    updateRegionchart(options, data);\n  });\n  svg.select('#region-chart-toggle #region-chart-toggle-vaccines').style('cursor', 'pointer').on('click', function (d) {\n    if (options.region_chart_toggle === 'vaccines') return false;\n    options.region_chart_toggle = 'vaccines';\n    svg.selectAll('#region-chart-toggle rect').attr('fill', unselectedToggle);\n    svg.selectAll('#region-chart-toggle text').attr('fill', unselectedToggleText);\n    svg.select('#region-chart-toggle-vaccines rect').attr('fill', selectedToggle);\n    svg.select('#region-chart-toggle-vaccines text').attr('fill', selectedToggleText);\n    updateRegionchart(options, data);\n  }); // map toggle\n\n  svg.select('#map-toggle #map-toggle-bi-weekly-change').style('cursor', 'pointer').on('click', function (d) {\n    if (options.map_toggle === 'bi-weekly-change') return false;\n    options.map_toggle = 'bi-weekly-change';\n    svg.selectAll('#map-toggle rect').attr('fill', unselectedToggle);\n    svg.selectAll('#map-toggle text').attr('fill', unselectedToggleText);\n    svg.select('#map-toggle-bi-weekly-change rect').attr('fill', selectedToggle);\n    svg.select('#map-toggle-bi-weekly-change text').attr('fill', selectedToggleText); // update map legend\n\n    updateMap(data, options, 700);\n  });\n  svg.select('#map-toggle #map-toggle-cases').style('cursor', 'pointer').on('click', function (d) {\n    if (options.map_toggle === 'cases') return false;\n    options.map_toggle = 'cases';\n    svg.selectAll('#map-toggle rect').attr('fill', unselectedToggle);\n    svg.selectAll('#map-toggle text').attr('fill', unselectedToggleText);\n    svg.select('#map-toggle-cases rect').attr('fill', selectedToggle);\n    svg.select('#map-toggle-cases text').attr('fill', selectedToggleText); // update map legend\n\n    updateMap(data, options, 700);\n  });\n  svg.select('#map-toggle #map-toggle-deaths').style('cursor', 'pointer').on('click', function (d) {\n    if (options.map_toggle === 'deaths') return false;\n    options.map_toggle = 'deaths';\n    svg.selectAll('#map-toggle rect').attr('fill', unselectedToggle);\n    svg.selectAll('#map-toggle text').attr('fill', unselectedToggleText);\n    svg.select('#map-toggle-deaths rect').attr('fill', selectedToggle);\n    svg.select('#map-toggle-deaths text').attr('fill', selectedToggleText); // update map legend\n\n    updateMap(data, options, 700);\n  });\n  svg.select('#map-toggle #map-toggle-percent-fully-vaccinated').style('cursor', 'pointer').on('click', function (d) {\n    if (options.map_toggle === 'percent-fully-vaccinated') return false;\n    options.map_toggle = 'percent-fully-vaccinated';\n    svg.selectAll('#map-toggle rect').attr('fill', unselectedToggle);\n    svg.selectAll('#map-toggle text').attr('fill', unselectedToggleText);\n    svg.select('#map-toggle-percent-fully-vaccinated rect').attr('fill', selectedToggle);\n    svg.select('#map-toggle-percent-fully-vaccinated text').attr('fill', selectedToggleText); // update map legend\n\n    updateMap(data, options, 700);\n  });\n  svg.select('#map-toggle #map-toggle-percent-vaccine-acceptance').style('cursor', 'pointer').on('click', function (d) {\n    if (options.map_toggle === 'percent-vaccine-acceptance') return false;\n    options.map_toggle = 'percent-vaccine-acceptance';\n    svg.selectAll('#map-toggle rect').attr('fill', unselectedToggle);\n    svg.selectAll('#map-toggle text').attr('fill', unselectedToggleText);\n    svg.select('#map-toggle-percent-vaccine-acceptance rect').attr('fill', selectedToggle);\n    svg.select('#map-toggle-percent-vaccine-acceptance text').attr('fill', selectedToggleText); // update map legend\n\n    updateMap(data, options, 700);\n  }); // time chart type \n\n  svg.select('#timechart-type-toggle #timechart-type-toggle-cumulative').style('cursor', 'pointer').on('click', function (d) {\n    if (options.timeline_type === 'cumulative') return false;\n    options.timeline_type = 'cumulative';\n    svg.selectAll('#timechart-type-toggle rect').attr('fill', unselectedToggle);\n    svg.selectAll('#timechart-type-toggle polyline').attr('stroke', unselectedToggleText);\n    svg.select('#timechart-type-toggle-cumulative rect').attr('fill', selectedToggle);\n    svg.select('#timechart-type-toggle-cumulative polyline').attr('stroke', selectedToggleText);\n    svg.selectAll('#timechart-type-toggle-stacked polygon').attr('fill', selectedToggle);\n    updateTimechart(data, options);\n  });\n  tippy('#timechart-type-toggle-cumulative', {\n    content: 'Cumulative',\n    duration: 0,\n    placement: 'bottom',\n    theme: 'light',\n    arrow: true,\n    delay: [500, 200]\n  });\n  svg.select('#timechart-type-toggle #timechart-type-toggle-non-cumulative').style('cursor', 'pointer').on('click', function (d) {\n    if (options.timeline_type === 'non-cumulative') return false;\n    options.timeline_type = 'non-cumulative';\n    svg.selectAll('#timechart-type-toggle rect').attr('fill', unselectedToggle);\n    svg.selectAll('#timechart-type-toggle polyline').attr('stroke', unselectedToggleText);\n    svg.select('#timechart-type-toggle-non-cumulative rect').attr('fill', selectedToggle);\n    svg.select('#timechart-type-toggle-non-cumulative polyline').attr('stroke', selectedToggleText);\n    svg.selectAll('#timechart-type-toggle-stacked polygon').attr('fill', selectedToggle);\n    updateTimechart(data, options);\n  });\n  tippy('#timechart-type-toggle-non-cumulative', {\n    content: 'Non-cumulative',\n    duration: 0,\n    placement: 'bottom',\n    theme: 'light',\n    arrow: true,\n    delay: [500, 200]\n  });\n  svg.select('#timechart-type-toggle #timechart-type-toggle-stacked').style('cursor', 'pointer').on('click', function (d) {\n    if (options.timeline_type === 'stacked') return false;\n    options.timeline_type = 'stacked';\n    svg.selectAll('#timechart-type-toggle rect').attr('fill', unselectedToggle);\n    svg.selectAll('#timechart-type-toggle polyline').attr('stroke', unselectedToggleText);\n    svg.select('#timechart-type-toggle-stacked rect').attr('fill', selectedToggle);\n    svg.select('#timechart-type-toggle-stacked polyline').attr('stroke', selectedToggleText);\n    svg.selectAll('#timechart-type-toggle-stacked polygon').attr('fill', selectedToggleText);\n    updateTimechart(data, options);\n  });\n  tippy('#timechart-type-toggle-stacked', {\n    content: 'Stacked 100%',\n    duration: 0,\n    placement: 'bottom',\n    theme: 'light',\n    arrow: true,\n    delay: [500, 200]\n  }); // time chart frequency toggle\n\n  svg.select('#timechart-frequency-toggle #timechart-frequency-toggle-day').style('cursor', 'pointer').on('click', function (d) {\n    if (options.timeline_frequency === 'day') return false;\n    options.timeline_frequency = 'day';\n    svg.selectAll('#timechart-frequency-toggle rect').attr('fill', unselectedToggle);\n    svg.selectAll('#timechart-frequency-toggle text').attr('fill', unselectedToggleText);\n    svg.select('#timechart-frequency-toggle-day rect').attr('fill', selectedToggle);\n    svg.select('#timechart-frequency-toggle-day text').attr('fill', selectedToggleText);\n    svg.select('#tooltip_frequency tspan').attr('text-anchor', 'end').attr('dx', 20).text('DAY');\n    drawTimechart(data, options);\n  });\n  svg.select('#timechart-frequency-toggle #timechart-frequency-toggle-week').style('cursor', 'pointer').on('click', function (d) {\n    if (options.timeline_frequency === 'week') return false;\n    options.timeline_frequency = 'week';\n    svg.selectAll('#timechart-frequency-toggle rect').attr('fill', unselectedToggle);\n    svg.selectAll('#timechart-frequency-toggle text').attr('fill', unselectedToggleText);\n    svg.select('#timechart-frequency-toggle-week rect').attr('fill', selectedToggle);\n    svg.select('#tooltip_frequency tspan').attr('text-anchor', 'end').attr('dx', 20).text('WEEK');\n    svg.select('#timechart-frequency-toggle-week text').attr('fill', selectedToggleText);\n    drawTimechart(data, options);\n  });\n  svg.select('#timechart-frequency-toggle #timechart-frequency-toggle-month').style('cursor', 'pointer').on('click', function (d) {\n    if (options.timeline_frequency === 'month') return false;\n    options.timeline_frequency = 'month';\n    svg.selectAll('#timechart-frequency-toggle rect').attr('fill', unselectedToggle);\n    svg.selectAll('#timechart-frequency-toggle text').attr('fill', unselectedToggleText);\n    svg.select('#timechart-frequency-toggle-month rect').attr('fill', selectedToggle);\n    svg.select('#tooltip_frequency tspan').attr('text-anchor', 'end').attr('dx', 20).text('MONTH');\n    svg.select('#timechart-frequency-toggle-month text').attr('fill', selectedToggleText);\n    drawTimechart(data, options);\n  }); // HDI toggle\n\n  svg.select('#hdi_remove_filter').attr('opacity', 0).style('cursor', 'pointer').on('click', function (d, i) {\n    d3.selectAll('#hdi-toggle-very-high, #hdi-toggle-high, #hdi-toggle-medium, #hdi-toggle-low').attr('opacity', 1);\n    filter('clear-hdi');\n  });\n  svg.select('#hdi-toggle #hdi-toggle-very-high').style('cursor', 'pointer').on('click', function (d) {\n    toggle(options.hdi_filter, 'very-high');\n\n    if (options.hdi_filter.length === 4) {\n      options.hdi_filter = [];\n      d3.selectAll('#hdi-toggle-very-high, #hdi-toggle-high, #hdi-toggle-medium, #hdi-toggle-low').attr('opacity', 1);\n    } else if (options.hdi_filter.length === 0) {\n      d3.selectAll('#hdi-toggle-very-high, #hdi-toggle-high, #hdi-toggle-medium, #hdi-toggle-low').attr('opacity', 1);\n    } else if (options.hdi_filter.length > 0) {\n      d3.selectAll('#hdi-toggle-very-high, #hdi-toggle-high, #hdi-toggle-medium, #hdi-toggle-low').attr('opacity', 0.3);\n    }\n\n    if (options.hdi_filter.length > 0) {\n      options.hdi_filter.forEach(function (d, i) {\n        d3.select('#hdi-toggle-' + d).attr('opacity', 1);\n      });\n    }\n\n    filter('hdi');\n  });\n  svg.select('#hdi-toggle #hdi-toggle-high').style('cursor', 'pointer').on('click', function (d) {\n    toggle(options.hdi_filter, 'high');\n\n    if (options.hdi_filter.length === 4) {\n      options.hdi_filter = [];\n      d3.selectAll('#hdi-toggle-very-high, #hdi-toggle-high, #hdi-toggle-medium, #hdi-toggle-low').attr('opacity', 1);\n    } else if (options.hdi_filter.length === 0) {\n      d3.selectAll('#hdi-toggle-very-high, #hdi-toggle-high, #hdi-toggle-medium, #hdi-toggle-low').attr('opacity', 1);\n    } else if (options.hdi_filter.length > 0) {\n      d3.selectAll('#hdi-toggle-very-high, #hdi-toggle-high, #hdi-toggle-medium, #hdi-toggle-low').attr('opacity', 0.3);\n    }\n\n    if (options.hdi_filter.length > 0) {\n      options.hdi_filter.forEach(function (d, i) {\n        d3.select('#hdi-toggle-' + d).attr('opacity', 1);\n      });\n    }\n\n    filter('hdi');\n  });\n  svg.select('#hdi-toggle #hdi-toggle-medium').style('cursor', 'pointer').on('click', function (d) {\n    toggle(options.hdi_filter, 'medium');\n\n    if (options.hdi_filter.length === 4) {\n      options.hdi_filter = [];\n      d3.selectAll('#hdi-toggle-very-high, #hdi-toggle-high, #hdi-toggle-medium, #hdi-toggle-low').attr('opacity', 1);\n    } else if (options.hdi_filter.length === 0) {\n      d3.selectAll('#hdi-toggle-very-high, #hdi-toggle-high, #hdi-toggle-medium, #hdi-toggle-low').attr('opacity', 1);\n    } else if (options.hdi_filter.length > 0) {\n      d3.selectAll('#hdi-toggle-very-high, #hdi-toggle-high, #hdi-toggle-medium, #hdi-toggle-low').attr('opacity', 0.3);\n    }\n\n    if (options.hdi_filter.length > 0) {\n      options.hdi_filter.forEach(function (d, i) {\n        d3.select('#hdi-toggle-' + d).attr('opacity', 1);\n      });\n    }\n\n    filter('hdi');\n  });\n  svg.select('#hdi-toggle #hdi-toggle-low').style('cursor', 'pointer').on('click', function (d) {\n    toggle(options.hdi_filter, 'low');\n\n    if (options.hdi_filter.length === 4) {\n      options.hdi_filter = [];\n      d3.selectAll('#hdi-toggle-very-high, #hdi-toggle-high, #hdi-toggle-medium, #hdi-toggle-low').attr('opacity', 1);\n    } else if (options.hdi_filter.length === 0) {\n      d3.selectAll('#hdi-toggle-very-high, #hdi-toggle-high, #hdi-toggle-medium, #hdi-toggle-low').attr('opacity', 1);\n    } else if (options.hdi_filter.length > 0) {\n      d3.selectAll('#hdi-toggle-very-high, #hdi-toggle-high, #hdi-toggle-medium, #hdi-toggle-low').attr('opacity', 0.3);\n    }\n\n    if (options.hdi_filter.length > 0) {\n      options.hdi_filter.forEach(function (d, i) {\n        d3.select('#hdi-toggle-' + d).attr('opacity', 1);\n      });\n    }\n\n    filter('hdi');\n  }); // inform severity toggle\n\n  svg.select('#inform_remove_filter').attr('opacity', 0).style('cursor', 'pointer').on('click', function (d, i) {\n    d3.selectAll('#inform-toggle-very-high, #inform-toggle-high, #inform-toggle-medium, #inform-toggle-low, #inform-toggle-no-score').attr('opacity', 1);\n    filter('clear-inform');\n  });\n  svg.select('#inform-toggle #inform-toggle-no-score').style('cursor', 'pointer').on('click', function (d) {\n    toggle(options.inform_filter, 'no-score');\n\n    if (options.inform_filter.length === 5) {\n      options.inform_filter = [];\n      d3.selectAll('#inform-toggle-very-high, #inform-toggle-high, #inform-toggle-medium, #inform-toggle-low, #inform-toggle-no-score').attr('opacity', 1);\n    } else if (options.inform_filter.length === 0) {\n      d3.selectAll('#inform-toggle-very-high, #inform-toggle-high, #inform-toggle-medium, #inform-toggle-low, #inform-toggle-no-score').attr('opacity', 1);\n    } else if (options.inform_filter.length > 0) {\n      d3.selectAll('#inform-toggle-very-high, #inform-toggle-high, #inform-toggle-medium, #inform-toggle-low, #inform-toggle-no-score').attr('opacity', 0.3);\n    }\n\n    if (options.inform_filter.length > 0) {\n      options.inform_filter.forEach(function (d, i) {\n        d3.select('#inform-toggle-' + d).attr('opacity', 1);\n      });\n    }\n\n    filter('inform');\n  });\n  svg.select('#inform-toggle #inform-toggle-low').style('cursor', 'pointer').on('click', function (d) {\n    toggle(options.inform_filter, 'low');\n\n    if (options.inform_filter.length === 5) {\n      options.inform_filter = [];\n      d3.selectAll('#inform-toggle-very-high, #inform-toggle-high, #inform-toggle-medium, #inform-toggle-low, #inform-toggle-no-score').attr('opacity', 1);\n    } else if (options.inform_filter.length === 0) {\n      d3.selectAll('#inform-toggle-very-high, #inform-toggle-high, #inform-toggle-medium, #inform-toggle-low, #inform-toggle-no-score').attr('opacity', 1);\n    } else if (options.inform_filter.length > 0) {\n      d3.selectAll('#inform-toggle-very-high, #inform-toggle-high, #inform-toggle-medium, #inform-toggle-low, #inform-toggle-no-score').attr('opacity', 0.3);\n    }\n\n    if (options.inform_filter.length > 0) {\n      options.inform_filter.forEach(function (d, i) {\n        d3.select('#inform-toggle-' + d).attr('opacity', 1);\n      });\n    }\n\n    filter('inform');\n  });\n  svg.select('#inform-toggle #inform-toggle-medium').style('cursor', 'pointer').on('click', function (d) {\n    toggle(options.inform_filter, 'medium');\n\n    if (options.inform_filter.length === 5) {\n      options.inform_filter = [];\n      d3.selectAll('#inform-toggle-very-high, #inform-toggle-high, #inform-toggle-medium, #inform-toggle-low, #inform-toggle-no-score').attr('opacity', 1);\n    } else if (options.inform_filter.length === 0) {\n      d3.selectAll('#inform-toggle-very-high, #inform-toggle-high, #inform-toggle-medium, #inform-toggle-low, #inform-toggle-no-score').attr('opacity', 1);\n    } else if (options.inform_filter.length > 0) {\n      d3.selectAll('#inform-toggle-very-high, #inform-toggle-high, #inform-toggle-medium, #inform-toggle-low, #inform-toggle-no-score').attr('opacity', 0.3);\n    }\n\n    if (options.inform_filter.length > 0) {\n      options.inform_filter.forEach(function (d, i) {\n        d3.select('#inform-toggle-' + d).attr('opacity', 1);\n      });\n    }\n\n    filter('inform');\n  });\n  svg.select('#inform-toggle #inform-toggle-high').style('cursor', 'pointer').on('click', function (d) {\n    toggle(options.inform_filter, 'high');\n\n    if (options.inform_filter.length === 5) {\n      options.inform_filter = [];\n      d3.selectAll('#inform-toggle-very-high, #inform-toggle-high, #inform-toggle-medium, #inform-toggle-low, #inform-toggle-no-score').attr('opacity', 1);\n    } else if (options.inform_filter.length === 0) {\n      d3.selectAll('#inform-toggle-very-high, #inform-toggle-high, #inform-toggle-medium, #inform-toggle-low, #inform-toggle-no-score').attr('opacity', 1);\n    } else if (options.inform_filter.length > 0) {\n      d3.selectAll('#inform-toggle-very-high, #inform-toggle-high, #inform-toggle-medium, #inform-toggle-low, #inform-toggle-no-score').attr('opacity', 0.3);\n    }\n\n    if (options.inform_filter.length > 0) {\n      options.inform_filter.forEach(function (d, i) {\n        d3.select('#inform-toggle-' + d).attr('opacity', 1);\n      });\n    }\n\n    filter('inform');\n  });\n  svg.select('#inform-toggle #inform-toggle-very-high').style('cursor', 'pointer').on('click', function (d) {\n    toggle(options.inform_filter, 'very-high');\n\n    if (options.inform_filter.length === 5) {\n      options.inform_filter = [];\n      d3.selectAll('#inform-toggle-very-high, #inform-toggle-high, #inform-toggle-medium, #inform-toggle-low, #inform-toggle-no-score').attr('opacity', 1);\n    } else if (options.inform_filter.length === 0) {\n      d3.selectAll('#inform-toggle-very-high, #inform-toggle-high, #inform-toggle-medium, #inform-toggle-low, #inform-toggle-no-score').attr('opacity', 1);\n    } else if (options.inform_filter.length > 0) {\n      d3.selectAll('#inform-toggle-very-high, #inform-toggle-high, #inform-toggle-medium, #inform-toggle-low, #inform-toggle-no-score').attr('opacity', 0.3);\n    }\n\n    if (options.inform_filter.length > 0) {\n      options.inform_filter.forEach(function (d, i) {\n        d3.select('#inform-toggle-' + d).attr('opacity', 1);\n      });\n    }\n\n    filter('inform');\n  }); // tabs\n\n  d3.select('#additional-indicators-tab').attr('opacity', 0).select('#additional-indicators-tab-content').attr('display', 'none');\n  d3.select('#vac-tab').attr('opacity', 1).select('#vac-tab-content').attr('display', 'inline');\n  d3.select('#bubblechart-tab').attr('opacity', 0).selectAll('#bubblechart, #bubblechart-tab-content').attr('display', 'none');\n  d3.select('#bubbleSelectContainer').style('display', 'none');\n  svg.select('#tabs #vaccination-tab').style('cursor', 'pointer').on('click', function (d) {\n    if (options.tab_toggle === 'vaccination-data') return false;\n    options.tab_toggle = 'vaccination-data';\n    d3.select('#additional-indicators-tab').attr('opacity', 0).select('#additional-indicators-tab-content').attr('display', 'none');\n    d3.select('#vac-tab').attr('opacity', 1).select('#vac-tab-content').attr('display', 'inline');\n    d3.select('#bubblechart-tab').attr('opacity', 0).selectAll('#bubblechart, #bubblechart-tab-content').attr('display', 'none');\n    svg.selectAll('#tabs rect').attr('fill', unselectedToggle);\n    svg.selectAll('#tabs text').attr('fill', unselectedToggleText);\n    svg.select('#vaccination-tab rect').attr('fill', selectedToggle);\n    svg.select('#vaccination-tab text').attr('fill', selectedToggleText);\n    d3.select('#bubbleSelectContainer').style('display', 'none');\n  });\n  svg.select('#tabs #indicators-tab').style('cursor', 'pointer').on('click', function (d) {\n    if (options.tab_toggle === 'indicators') return false;\n    options.tab_toggle = 'indicators';\n    d3.select('#additional-indicators-tab').attr('opacity', 1).select('#additional-indicators-tab-content').attr('display', 'inline');\n    d3.select('#vac-tab').attr('opacity', 0).select('#vac-tab-content').attr('display', 'none');\n    d3.select('#bubblechart-tab').attr('opacity', 0).selectAll('#bubblechart, #bubblechart-tab-content').attr('display', 'none');\n    svg.selectAll('#tabs rect').attr('fill', unselectedToggle);\n    svg.selectAll('#tabs text').attr('fill', unselectedToggleText);\n    svg.select('#indicators-tab rect').attr('fill', selectedToggle);\n    svg.select('#indicators-tab text').attr('fill', selectedToggleText);\n    d3.select('#bubbleSelectContainer').style('display', 'none');\n  });\n  svg.select('#tabs #bubble-chart-tab').style('cursor', 'pointer').on('click', function (d) {\n    if (options.tab_toggle === 'bubble-chartt') return false;\n    options.tab_toggle = 'bubble-chart';\n    d3.select('#additional-indicators-tab').attr('opacity', 0).select('#additional-indicators-tab-content').attr('display', 'none');\n    d3.select('#vac-tab').attr('opacity', 0).select('#vac-tab-content').attr('display', 'none');\n    d3.select('#bubblechart-tab').attr('opacity', 1).selectAll('#bubblechart, #bubblechart-tab-content').attr('display', 'inline');\n    svg.selectAll('#tabs rect').attr('fill', unselectedToggle);\n    svg.selectAll('#tabs text').attr('fill', unselectedToggleText);\n    svg.select('#bubble-chart-tab rect').attr('fill', selectedToggle);\n    svg.select('#bubble-chart-tab text').attr('fill', selectedToggleText);\n    d3.select('#bubbleSelectContainer').style('display', 'inline-block');\n  }); // time chart mask\n\n  d3.select('#svg defs').append('clipPath').attr('id', 'mask').append('rect').attr('y', 340).attr('height', 590).attr('width', 660).attr('x', 22); // append timechart svg\n\n  const timechartContainer = svg.select('#timechart_container').attr('opacity', 0);\n  const tcSize = {\n    x: timechartContainer.attr('x'),\n    y: timechartContainer.attr('y'),\n    width: timechartContainer.attr('width'),\n    height: timechartContainer.attr('height')\n  };\n  const timechartSvg = svg.append('svg').attr('id', 'timechart_svg').attr('viewBox', '0 0 ' + 2000 + ' ' + tcSize.height).attr('preserveAspectRatio', \"none\").attr('x', tcSize.x).attr('y', tcSize.y).attr('width', tcSize.width).attr('height', tcSize.height);\n  const layer1 = timechartSvg.append('g').attr('id', 'layer1');\n  const timechartBg = timechartSvg.append('g').attr('id', 'layer0');\n  layer1.append('rect').attr('x', 0).attr('y', 0).attr('width', '100%').attr('height', '100%').attr('opacity', 0).style('fill', 'transparent'); // table bars\n\n  var tableRowHeight = 18;\n  var tableBarYOffset = 68;\n\n  for (let i = 0; i < 10; i++) {\n    // col 1 bg\n    d3.select('#vac-tab').append('rect').attr('class', 'col1bg colbg').attr('id', 'col1bg' + i).attr('x', 120).attr('y', function () {\n      return tableBarYOffset + i * 24.8;\n    }).attr('height', tableRowHeight).attr('width', 68).attr('fill', colors.lightgrey); // col 1 bar\n\n    d3.select('#vac-tab').append('rect').attr('class', 'col1bar').attr('id', 'col1bar' + i).attr('x', 120).attr('y', function () {\n      return tableBarYOffset + i * 24.8;\n    }).attr('height', tableRowHeight).attr('width', 0).attr('fill', colors.blue); // col 2 bg\n\n    d3.select('#vac-tab').append('rect').attr('class', 'col2bg colbg').attr('id', 'col2bg' + i).attr('x', 230).attr('y', function () {\n      return tableBarYOffset + i * 24.8;\n    }).attr('height', tableRowHeight).attr('width', 68).attr('fill', colors.lightgrey); // col 2 bar\n\n    d3.select('#vac-tab').append('rect').attr('class', 'col2bar').attr('id', 'col2bar' + i).attr('x', 230).attr('y', function () {\n      return tableBarYOffset + i * 24.8;\n    }).attr('height', tableRowHeight).attr('width', 0).attr('fill', colors.blue); // col 3 bg\n\n    d3.select('#vac-tab').append('rect').attr('class', 'col3bg colbg').attr('id', 'col3bg' + i).attr('x', 340).attr('y', function () {\n      return tableBarYOffset + i * 24.8;\n    }).attr('height', tableRowHeight).attr('width', 68).attr('fill', colors.lightgrey); // col 3 bar\n\n    d3.select('#vac-tab').append('rect').attr('class', 'col3bar').attr('id', 'col3bar' + i).attr('x', 340).attr('y', function () {\n      return tableBarYOffset + i * 24.8;\n    }).attr('height', tableRowHeight).attr('width', 0).attr('fill', colors.blue); // col 4 bg\n\n    d3.select('#vac-tab').append('rect').attr('class', 'col4bg colbg').attr('id', 'col4bg' + i).attr('x', 454).attr('y', function () {\n      return 67 + i * 24.8;\n    }).attr('height', tableRowHeight).attr('width', 68).attr('fill', colors.lightgrey); // col 3 bar\n\n    d3.select('#vac-tab').append('rect').attr('class', 'col4bar').attr('id', 'col4bar' + i).attr('x', 454).attr('y', function () {\n      return 67 + i * 24.8;\n    }).attr('height', tableRowHeight).attr('width', 0).attr('fill', colors.blue);\n\n    for (var x = 0; x < 6; x++) {\n      d3.select('#col' + x + '_sort_desc').attr('opacity', 0);\n      d3.select('#col' + x + '_sort_asc').attr('opacity', 0);\n      d3.select('#col' + x + '_sort').style('cursor', 'pointer').on('click', function () {\n        var thisId = d3.select(this).attr('id');\n\n        if (options.table_sort == thisId) {\n          if (options.table_sort_direction == 'desc') {\n            options.table_sort_direction = 'asc';\n          } else {\n            options.table_sort_direction = 'desc';\n          }\n        } else {\n          options.table_sort = thisId;\n          options.table_sort_direction = 'desc';\n        }\n\n        options.page = 1;\n        updateTable(data, options);\n      }); // d3.select('#col1_sort_desc').attr('opacity', 1);\n    }\n  }\n\n  d3.select('#reset_locations').attr('display', 'none');\n  printCopySave();\n} // print copy save\n\n\n_c = Layout;\nvar printing;\n\nfunction printCopySave() {\n  tippy('#button-png', {\n    content: 'Save as PNG',\n    duration: 0,\n    placement: 'bottom',\n    theme: 'light',\n    arrow: true,\n    delay: [500, 200]\n  });\n  tippy('#button-copy', {\n    content: 'Copy to clipboard',\n    duration: 0,\n    placement: 'bottom',\n    theme: 'light',\n    arrow: true,\n    delay: [500, 200]\n  });\n  tippy('#button-print', {\n    content: 'Print to PDF',\n    duration: 0,\n    placement: 'bottom',\n    theme: 'light',\n    arrow: true,\n    delay: [500, 200]\n  });\n  d3.select('#button-print').on('click', function () {\n    if (printing) return false;\n    printing = true;\n    setTimeout(function () {\n      html2canvas(document.querySelector(\"#root\"), {\n        allowTaint: true,\n        onclone: function (doc) {},\n        useCORS: false,\n        foreignObjectRendering: true,\n        ignoreElements: function (element) {\n          // if(element.id=='adm-toggle') return true;\n          // if($(element).hasClass('select2')) return true;\n          return false;\n        },\n        scale: 2,\n        x: 0,\n        y: 0,\n        scrollX: 0,\n        scrollY: 0,\n        logging: false\n      }).then(canvas => {\n        var img = canvas.toDataURL(\"image/png\");\n        var pdf = new jsPDF(\"l\", \"mm\", \"a4\");\n        var imgProps = pdf.getImageProperties(img);\n        var pdfWidth = pdf.internal.pageSize.getWidth();\n        var pdfHeight = imgProps.height * pdfWidth / imgProps.width;\n        pdf.addImage(img, 'JPEG', 10, 10, pdfWidth - 20, pdfHeight - 30);\n        pdf.save('deep-pdf-export.pdf');\n        printing = false;\n      }, 200);\n    });\n  });\n  d3.select('#button-png').on('click', function () {\n    if (printing) return false;\n    printing = true;\n    setTimeout(function () {\n      html2canvas(document.querySelector(\"#root\"), {\n        allowTaint: true,\n        onclone: function (doc) {},\n        useCORS: false,\n        foreignObjectRendering: true,\n        ignoreElements: function (element) {\n          // if(element.id=='adm-toggle') return true;\n          // if($(element).hasClass('select2')) return true;\n          return false;\n        },\n        scale: 1.8,\n        windowWidth: 2800,\n        windowHeight: 2000,\n        logging: false\n      }).then(canvas => {\n        var img = canvas.toDataURL(\"image/png\").replace(\"image/png\", \"image/octet-stream\");\n        var link = document.createElement('a');\n        link.download = 'dashboard-export.png';\n        link.href = img;\n        link.click();\n        link.remove();\n        printing = false;\n      }, 200);\n    });\n  }); //   d3.select('#button-copy').on('click',function(){\n  //     if(printing) return false;\n  //     printing = true;\n  //     setTimeout(function(){\n  //       html2canvas(document.querySelector(\"#root\"),{\n  //             allowTaint: true,\n  //             onclone: function(doc){\n  //             },\n  //             useCORS: false,\n  //             foreignObjectRendering: true,\n  //             ignoreElements: function(element){\n  //               // if(element.id=='adm-toggle') return true;\n  //               // if($(element).hasClass('select2')) return true;\n  //             return false;\n  //             },\n  //             scale: 1.8,\n  //             windowWidth: 2800,\n  //             windowHeight: 2000,\n  //             logging: false\n  //         }).then(canvas => {\n  //           canvas.toBlob(blob, function(){\n  //             navigator.clipboard.write([\n  //               new ClipboardItem({\n  //                 [blob.type]: blob\n  //               })\n  //             ]).then(() => {\n  //             })\n  //           })\n  //         // copied to clipboard\n  //         printing = false;\n  //       });\n  //       },200);\n  //     });\n}\n\nexport default Layout;\n\nfunction toggle(collection, item) {\n  var idx = collection.indexOf(item);\n\n  if (idx !== -1) {\n    collection.splice(idx, 1);\n  } else {\n    collection.push(item);\n  }\n}\n/*\n\n#timechart-type-toggle #timechart-type-toggle-stacked\n#timechart-type-toggle #timechart-type-toggle-non-cumulative\n#timechart-type-toggle #timechart-type-toggle-cumulative\n\n#timechart-frequency-toggle #timechart-frequency-toggle-day\n#timechart-frequency-toggle #timechart-frequency-toggle-week\n#timechart-frequency-toggle #timechart-frequency-toggle-month\n\n#map-toggle #map-toggle-bi-weekly-change\n#map-toggle #map-toggle-deaths\n#map-toggle #map-toggle-percent-fully-vaccinated\n#map-toggle #map-toggle-percent-vaccine-acceptance\n#map-toggle #map-toggle-cases\n\n#tabs #bubble-chart-tab\n#tabs #indicators-tab\n#tabs #vaccination-tab\n\n#hdi-toggle #hdi-toggle-very-high\n#hdi-toggle #hdi-toggle-high\n#hdi-toggle #hdi-toggle-medium\n#hdi-toggle #hdi-toggle-low\n\n\n#inform-toggle #inform-toggle-no-score\n#inform-toggle #inform-toggle-low\n#inform-toggle #inform-toggle-medium\n#inform-toggle #inform-toggle-high\n#inform-toggle #inform-toggle-very-high\n\n*/\n\n\nvar _c;\n\n$RefreshReg$(_c, \"Layout\");","map":{"version":3,"sources":["/Users/matthewsmawfield/www/ifrc-covid-dataviz/src/Layout.js"],"names":["d3","drawTimechart","updateTimechart","updateRegionchart","colors","tippy","jsPDF","html2canvas","selectedToggle","unselectedToggle","unselectedToggleText","selectedToggleText","Layout","svg","options","data","filter","updateTable","updateMap","select","attr","style","black","on","event","bd","transition","duration","blue","d","i","region_filter","region_switch","region_chart_toggle","selectAll","map_toggle","timeline_type","content","placement","theme","arrow","delay","timeline_frequency","text","toggle","hdi_filter","length","forEach","inform_filter","tab_toggle","append","timechartContainer","tcSize","x","y","width","height","timechartSvg","layer1","timechartBg","tableRowHeight","tableBarYOffset","lightgrey","thisId","table_sort","table_sort_direction","page","printCopySave","printing","setTimeout","document","querySelector","allowTaint","onclone","doc","useCORS","foreignObjectRendering","ignoreElements","element","scale","scrollX","scrollY","logging","then","canvas","img","toDataURL","pdf","imgProps","getImageProperties","pdfWidth","internal","pageSize","getWidth","pdfHeight","addImage","save","windowWidth","windowHeight","replace","link","createElement","download","href","click","remove","collection","item","idx","indexOf","splice","push"],"mappings":"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QAAAA,QAAQ,GAAG,KAAX;AACC,OA1BD,EA0BE,GA1BF;AA2BD,KA5BS,CAAV;AA6BD,GAlCD,EAlEsB,CAuGxB;AAEA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACC;;AAGD,eAAexD,MAAf;;AAEA,SAASgC,MAAT,CAAgB8D,UAAhB,EAA4BC,IAA5B,EAAkC;AAChC,MAAIC,GAAG,GAAGF,UAAU,CAACG,OAAX,CAAmBF,IAAnB,CAAV;;AACA,MAAIC,GAAG,KAAK,CAAC,CAAb,EAAgB;AACdF,IAAAA,UAAU,CAACI,MAAX,CAAkBF,GAAlB,EAAuB,CAAvB;AACD,GAFD,MAEO;AACLF,IAAAA,UAAU,CAACK,IAAX,CAAgBJ,IAAhB;AACD;AACF;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","sourcesContent":["import * as d3 from \"d3\";\nimport {drawTimechart, updateTimechart} from './Timechart';\nimport {updateRegionchart} from './Regionchart';\nimport colors from './colors';\nimport tippy from 'tippy.js';\nimport 'tippy.js/dist/svg-arrow.css';\nimport 'tippy.js/themes/light.css';\nimport { jsPDF } from \"jspdf\";\nimport html2canvas from 'html2canvas';\n\nconst selectedToggle = '#595454';\nconst unselectedToggle = '#EAEAEA';\nconst unselectedToggleText = '#000';\nconst selectedToggleText = '#FFF';\n\nfunction Layout(svg, options, data, filter, updateTable, updateMap) {\n\n  // vaccine info\n  d3.select('#vaccine_tooltip').attr('opacity', 0).style('display', 'none');\n  d3.select('#vaccine_info path').attr('fill', colors.black);\n\n  svg.select('#vaccine_info').style('cursor', 'pointer')\n  .on('mouseover', function(event, bd){\n    d3.select('#svg_container').style('z-index', 10);\n    d3.select('#vaccine_tooltip').style('display', 'inline').transition().duration(500).attr('opacity', 1);\n    d3.select('#vaccine_info path').transition().duration(200).attr('fill', colors.blue);\n  }).on('mouseout', function(event, d){\n    d3.select('#svg_container').style('z-index', 1);\n    d3.select('#vaccine_tooltip').style('display', 'none').attr('opacity', 0);\n    d3.select('#vaccine_info path').transition().duration(500).attr('fill', colors.black);\n  })\n\n  // region chart toggle\n  svg.select('#region_remove_filter').attr('opacity', 0).style('cursor', 'pointer').on('click', function(d,i){\n    options.region_filter = []; \n    filter('clear-region');\n  });\n\n  svg.select('#region_switch').style('cursor', 'pointer').on('click', function(d,i){\n    if(options.region_switch=='total'){\n      options.region_switch = 'per100';\n      d3.select('#region_switch_toggle').transition().duration(200).attr('x', 15.1);\n    } else {\n      options.region_switch = 'total';\n      d3.select('#region_switch_toggle').transition().duration(200).attr('x', 3.1);\n    }\n    updateRegionchart(options,data);\n  })\n\n  svg.select('#region-chart-toggle #region-chart-toggle-cases').style('cursor', 'pointer').on('click', function(d){\n    if(options.region_chart_toggle === 'cases') return false;\n    options.region_chart_toggle = 'cases';\n    svg.selectAll('#region-chart-toggle rect').attr('fill', unselectedToggle);\n    svg.selectAll('#region-chart-toggle text').attr('fill', unselectedToggleText);\n    svg.select('#region-chart-toggle-cases rect').attr('fill', selectedToggle);\n    svg.select('#region-chart-toggle-cases text').attr('fill', selectedToggleText);\n    updateRegionchart(options,data);\n  });\n\n  svg.select('#region-chart-toggle #region-chart-toggle-deaths').style('cursor', 'pointer').on('click', function(d){\n    if(options.region_chart_toggle === 'deaths') return false;\n    options.region_chart_toggle = 'deaths';\n    svg.selectAll('#region-chart-toggle rect').attr('fill', unselectedToggle);\n    svg.selectAll('#region-chart-toggle text').attr('fill', unselectedToggleText);\n    svg.select('#region-chart-toggle-deaths rect').attr('fill', selectedToggle);\n    svg.select('#region-chart-toggle-deaths text').attr('fill', selectedToggleText);\n    updateRegionchart(options,data);\n  });\n\n  svg.select('#region-chart-toggle #region-chart-toggle-vaccines').style('cursor', 'pointer').on('click', function(d){\n    if(options.region_chart_toggle === 'vaccines') return false;\n    options.region_chart_toggle = 'vaccines';\n    svg.selectAll('#region-chart-toggle rect').attr('fill', unselectedToggle);\n    svg.selectAll('#region-chart-toggle text').attr('fill', unselectedToggleText);\n    svg.select('#region-chart-toggle-vaccines rect').attr('fill', selectedToggle);\n    svg.select('#region-chart-toggle-vaccines text').attr('fill', selectedToggleText);\n    updateRegionchart(options,data);\n  });\n\n  // map toggle\n  svg.select('#map-toggle #map-toggle-bi-weekly-change').style('cursor', 'pointer').on('click', function(d){\n    if(options.map_toggle === 'bi-weekly-change') return false;\n    options.map_toggle = 'bi-weekly-change';\n    svg.selectAll('#map-toggle rect').attr('fill', unselectedToggle);\n    svg.selectAll('#map-toggle text').attr('fill', unselectedToggleText);\n    svg.select('#map-toggle-bi-weekly-change rect').attr('fill', selectedToggle);\n    svg.select('#map-toggle-bi-weekly-change text').attr('fill', selectedToggleText);\n    // update map legend\n\n    updateMap(data, options, 700);\n  });\n\n  svg.select('#map-toggle #map-toggle-cases').style('cursor', 'pointer').on('click', function(d){\n    if(options.map_toggle === 'cases') return false;\n    options.map_toggle = 'cases';\n    svg.selectAll('#map-toggle rect').attr('fill', unselectedToggle);\n    svg.selectAll('#map-toggle text').attr('fill', unselectedToggleText);\n    svg.select('#map-toggle-cases rect').attr('fill', selectedToggle);\n    svg.select('#map-toggle-cases text').attr('fill', selectedToggleText);\n    // update map legend\n\n    updateMap(data, options, 700);\n  });\n\n  svg.select('#map-toggle #map-toggle-deaths').style('cursor', 'pointer').on('click', function(d){\n    if(options.map_toggle === 'deaths') return false;\n    options.map_toggle = 'deaths';\n    svg.selectAll('#map-toggle rect').attr('fill', unselectedToggle);\n    svg.selectAll('#map-toggle text').attr('fill', unselectedToggleText);\n    svg.select('#map-toggle-deaths rect').attr('fill', selectedToggle);\n    svg.select('#map-toggle-deaths text').attr('fill', selectedToggleText);\n    // update map legend\n\n    updateMap(data, options, 700);\n  });\n\n  svg.select('#map-toggle #map-toggle-percent-fully-vaccinated').style('cursor', 'pointer').on('click', function(d){\n    if(options.map_toggle === 'percent-fully-vaccinated') return false;\n    options.map_toggle = 'percent-fully-vaccinated';\n    svg.selectAll('#map-toggle rect').attr('fill', unselectedToggle);\n    svg.selectAll('#map-toggle text').attr('fill', unselectedToggleText);\n    svg.select('#map-toggle-percent-fully-vaccinated rect').attr('fill', selectedToggle);\n    svg.select('#map-toggle-percent-fully-vaccinated text').attr('fill', selectedToggleText);\n    // update map legend\n    updateMap(data, options, 700);\n  });\n\n  svg.select('#map-toggle #map-toggle-percent-vaccine-acceptance').style('cursor', 'pointer').on('click', function(d){\n    if(options.map_toggle === 'percent-vaccine-acceptance') return false;\n    options.map_toggle = 'percent-vaccine-acceptance';\n    svg.selectAll('#map-toggle rect').attr('fill', unselectedToggle);\n    svg.selectAll('#map-toggle text').attr('fill', unselectedToggleText);\n    svg.select('#map-toggle-percent-vaccine-acceptance rect').attr('fill', selectedToggle);\n    svg.select('#map-toggle-percent-vaccine-acceptance text').attr('fill', selectedToggleText);\n    // update map legend\n    updateMap(data, options, 700);\n  });\n\n    // time chart type \n    svg.select('#timechart-type-toggle #timechart-type-toggle-cumulative').style('cursor', 'pointer').on('click', function(d){\n      if(options.timeline_type === 'cumulative') return false;\n      options.timeline_type = 'cumulative';\n      svg.selectAll('#timechart-type-toggle rect').attr('fill', unselectedToggle);\n      svg.selectAll('#timechart-type-toggle polyline').attr('stroke', unselectedToggleText);\n      svg.select('#timechart-type-toggle-cumulative rect').attr('fill', selectedToggle);\n      svg.select('#timechart-type-toggle-cumulative polyline').attr('stroke', selectedToggleText);\n      svg.selectAll('#timechart-type-toggle-stacked polygon').attr('fill', selectedToggle);\n      updateTimechart(data, options);\n    });\n  \n    tippy('#timechart-type-toggle-cumulative', {\n      content: 'Cumulative',\n      duration: 0,\n      placement: 'bottom',\n      theme: 'light',\n      arrow: true,\n      delay: [500, 200],\n    });\n\n    svg.select('#timechart-type-toggle #timechart-type-toggle-non-cumulative').style('cursor', 'pointer').on('click', function(d){\n      if(options.timeline_type === 'non-cumulative') return false;\n      options.timeline_type = 'non-cumulative';\n      svg.selectAll('#timechart-type-toggle rect').attr('fill', unselectedToggle);\n      svg.selectAll('#timechart-type-toggle polyline').attr('stroke', unselectedToggleText);\n      svg.select('#timechart-type-toggle-non-cumulative rect').attr('fill', selectedToggle);\n      svg.select('#timechart-type-toggle-non-cumulative polyline').attr('stroke', selectedToggleText);\n      svg.selectAll('#timechart-type-toggle-stacked polygon').attr('fill', selectedToggle);\n      updateTimechart(data, options);\n    });\n\n    tippy('#timechart-type-toggle-non-cumulative', {\n      content: 'Non-cumulative',\n      duration: 0,\n      placement: 'bottom',\n      theme: 'light',\n      arrow: true,\n      delay: [500, 200],\n    });\n\n    svg.select('#timechart-type-toggle #timechart-type-toggle-stacked').style('cursor', 'pointer').on('click', function(d){\n      if(options.timeline_type === 'stacked') return false;\n      options.timeline_type = 'stacked';\n      svg.selectAll('#timechart-type-toggle rect').attr('fill', unselectedToggle);\n      svg.selectAll('#timechart-type-toggle polyline').attr('stroke', unselectedToggleText);\n      svg.select('#timechart-type-toggle-stacked rect').attr('fill', selectedToggle);\n      svg.select('#timechart-type-toggle-stacked polyline').attr('stroke', selectedToggleText);\n      svg.selectAll('#timechart-type-toggle-stacked polygon').attr('fill', selectedToggleText);\n      updateTimechart(data, options);\n    });\n\n    tippy('#timechart-type-toggle-stacked', {\n      content: 'Stacked 100%',\n      duration: 0,\n      placement: 'bottom',\n      theme: 'light',\n      arrow: true,\n      delay: [500, 200],\n    });\n\n  // time chart frequency toggle\n  svg.select('#timechart-frequency-toggle #timechart-frequency-toggle-day').style('cursor', 'pointer').on('click', function(d){\n    if(options.timeline_frequency === 'day') return false;\n    options.timeline_frequency = 'day';\n    svg.selectAll('#timechart-frequency-toggle rect').attr('fill', unselectedToggle);\n    svg.selectAll('#timechart-frequency-toggle text').attr('fill', unselectedToggleText);\n    svg.select('#timechart-frequency-toggle-day rect').attr('fill', selectedToggle);\n    svg.select('#timechart-frequency-toggle-day text').attr('fill', selectedToggleText);\n    svg.select('#tooltip_frequency tspan').attr('text-anchor', 'end').attr('dx', 20).text('DAY');\n    drawTimechart(data, options);\n  });\n\n  svg.select('#timechart-frequency-toggle #timechart-frequency-toggle-week').style('cursor', 'pointer').on('click', function(d){\n    if(options.timeline_frequency === 'week') return false;\n    options.timeline_frequency = 'week';\n    svg.selectAll('#timechart-frequency-toggle rect').attr('fill', unselectedToggle);\n    svg.selectAll('#timechart-frequency-toggle text').attr('fill', unselectedToggleText);\n    svg.select('#timechart-frequency-toggle-week rect').attr('fill', selectedToggle);\n    svg.select('#tooltip_frequency tspan').attr('text-anchor', 'end').attr('dx', 20).text('WEEK');\n    svg.select('#timechart-frequency-toggle-week text').attr('fill', selectedToggleText);\n    drawTimechart(data, options);\n  });\n\n  svg.select('#timechart-frequency-toggle #timechart-frequency-toggle-month').style('cursor', 'pointer').on('click', function(d){\n    if(options.timeline_frequency === 'month') return false;\n    options.timeline_frequency = 'month';\n    svg.selectAll('#timechart-frequency-toggle rect').attr('fill', unselectedToggle);\n    svg.selectAll('#timechart-frequency-toggle text').attr('fill', unselectedToggleText);\n    svg.select('#timechart-frequency-toggle-month rect').attr('fill', selectedToggle);\n    svg.select('#tooltip_frequency tspan').attr('text-anchor', 'end').attr('dx', 20).text('MONTH');\n    svg.select('#timechart-frequency-toggle-month text').attr('fill', selectedToggleText);\n    drawTimechart(data, options);\n  });\n\n    // HDI toggle\n\n    svg.select('#hdi_remove_filter').attr('opacity', 0).style('cursor', 'pointer').on('click', function(d,i){\n      d3.selectAll('#hdi-toggle-very-high, #hdi-toggle-high, #hdi-toggle-medium, #hdi-toggle-low').attr('opacity', 1);\n      filter('clear-hdi');\n    });\n\n    svg.select('#hdi-toggle #hdi-toggle-very-high').style('cursor', 'pointer').on('click', function(d){\n      toggle(options.hdi_filter, 'very-high');\n      if(options.hdi_filter.length === 4) { options.hdi_filter = []; d3.selectAll('#hdi-toggle-very-high, #hdi-toggle-high, #hdi-toggle-medium, #hdi-toggle-low').attr('opacity', 1); }\n      else if(options.hdi_filter.length === 0) { d3.selectAll('#hdi-toggle-very-high, #hdi-toggle-high, #hdi-toggle-medium, #hdi-toggle-low').attr('opacity', 1);}\n      else if(options.hdi_filter.length > 0) { d3.selectAll('#hdi-toggle-very-high, #hdi-toggle-high, #hdi-toggle-medium, #hdi-toggle-low').attr('opacity', 0.3);}\n      if(options.hdi_filter.length > 0){\n        options.hdi_filter.forEach(function(d,i){\n          d3.select('#hdi-toggle-'+d).attr('opacity', 1);\n        })\n      }\n      filter('hdi');\n    });\n\n    svg.select('#hdi-toggle #hdi-toggle-high').style('cursor', 'pointer').on('click', function(d){\n      toggle(options.hdi_filter, 'high');\n      if(options.hdi_filter.length === 4) { options.hdi_filter = []; d3.selectAll('#hdi-toggle-very-high, #hdi-toggle-high, #hdi-toggle-medium, #hdi-toggle-low').attr('opacity', 1); }\n      else if(options.hdi_filter.length === 0) { d3.selectAll('#hdi-toggle-very-high, #hdi-toggle-high, #hdi-toggle-medium, #hdi-toggle-low').attr('opacity', 1);}\n      else if(options.hdi_filter.length > 0) { d3.selectAll('#hdi-toggle-very-high, #hdi-toggle-high, #hdi-toggle-medium, #hdi-toggle-low').attr('opacity', 0.3);}\n      if(options.hdi_filter.length > 0){\n        options.hdi_filter.forEach(function(d,i){\n          d3.select('#hdi-toggle-'+d).attr('opacity', 1);\n        })\n      }\n      filter('hdi');\n    });\n    svg.select('#hdi-toggle #hdi-toggle-medium').style('cursor', 'pointer').on('click', function(d){\n      toggle(options.hdi_filter, 'medium');\n      if(options.hdi_filter.length === 4) { options.hdi_filter = []; d3.selectAll('#hdi-toggle-very-high, #hdi-toggle-high, #hdi-toggle-medium, #hdi-toggle-low').attr('opacity', 1); }\n      else if(options.hdi_filter.length === 0) { d3.selectAll('#hdi-toggle-very-high, #hdi-toggle-high, #hdi-toggle-medium, #hdi-toggle-low').attr('opacity', 1);}\n      else if(options.hdi_filter.length > 0) { d3.selectAll('#hdi-toggle-very-high, #hdi-toggle-high, #hdi-toggle-medium, #hdi-toggle-low').attr('opacity', 0.3);}\n      if(options.hdi_filter.length > 0){\n        options.hdi_filter.forEach(function(d,i){\n          d3.select('#hdi-toggle-'+d).attr('opacity', 1);\n        })\n      }\n      filter('hdi');\n    });\n    svg.select('#hdi-toggle #hdi-toggle-low').style('cursor', 'pointer').on('click', function(d){\n      toggle(options.hdi_filter, 'low');\n      if(options.hdi_filter.length === 4) { options.hdi_filter = []; d3.selectAll('#hdi-toggle-very-high, #hdi-toggle-high, #hdi-toggle-medium, #hdi-toggle-low').attr('opacity', 1);}\n      else if(options.hdi_filter.length === 0) { d3.selectAll('#hdi-toggle-very-high, #hdi-toggle-high, #hdi-toggle-medium, #hdi-toggle-low').attr('opacity', 1);}\n      else if(options.hdi_filter.length > 0) { d3.selectAll('#hdi-toggle-very-high, #hdi-toggle-high, #hdi-toggle-medium, #hdi-toggle-low').attr('opacity', 0.3);}\n      if(options.hdi_filter.length > 0){\n        options.hdi_filter.forEach(function(d,i){\n          d3.select('#hdi-toggle-'+d).attr('opacity', 1);\n        })\n      }\n      filter('hdi');\n    });\n\n    // inform severity toggle\n\n    svg.select('#inform_remove_filter').attr('opacity', 0).style('cursor', 'pointer').on('click', function(d,i){\n      d3.selectAll('#inform-toggle-very-high, #inform-toggle-high, #inform-toggle-medium, #inform-toggle-low, #inform-toggle-no-score').attr('opacity', 1);\n      filter('clear-inform');\n    });\n\n    svg.select('#inform-toggle #inform-toggle-no-score').style('cursor', 'pointer').on('click', function(d){\n      toggle(options.inform_filter, 'no-score');\n      if(options.inform_filter.length === 5) { options.inform_filter = []; d3.selectAll('#inform-toggle-very-high, #inform-toggle-high, #inform-toggle-medium, #inform-toggle-low, #inform-toggle-no-score').attr('opacity', 1);}\n      else if(options.inform_filter.length === 0) { d3.selectAll('#inform-toggle-very-high, #inform-toggle-high, #inform-toggle-medium, #inform-toggle-low, #inform-toggle-no-score').attr('opacity', 1);}\n      else if(options.inform_filter.length > 0) { d3.selectAll('#inform-toggle-very-high, #inform-toggle-high, #inform-toggle-medium, #inform-toggle-low, #inform-toggle-no-score').attr('opacity', 0.3);}\n      if(options.inform_filter.length > 0){\n        options.inform_filter.forEach(function(d,i){\n          d3.select('#inform-toggle-'+d).attr('opacity', 1);\n        })\n      }\n      filter('inform');\n    });\n\n    svg.select('#inform-toggle #inform-toggle-low').style('cursor', 'pointer').on('click', function(d){\n      toggle(options.inform_filter, 'low');\n      if(options.inform_filter.length === 5) { options.inform_filter = []; d3.selectAll('#inform-toggle-very-high, #inform-toggle-high, #inform-toggle-medium, #inform-toggle-low, #inform-toggle-no-score').attr('opacity', 1);}\n      else if(options.inform_filter.length === 0) { d3.selectAll('#inform-toggle-very-high, #inform-toggle-high, #inform-toggle-medium, #inform-toggle-low, #inform-toggle-no-score').attr('opacity', 1);}\n      else if(options.inform_filter.length > 0) { d3.selectAll('#inform-toggle-very-high, #inform-toggle-high, #inform-toggle-medium, #inform-toggle-low, #inform-toggle-no-score').attr('opacity', 0.3);}\n      if(options.inform_filter.length > 0){\n        options.inform_filter.forEach(function(d,i){\n          d3.select('#inform-toggle-'+d).attr('opacity', 1);\n        })\n      }\n      filter('inform');\n    });\n\n    svg.select('#inform-toggle #inform-toggle-medium').style('cursor', 'pointer').on('click', function(d){\n      toggle(options.inform_filter, 'medium');\n      if(options.inform_filter.length === 5) { options.inform_filter = []; d3.selectAll('#inform-toggle-very-high, #inform-toggle-high, #inform-toggle-medium, #inform-toggle-low, #inform-toggle-no-score').attr('opacity', 1);}\n      else if(options.inform_filter.length === 0) { d3.selectAll('#inform-toggle-very-high, #inform-toggle-high, #inform-toggle-medium, #inform-toggle-low, #inform-toggle-no-score').attr('opacity', 1);}\n      else if(options.inform_filter.length > 0) { d3.selectAll('#inform-toggle-very-high, #inform-toggle-high, #inform-toggle-medium, #inform-toggle-low, #inform-toggle-no-score').attr('opacity', 0.3);}\n      if(options.inform_filter.length > 0){\n        options.inform_filter.forEach(function(d,i){\n          d3.select('#inform-toggle-'+d).attr('opacity', 1);\n        })\n      }\n      filter('inform');\n    });\n\n    svg.select('#inform-toggle #inform-toggle-high').style('cursor', 'pointer').on('click', function(d){\n      toggle(options.inform_filter, 'high');\n      if(options.inform_filter.length === 5) { options.inform_filter = []; d3.selectAll('#inform-toggle-very-high, #inform-toggle-high, #inform-toggle-medium, #inform-toggle-low, #inform-toggle-no-score').attr('opacity', 1);}\n      else if(options.inform_filter.length === 0) { d3.selectAll('#inform-toggle-very-high, #inform-toggle-high, #inform-toggle-medium, #inform-toggle-low, #inform-toggle-no-score').attr('opacity', 1);}\n      else if(options.inform_filter.length > 0) { d3.selectAll('#inform-toggle-very-high, #inform-toggle-high, #inform-toggle-medium, #inform-toggle-low, #inform-toggle-no-score').attr('opacity', 0.3);}\n      if(options.inform_filter.length > 0){\n        options.inform_filter.forEach(function(d,i){\n          d3.select('#inform-toggle-'+d).attr('opacity', 1);\n        })\n      }\n      filter('inform');\n    });\n\n    svg.select('#inform-toggle #inform-toggle-very-high').style('cursor', 'pointer').on('click', function(d){\n      toggle(options.inform_filter, 'very-high');\n      if(options.inform_filter.length === 5) { options.inform_filter = []; d3.selectAll('#inform-toggle-very-high, #inform-toggle-high, #inform-toggle-medium, #inform-toggle-low, #inform-toggle-no-score').attr('opacity', 1);}\n      else if(options.inform_filter.length === 0) { d3.selectAll('#inform-toggle-very-high, #inform-toggle-high, #inform-toggle-medium, #inform-toggle-low, #inform-toggle-no-score').attr('opacity', 1);}\n      else if(options.inform_filter.length > 0) { d3.selectAll('#inform-toggle-very-high, #inform-toggle-high, #inform-toggle-medium, #inform-toggle-low, #inform-toggle-no-score').attr('opacity', 0.3);}\n      if(options.inform_filter.length > 0){\n        options.inform_filter.forEach(function(d,i){\n          d3.select('#inform-toggle-'+d).attr('opacity', 1);\n        })\n      }\n      filter('inform');\n    });\n  \n  // tabs\n\n  d3.select('#additional-indicators-tab').attr('opacity', 0).select('#additional-indicators-tab-content').attr('display', 'none');\n  d3.select('#vac-tab').attr('opacity', 1).select('#vac-tab-content').attr('display', 'inline');\n  d3.select('#bubblechart-tab').attr('opacity', 0).selectAll('#bubblechart, #bubblechart-tab-content').attr('display', 'none');\n  d3.select('#bubbleSelectContainer').style('display', 'none');\n\n  svg.select('#tabs #vaccination-tab').style('cursor', 'pointer').on('click', function(d){\n    if(options.tab_toggle === 'vaccination-data') return false;\n    options.tab_toggle = 'vaccination-data';\n    d3.select('#additional-indicators-tab').attr('opacity', 0).select('#additional-indicators-tab-content').attr('display', 'none');\n    d3.select('#vac-tab').attr('opacity', 1).select('#vac-tab-content').attr('display', 'inline');\n    d3.select('#bubblechart-tab').attr('opacity', 0).selectAll('#bubblechart, #bubblechart-tab-content').attr('display', 'none');\n    svg.selectAll('#tabs rect').attr('fill', unselectedToggle);\n    svg.selectAll('#tabs text').attr('fill', unselectedToggleText);\n    svg.select('#vaccination-tab rect').attr('fill', selectedToggle);\n    svg.select('#vaccination-tab text').attr('fill', selectedToggleText);\n    d3.select('#bubbleSelectContainer').style('display', 'none');\n\n  });\n\n  svg.select('#tabs #indicators-tab').style('cursor', 'pointer').on('click', function(d){\n    if(options.tab_toggle === 'indicators') return false;\n    options.tab_toggle = 'indicators';\n    d3.select('#additional-indicators-tab').attr('opacity', 1).select('#additional-indicators-tab-content').attr('display', 'inline');\n    d3.select('#vac-tab').attr('opacity', 0).select('#vac-tab-content').attr('display', 'none');\n    d3.select('#bubblechart-tab').attr('opacity', 0).selectAll('#bubblechart, #bubblechart-tab-content').attr('display', 'none');\n    svg.selectAll('#tabs rect').attr('fill', unselectedToggle);\n    svg.selectAll('#tabs text').attr('fill', unselectedToggleText);\n    svg.select('#indicators-tab rect').attr('fill', selectedToggle);\n    svg.select('#indicators-tab text').attr('fill', selectedToggleText);\n    d3.select('#bubbleSelectContainer').style('display', 'none');\n\n  });\n\n  svg.select('#tabs #bubble-chart-tab').style('cursor', 'pointer').on('click', function(d){\n    if(options.tab_toggle === 'bubble-chartt') return false;\n    options.tab_toggle = 'bubble-chart';\n    d3.select('#additional-indicators-tab').attr('opacity', 0).select('#additional-indicators-tab-content').attr('display', 'none');\n    d3.select('#vac-tab').attr('opacity', 0).select('#vac-tab-content').attr('display', 'none');\n    d3.select('#bubblechart-tab').attr('opacity', 1).selectAll('#bubblechart, #bubblechart-tab-content').attr('display', 'inline');\n    svg.selectAll('#tabs rect').attr('fill', unselectedToggle);\n    svg.selectAll('#tabs text').attr('fill', unselectedToggleText);\n    svg.select('#bubble-chart-tab rect').attr('fill', selectedToggle);\n    svg.select('#bubble-chart-tab text').attr('fill', selectedToggleText);\n    d3.select('#bubbleSelectContainer').style('display', 'inline-block');\n\n  });\n\n  // time chart mask\n    d3.select('#svg defs').append('clipPath').attr('id', 'mask')\n    .append('rect')\n    .attr('y', 340)\n    .attr('height', 590)\n    .attr('width', 660)\n    .attr('x', 22);\n\n  \n  // append timechart svg\n  const timechartContainer = svg.select('#timechart_container').attr('opacity', 0);\n  const tcSize = {\n    x: timechartContainer.attr('x'), y: timechartContainer.attr('y'), width: timechartContainer.attr('width'), height: timechartContainer.attr('height')\n  }\n\n  const timechartSvg = svg.append('svg').attr('id', 'timechart_svg').attr('viewBox', '0 0 '+2000 +' '+ tcSize.height)\n  .attr('preserveAspectRatio', \"none\")\n  .attr('x', tcSize.x)\n  .attr('y', tcSize.y)\n  .attr('width', tcSize.width)\n  .attr('height', tcSize.height)\n\n  const layer1 = timechartSvg\n  .append('g')\n  .attr('id', 'layer1')\n\n  const timechartBg = timechartSvg.append('g').attr('id', 'layer0');\n\n  layer1.append('rect')\n  .attr('x', 0)\n  .attr('y', 0)\n  .attr('width', '100%')\n  .attr('height', '100%')\n  .attr('opacity', 0)\n  .style('fill', 'transparent');\n  \n  // table bars\n\n  var tableRowHeight = 18;\n  var tableBarYOffset = 68;\n\n  for(let i = 0; i < 10; i++){\n\n    // col 1 bg\n    d3.select('#vac-tab').append('rect')\n    .attr('class','col1bg colbg')\n    .attr('id','col1bg'+i)\n    .attr('x', 120)\n    .attr('y', function(){\n      return tableBarYOffset+(i*24.8);\n    })\n    .attr('height', tableRowHeight)\n    .attr('width', 68)\n    .attr('fill', colors.lightgrey)\n\n    // col 1 bar\n    d3.select('#vac-tab').append('rect')\n    .attr('class','col1bar')\n    .attr('id','col1bar'+i)\n    .attr('x', 120)\n    .attr('y', function(){\n      return tableBarYOffset+(i*24.8);\n    })\n    .attr('height', tableRowHeight)\n    .attr('width', 0)\n    .attr('fill', colors.blue);\n\n    // col 2 bg\n    d3.select('#vac-tab').append('rect')\n    .attr('class','col2bg colbg')\n    .attr('id','col2bg'+i)\n    .attr('x', 230)\n    .attr('y', function(){\n      return tableBarYOffset+(i*24.8);\n    })\n    .attr('height', tableRowHeight)\n    .attr('width', 68)\n    .attr('fill', colors.lightgrey)\n\n    // col 2 bar\n    d3.select('#vac-tab').append('rect')\n    .attr('class','col2bar')\n    .attr('id','col2bar'+i)\n    .attr('x', 230)\n    .attr('y', function(){\n      return tableBarYOffset+(i*24.8);\n    })\n    .attr('height', tableRowHeight)\n    .attr('width', 0)\n    .attr('fill', colors.blue);\n\n    // col 3 bg\n    d3.select('#vac-tab').append('rect')\n    .attr('class','col3bg colbg')\n    .attr('id','col3bg'+i)\n    .attr('x', 340)\n    .attr('y', function(){\n      return tableBarYOffset+(i*24.8);\n    })\n    .attr('height', tableRowHeight)\n    .attr('width', 68)\n    .attr('fill', colors.lightgrey)\n\n    // col 3 bar\n    d3.select('#vac-tab').append('rect')\n    .attr('class','col3bar')\n    .attr('id','col3bar'+i)\n    .attr('x', 340)\n    .attr('y', function(){\n      return tableBarYOffset+(i*24.8);\n    })\n    .attr('height', tableRowHeight)\n    .attr('width', 0)\n    .attr('fill', colors.blue);\n\n    // col 4 bg\n    d3.select('#vac-tab').append('rect')\n    .attr('class','col4bg colbg')\n    .attr('id','col4bg'+i)\n    .attr('x', 454)\n    .attr('y', function(){\n      return 67+(i*24.8);\n    })\n    .attr('height', tableRowHeight)\n    .attr('width', 68)\n    .attr('fill', colors.lightgrey)\n\n    // col 3 bar\n    d3.select('#vac-tab').append('rect')\n    .attr('class','col4bar')\n    .attr('id','col4bar'+i)\n    .attr('x', 454)\n    .attr('y', function(){\n      return 67+(i*24.8);\n    })\n    .attr('height', tableRowHeight)\n    .attr('width', 0)\n    .attr('fill', colors.blue);\n\n    for(var x = 0; x<6; x++){\n      d3.select('#col'+x+'_sort_desc').attr('opacity', 0);\n      d3.select('#col'+x+'_sort_asc').attr('opacity', 0);\n      d3.select('#col'+x+'_sort').style('cursor', 'pointer')\n      .on('click', function(){\n        var thisId = d3.select(this).attr('id');\n        if(options.table_sort==thisId){\n          if(options.table_sort_direction=='desc'){\n            options.table_sort_direction = 'asc';\n          } else {\n            options.table_sort_direction = 'desc';\n          }\n        } else {\n          options.table_sort = thisId;\n          options.table_sort_direction = 'desc';\n        }\n        options.page = 1;\n        updateTable(data, options);\n    })\n    // d3.select('#col1_sort_desc').attr('opacity', 1);\n    }\n  }\n\n  d3.select('#reset_locations').attr('display', 'none');\n\n  printCopySave();\n\n}\n\n// print copy save\n\nvar printing;\n\nfunction printCopySave(){\n\n  tippy('#button-png', {\n    content: 'Save as PNG',\n    duration: 0,\n    placement: 'bottom',\n    theme: 'light',\n    arrow: true,\n    delay: [500, 200],\n  });\n\n  tippy('#button-copy', {\n    content: 'Copy to clipboard',\n    duration: 0,\n    placement: 'bottom',\n    theme: 'light',\n    arrow: true,\n    delay: [500, 200],\n  });\n\n  tippy('#button-print', {\n    content: 'Print to PDF',\n    duration: 0,\n    placement: 'bottom',\n    theme: 'light',\n    arrow: true,\n    delay: [500, 200],\n  });\n\n  d3.select('#button-print').on('click', function(){\n\n    if(printing) return false;\n    printing = true;\n\n    setTimeout(function(){\n      html2canvas(document.querySelector(\"#root\"),{\n            allowTaint: true,\n            onclone: function(doc){\n\n            },\n            useCORS: false,\n            foreignObjectRendering: true,\n            ignoreElements: function(element){\n              // if(element.id=='adm-toggle') return true;\n              // if($(element).hasClass('select2')) return true;\n            return false;\n            },\n            scale: 2,\n            x: 0,\n            y: 0,\n            scrollX: 0,\n            scrollY: 0,\n            logging: false\n        }).then(canvas => {\n          var img = canvas.toDataURL(\"image/png\");\n          var pdf = new jsPDF(\"l\", \"mm\", \"a4\");\n          var imgProps= pdf.getImageProperties(img);\n          var pdfWidth = pdf.internal.pageSize.getWidth();\n          var pdfHeight = (imgProps.height * pdfWidth) / imgProps.width;\n          pdf.addImage(img, 'JPEG', 10, 10, pdfWidth-20, pdfHeight-30);\n          pdf.save('deep-pdf-export.pdf');\n          printing = false;\n      },200);\n    });\n  });\n\n  d3.select('#button-png').on('click',function(){\n\n    if(printing) return false;\n    printing = true;\n\n    setTimeout(function(){\n      html2canvas(document.querySelector(\"#root\"),{\n            allowTaint: true,\n            onclone: function(doc){\n\n            },\n            useCORS: false,\n            foreignObjectRendering: true,\n            ignoreElements: function(element){\n              // if(element.id=='adm-toggle') return true;\n              // if($(element).hasClass('select2')) return true;\n            return false;\n            },\n            scale: 1.8,\n            windowWidth: 2800,\n            windowHeight: 2000,\n            logging: false\n        }).then(canvas => {\n\n      var img = canvas.toDataURL(\"image/png\").replace(\"image/png\", \"image/octet-stream\");\n      var link = document.createElement('a');\n      link.download = 'dashboard-export.png';\n      link.href = img;\n      link.click();\n      link.remove();\n\n      printing = false;\n      },200);\n    });\n  });\n\n  \n//   d3.select('#button-copy').on('click',function(){\n\n//     if(printing) return false;\n//     printing = true;\n\n//     setTimeout(function(){\n//       html2canvas(document.querySelector(\"#root\"),{\n//             allowTaint: true,\n//             onclone: function(doc){\n\n//             },\n//             useCORS: false,\n//             foreignObjectRendering: true,\n//             ignoreElements: function(element){\n//               // if(element.id=='adm-toggle') return true;\n//               // if($(element).hasClass('select2')) return true;\n//             return false;\n//             },\n//             scale: 1.8,\n//             windowWidth: 2800,\n//             windowHeight: 2000,\n//             logging: false\n//         }).then(canvas => {\n//           canvas.toBlob(blob, function(){\n//             navigator.clipboard.write([\n//               new ClipboardItem({\n//                 [blob.type]: blob\n//               })\n//             ]).then(() => {\n\n//             })\n//           })\n//         // copied to clipboard\n//         printing = false;\n//       });\n//       },200);\n//     });\n}\n\n\nexport default Layout;\n\nfunction toggle(collection, item) {\n  var idx = collection.indexOf(item);\n  if (idx !== -1) {\n    collection.splice(idx, 1);\n  } else {\n    collection.push(item);\n  }\n}\n\n/*\n\n#timechart-type-toggle #timechart-type-toggle-stacked\n#timechart-type-toggle #timechart-type-toggle-non-cumulative\n#timechart-type-toggle #timechart-type-toggle-cumulative\n\n#timechart-frequency-toggle #timechart-frequency-toggle-day\n#timechart-frequency-toggle #timechart-frequency-toggle-week\n#timechart-frequency-toggle #timechart-frequency-toggle-month\n\n#map-toggle #map-toggle-bi-weekly-change\n#map-toggle #map-toggle-deaths\n#map-toggle #map-toggle-percent-fully-vaccinated\n#map-toggle #map-toggle-percent-vaccine-acceptance\n#map-toggle #map-toggle-cases\n\n#tabs #bubble-chart-tab\n#tabs #indicators-tab\n#tabs #vaccination-tab\n\n#hdi-toggle #hdi-toggle-very-high\n#hdi-toggle #hdi-toggle-high\n#hdi-toggle #hdi-toggle-medium\n#hdi-toggle #hdi-toggle-low\n\n\n#inform-toggle #inform-toggle-no-score\n#inform-toggle #inform-toggle-low\n#inform-toggle #inform-toggle-medium\n#inform-toggle #inform-toggle-high\n#inform-toggle #inform-toggle-very-high\n\n*/"]},"metadata":{},"sourceType":"module"}