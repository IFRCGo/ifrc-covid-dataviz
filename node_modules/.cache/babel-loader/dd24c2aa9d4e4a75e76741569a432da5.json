{"ast":null,"code":"import { __extends } from \"tslib\";\nimport * as React from 'react';\nimport * as ReactDOM from 'react-dom';\nimport * as common from 'select2-component';\nexport * from 'select2-component';\n/**\n * @public\n */\n\nvar Select2 =\n/** @class */\nfunction (_super) {\n  __extends(Select2, _super);\n\n  function Select2() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.hoveringValue = null;\n    _this.option = null;\n    _this.isOpen = false;\n    _this.innerSearchText = '';\n    _this.lastScrollTopIndex = 0;\n    _this.value = _this.props.value;\n\n    _this.onChange = function (e) {\n      _this.searchText = e.currentTarget.value;\n\n      _this.setState({\n        searchText: _this.searchText\n      });\n    };\n\n    return _this;\n  }\n\n  Object.defineProperty(Select2.prototype, \"searchText\", {\n    get: function () {\n      return this.innerSearchText;\n    },\n    set: function (text) {\n      if (this.props.customSearchEnabled && this.props.search) {\n        this.props.search(text);\n      }\n\n      this.innerSearchText = text;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(Select2.prototype, \"dropdownStyle\", {\n    get: function () {\n      return common.getDropdownStyle(this.isOpen);\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(Select2.prototype, \"containerStyle\", {\n    get: function () {\n      return common.getContainerStyle(this.props.disabled, this.isOpen);\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(Select2.prototype, \"selectionStyle\", {\n    get: function () {\n      return common.getSelectionStyle(this.props.multiple);\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(Select2.prototype, \"isSearchboxHidden\", {\n    get: function () {\n      return this.props.customSearchEnabled ? false : common.isSearchboxHiddex(this.props.data, this.props.minCountForSearch);\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(Select2.prototype, \"searchStyle\", {\n    get: function () {\n      return common.getSearchStyle(this.isSearchboxHidden);\n    },\n    enumerable: false,\n    configurable: true\n  });\n\n  Select2.prototype.UNSAFE_componentWillReceiveProps = function (nextProps) {\n    var _this = this;\n\n    if (nextProps.value !== this.value) {\n      this.value = nextProps.value;\n      this.setState({\n        value: nextProps.value\n      }, function () {\n        _this.updateOptionAndHoveringValue();\n      });\n    }\n  };\n\n  Select2.prototype.updateOptionAndHoveringValue = function () {\n    var option = common.getOptionsByValue(this.props.data, this.value, this.props.multiple);\n\n    if (option !== null) {\n      this.option = option;\n      this.setState({\n        option: this.option\n      });\n    }\n\n    if (!Array.isArray(option)) {\n      this.hoveringValue = this.value;\n    }\n\n    this.setState({\n      hoveringValue: this.hoveringValue\n    });\n  };\n\n  Select2.prototype.UNSAFE_componentWillMount = function () {\n    this.updateOptionAndHoveringValue();\n  };\n\n  Select2.prototype.componentDidMount = function () {\n    var theElement = ReactDOM.findDOMNode(this);\n    this.searchInputElement = theElement.childNodes[1].childNodes[0].childNodes[0].childNodes[0];\n    this.resultsElement = theElement.childNodes[1].childNodes[0].childNodes[1].childNodes[0];\n    this.mounted = true;\n    this.value = this.props.value;\n  };\n\n  Select2.prototype.componentWillUnmount = function () {\n    this.mounted = false;\n    this.cancelFocusoutTimer();\n  };\n\n  Select2.prototype.render = function () {\n    var _this = this;\n\n    var results = this.renderResult();\n    var selection = this.renderSelection();\n    return React.createElement(\"div\", {\n      className: this.containerStyle\n    }, React.createElement(\"div\", {\n      className: 'selection',\n      onClick: function () {\n        return _this.toggleOpenAndClose();\n      }\n    }, React.createElement(\"div\", {\n      className: this.selectionStyle,\n      role: 'combobox'\n    }, selection)), React.createElement(\"div\", {\n      className: this.dropdownStyle\n    }, React.createElement(\"div\", {\n      className: 'select2-dropdown select2-dropdown--below'\n    }, React.createElement(\"div\", {\n      className: this.searchStyle\n    }, React.createElement(\"input\", {\n      value: this.searchText,\n      onChange: this.onChange,\n      onKeyDown: function (e) {\n        return _this.keyDown(e);\n      },\n      onKeyUp: function (e) {\n        return _this.keyUp(e);\n      },\n      onKeyPress: function (e) {\n        return _this.keyPress(e);\n      },\n      onFocus: function () {\n        return _this.cancelFocusoutTimer();\n      },\n      onBlur: function () {\n        return _this.focusout();\n      },\n      className: 'select2-search__field',\n      type: 'search',\n      role: 'textbox',\n      autoComplete: 'off',\n      autoCorrect: 'off',\n      autoCapitalize: 'off',\n      maxLength: this.props.maximumInputLength,\n      spellCheck: false\n    })), React.createElement(\"div\", {\n      className: 'select2-results'\n    }, React.createElement(\"ul\", {\n      className: 'select2-results__options',\n      role: 'tree',\n      tabIndex: -1,\n      onKeyDown: function (e) {\n        return _this.keyDown(e);\n      },\n      onFocus: function () {\n        return _this.cancelFocusoutTimer();\n      },\n      onBlur: function () {\n        return _this.focusout();\n      }\n    }, results)))));\n  };\n\n  Select2.prototype.renderSelection = function () {\n    var _this = this;\n\n    if (this.props.multiple) {\n      var items = this.option.map(function (op, i) {\n        return React.createElement(\"li\", {\n          className: 'select2-selection__choice',\n          title: op.label,\n          key: i\n        }, React.createElement(\"span\", {\n          onClick: function (e) {\n            return _this.removeSelection(e, op);\n          },\n          className: 'select2-selection__choice__remove',\n          role: 'presentation'\n        }, \"\\u00D7\"), op.label);\n      });\n      return React.createElement(\"ul\", {\n        className: 'select2-selection__rendered'\n      }, items);\n    } else {\n      var option = this.option;\n      var label = option ? option.component ? React.createElement(option.component, {\n        option: option\n      }) : option.label : React.createElement(\"span\", {\n        className: 'select2-selection__placeholder'\n      }, this.props.placeholder);\n      return [React.createElement(\"span\", {\n        key: 'label',\n        className: 'select2-selection__rendered',\n        title: option ? option.label : ''\n      }, label), React.createElement(\"span\", {\n        key: 'arrow',\n        className: 'select2-selection__arrow',\n        role: 'presentation'\n      }, React.createElement(\"b\", {\n        role: 'presentation'\n      }))];\n    }\n  };\n\n  Select2.prototype.renderResult = function () {\n    var _this = this;\n\n    return this.getFilteredData(false).map(function (groupOrOption, i) {\n      var options = groupOrOption.options;\n\n      if (options) {\n        var optionsElements = options.map(function (option, j) {\n          var optionElement = option.component ? React.createElement(option.component, {\n            option: option\n          }) : option.label;\n          return React.createElement(\"li\", {\n            className: _this.getOptionStyle(option),\n            key: j,\n            role: 'treeitem',\n            \"aria-selected\": _this.isSelected(option),\n            \"aria-disabled\": _this.isDisabled(option),\n            onMouseEnter: function () {\n              return _this.mouseenter(option);\n            },\n            onClick: function () {\n              return _this.click(option);\n            }\n          }, optionElement);\n        });\n        return React.createElement(\"li\", {\n          className: 'select2-results__option',\n          role: 'group',\n          key: i\n        }, React.createElement(\"strong\", {\n          className: 'select2-results__group'\n        }, groupOrOption.label), React.createElement(\"ul\", {\n          className: 'select2-results__options select2-results__options--nested'\n        }, optionsElements));\n      } else {\n        var option_1 = groupOrOption;\n        var optionElement = option_1.component ? React.createElement(option_1.component, {\n          option: option_1\n        }) : option_1.label;\n        return React.createElement(\"li\", {\n          className: _this.getOptionStyle(option_1),\n          key: i,\n          role: 'treeitem',\n          \"aria-selected\": _this.isSelected(option_1),\n          \"aria-disabled\": _this.isDisabled(option_1),\n          onMouseEnter: function () {\n            return _this.mouseenter(option_1);\n          },\n          onClick: function () {\n            return _this.click(option_1);\n          }\n        }, optionElement);\n      }\n    });\n  };\n\n  Select2.prototype.getFilteredData = function (canSetState) {\n    var result = this.props.customSearchEnabled || this.props.minimumInputLength && this.props.minimumInputLength > this.searchText.length ? this.props.data : common.getFilteredData(this.props.data, this.searchText);\n\n    if (common.valueIsNotInFilteredData(result, this.hoveringValue)) {\n      this.hoveringValue = common.getFirstAvailableOption(result);\n\n      if (canSetState) {\n        this.setState({\n          hoveringValue: this.hoveringValue\n        });\n      }\n\n      if (this.resultsElement) {\n        var lastScrollTopIndex = common.getLastScrollTopIndex(this.hoveringValue, this.resultsElement, result, this.lastScrollTopIndex);\n\n        if (lastScrollTopIndex !== null) {\n          this.lastScrollTopIndex = lastScrollTopIndex;\n\n          if (canSetState) {\n            this.setState({\n              lastScrollTopIndex: this.lastScrollTopIndex\n            });\n          }\n        }\n      }\n    }\n\n    return result;\n  };\n\n  Select2.prototype.getOptionStyle = function (option) {\n    return common.getOptionStyle(option, this.hoveringValue);\n  };\n\n  Select2.prototype.mouseenter = function (option) {\n    if (!option.disabled) {\n      this.hoveringValue = option.value;\n      this.setState({\n        hoveringValue: this.hoveringValue\n      });\n    }\n  };\n\n  Select2.prototype.click = function (option) {\n    if (!option.disabled) {\n      this.select(option);\n    }\n\n    if (this.focusoutTimer) {\n      clearTimeout(this.focusoutTimer);\n    }\n  };\n\n  Select2.prototype.toggleOpenAndClose = function () {\n    var _this = this;\n\n    if (this.props.disabled) {\n      return;\n    }\n\n    this.isOpen = !this.isOpen;\n    this.setState({\n      isOpen: this.isOpen\n    });\n\n    if (this.isOpen) {\n      if (!this.props.keepSearchText) {\n        this.innerSearchText = '';\n      }\n\n      this.setState({\n        searchText: this.searchText\n      }, function () {\n        _this.focusSearchboxOrResultsElement();\n\n        if (_this.resultsElement) {\n          var lastScrollTopIndex = common.getLastScrollTopIndex(_this.hoveringValue, _this.resultsElement, _this.props.data, _this.lastScrollTopIndex);\n\n          if (lastScrollTopIndex !== null) {\n            _this.lastScrollTopIndex = lastScrollTopIndex;\n          }\n        }\n      });\n\n      if (this.props.open) {\n        this.props.open();\n      }\n    }\n\n    if (this.focusoutTimer) {\n      clearTimeout(this.focusoutTimer);\n    }\n  };\n\n  Select2.prototype.focusout = function () {\n    var _this = this;\n\n    this.focusoutTimer = setTimeout(function () {\n      _this.isOpen = false;\n\n      if (_this.mounted) {\n        _this.setState({\n          isOpen: _this.isOpen\n        });\n      }\n\n      _this.focusoutTimer = undefined;\n    }, common.timeout);\n  };\n\n  Select2.prototype.moveUp = function () {\n    this.hoveringValue = common.getPreviousOption(this.getFilteredData(true), this.hoveringValue);\n    this.setState({\n      hoveringValue: this.hoveringValue\n    });\n\n    if (this.resultsElement) {\n      var lastScrollTopIndex = common.getLastScrollTopIndex(this.hoveringValue, this.resultsElement, this.getFilteredData(true), this.lastScrollTopIndex);\n\n      if (lastScrollTopIndex !== null) {\n        this.lastScrollTopIndex = lastScrollTopIndex;\n        this.setState({\n          lastScrollTopIndex: this.lastScrollTopIndex\n        });\n      }\n    }\n  };\n\n  Select2.prototype.moveDown = function () {\n    this.hoveringValue = common.getNextOption(this.getFilteredData(true), this.hoveringValue);\n    this.setState({\n      hoveringValue: this.hoveringValue\n    });\n\n    if (this.resultsElement) {\n      var lastScrollTopIndex = common.getLastScrollTopIndex(this.hoveringValue, this.resultsElement, this.getFilteredData(true), this.lastScrollTopIndex);\n\n      if (lastScrollTopIndex !== null) {\n        this.lastScrollTopIndex = lastScrollTopIndex;\n        this.setState({\n          lastScrollTopIndex: this.lastScrollTopIndex\n        });\n      }\n    }\n  };\n\n  Select2.prototype.selectByEnter = function () {\n    if (this.hoveringValue) {\n      var option = common.getOptionByValue(this.props.data, this.hoveringValue);\n      this.select(option);\n    }\n  };\n\n  Select2.prototype.select = function (option) {\n    if (option !== null) {\n      if (this.props.multiple) {\n        var options = this.option;\n        var index = options.findIndex(function (op) {\n          return op.value === option.value;\n        });\n\n        if (index === -1) {\n          options.push(option);\n        } else {\n          options.splice(index, 1);\n        }\n\n        this.setState({\n          option: this.option\n        });\n      } else {\n        this.option = option;\n        this.isOpen = false;\n        this.setState({\n          option: this.option,\n          isOpen: this.isOpen\n        });\n      }\n    }\n\n    if (this.props.update) {\n      this.props.update(this.props.multiple ? this.option.map(function (op) {\n        return op.value;\n      }) : this.option.value);\n    }\n  };\n\n  Select2.prototype.keyDown = function (e) {\n    if (this.props.keydown) {\n      this.props.keydown(e);\n    }\n\n    if (e.keyCode === 40) {\n      this.moveDown();\n      e.preventDefault();\n    } else if (e.keyCode === 38) {\n      this.moveUp();\n      e.preventDefault();\n    } else if (e.keyCode === 13) {\n      this.selectByEnter();\n      e.preventDefault();\n    }\n  };\n\n  Select2.prototype.keyUp = function (e) {\n    if (this.props.keyup) {\n      this.props.keyup(e);\n    }\n  };\n\n  Select2.prototype.keyPress = function (e) {\n    if (this.props.keypress) {\n      this.props.keypress(e);\n    }\n  };\n\n  Select2.prototype.isSelected = function (option) {\n    return common.isSelected(this.option, option, this.props.multiple);\n  };\n\n  Select2.prototype.isDisabled = function (option) {\n    return option.disabled ? 'true' : 'false';\n  };\n\n  Select2.prototype.focusSearchboxOrResultsElement = function () {\n    if (!this.isSearchboxHidden) {\n      if (this.searchInputElement) {\n        this.searchInputElement.focus();\n      }\n    } else {\n      if (this.resultsElement) {\n        this.resultsElement.focus();\n      }\n    }\n  };\n\n  Select2.prototype.removeSelection = function (e, option) {\n    var _this = this;\n\n    common.removeSelection(this.option, option);\n\n    if (this.props.update) {\n      this.props.update(this.option.map(function (op) {\n        return op.value;\n      }));\n    }\n\n    e.preventDefault();\n    e.stopPropagation();\n\n    if (this.isOpen) {\n      this.setState({\n        option: this.option\n      }, function () {\n        _this.focusSearchboxOrResultsElement();\n      });\n    }\n\n    if (this.focusoutTimer) {\n      clearTimeout(this.focusoutTimer);\n    }\n  };\n\n  Select2.prototype.cancelFocusoutTimer = function () {\n    if (this.focusoutTimer) {\n      clearTimeout(this.focusoutTimer);\n    }\n  };\n\n  return Select2;\n}(React.PureComponent);\n\nexport { Select2 };","map":{"version":3,"sources":["/Users/matthewsmawfield/www/ifrc-covid-dataviz/node_modules/select2-react-component/dist/select2.js"],"names":["__extends","React","ReactDOM","common","Select2","_super","_this","apply","arguments","hoveringValue","option","isOpen","innerSearchText","lastScrollTopIndex","value","props","onChange","e","searchText","currentTarget","setState","Object","defineProperty","prototype","get","set","text","customSearchEnabled","search","enumerable","configurable","getDropdownStyle","getContainerStyle","disabled","getSelectionStyle","multiple","isSearchboxHiddex","data","minCountForSearch","getSearchStyle","isSearchboxHidden","UNSAFE_componentWillReceiveProps","nextProps","updateOptionAndHoveringValue","getOptionsByValue","Array","isArray","UNSAFE_componentWillMount","componentDidMount","theElement","findDOMNode","searchInputElement","childNodes","resultsElement","mounted","componentWillUnmount","cancelFocusoutTimer","render","results","renderResult","selection","renderSelection","createElement","className","containerStyle","onClick","toggleOpenAndClose","selectionStyle","role","dropdownStyle","searchStyle","onKeyDown","keyDown","onKeyUp","keyUp","onKeyPress","keyPress","onFocus","onBlur","focusout","type","autoComplete","autoCorrect","autoCapitalize","maxLength","maximumInputLength","spellCheck","tabIndex","items","map","op","i","title","label","key","removeSelection","component","placeholder","getFilteredData","groupOrOption","options","optionsElements","j","optionElement","getOptionStyle","isSelected","isDisabled","onMouseEnter","mouseenter","click","option_1","canSetState","result","minimumInputLength","length","valueIsNotInFilteredData","getFirstAvailableOption","getLastScrollTopIndex","select","focusoutTimer","clearTimeout","keepSearchText","focusSearchboxOrResultsElement","open","setTimeout","undefined","timeout","moveUp","getPreviousOption","moveDown","getNextOption","selectByEnter","getOptionByValue","index","findIndex","push","splice","update","keydown","keyCode","preventDefault","keyup","keypress","focus","stopPropagation","PureComponent"],"mappings":"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","sourcesContent":["import { __extends } from \"tslib\";\nimport * as React from 'react';\nimport * as ReactDOM from 'react-dom';\nimport * as common from 'select2-component';\nexport * from 'select2-component';\n/**\n * @public\n */\nvar Select2 = /** @class */ (function (_super) {\n    __extends(Select2, _super);\n    function Select2() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.hoveringValue = null;\n        _this.option = null;\n        _this.isOpen = false;\n        _this.innerSearchText = '';\n        _this.lastScrollTopIndex = 0;\n        _this.value = _this.props.value;\n        _this.onChange = function (e) {\n            _this.searchText = e.currentTarget.value;\n            _this.setState({ searchText: _this.searchText });\n        };\n        return _this;\n    }\n    Object.defineProperty(Select2.prototype, \"searchText\", {\n        get: function () {\n            return this.innerSearchText;\n        },\n        set: function (text) {\n            if (this.props.customSearchEnabled && this.props.search) {\n                this.props.search(text);\n            }\n            this.innerSearchText = text;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Select2.prototype, \"dropdownStyle\", {\n        get: function () {\n            return common.getDropdownStyle(this.isOpen);\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Select2.prototype, \"containerStyle\", {\n        get: function () {\n            return common.getContainerStyle(this.props.disabled, this.isOpen);\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Select2.prototype, \"selectionStyle\", {\n        get: function () {\n            return common.getSelectionStyle(this.props.multiple);\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Select2.prototype, \"isSearchboxHidden\", {\n        get: function () {\n            return this.props.customSearchEnabled\n                ? false\n                : common.isSearchboxHiddex(this.props.data, this.props.minCountForSearch);\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Select2.prototype, \"searchStyle\", {\n        get: function () {\n            return common.getSearchStyle(this.isSearchboxHidden);\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Select2.prototype.UNSAFE_componentWillReceiveProps = function (nextProps) {\n        var _this = this;\n        if (nextProps.value !== this.value) {\n            this.value = nextProps.value;\n            this.setState({ value: nextProps.value }, function () {\n                _this.updateOptionAndHoveringValue();\n            });\n        }\n    };\n    Select2.prototype.updateOptionAndHoveringValue = function () {\n        var option = common.getOptionsByValue(this.props.data, this.value, this.props.multiple);\n        if (option !== null) {\n            this.option = option;\n            this.setState({ option: this.option });\n        }\n        if (!Array.isArray(option)) {\n            this.hoveringValue = this.value;\n        }\n        this.setState({ hoveringValue: this.hoveringValue });\n    };\n    Select2.prototype.UNSAFE_componentWillMount = function () {\n        this.updateOptionAndHoveringValue();\n    };\n    Select2.prototype.componentDidMount = function () {\n        var theElement = ReactDOM.findDOMNode(this);\n        this.searchInputElement = theElement.childNodes[1].childNodes[0].childNodes[0].childNodes[0];\n        this.resultsElement = theElement.childNodes[1].childNodes[0].childNodes[1].childNodes[0];\n        this.mounted = true;\n        this.value = this.props.value;\n    };\n    Select2.prototype.componentWillUnmount = function () {\n        this.mounted = false;\n        this.cancelFocusoutTimer();\n    };\n    Select2.prototype.render = function () {\n        var _this = this;\n        var results = this.renderResult();\n        var selection = this.renderSelection();\n        return (React.createElement(\"div\", { className: this.containerStyle },\n            React.createElement(\"div\", { className: 'selection', onClick: function () { return _this.toggleOpenAndClose(); } },\n                React.createElement(\"div\", { className: this.selectionStyle, role: 'combobox' }, selection)),\n            React.createElement(\"div\", { className: this.dropdownStyle },\n                React.createElement(\"div\", { className: 'select2-dropdown select2-dropdown--below' },\n                    React.createElement(\"div\", { className: this.searchStyle },\n                        React.createElement(\"input\", { value: this.searchText, onChange: this.onChange, onKeyDown: function (e) { return _this.keyDown(e); }, onKeyUp: function (e) { return _this.keyUp(e); }, onKeyPress: function (e) { return _this.keyPress(e); }, onFocus: function () { return _this.cancelFocusoutTimer(); }, onBlur: function () { return _this.focusout(); }, className: 'select2-search__field', type: 'search', role: 'textbox', autoComplete: 'off', autoCorrect: 'off', autoCapitalize: 'off', maxLength: this.props.maximumInputLength, spellCheck: false })),\n                    React.createElement(\"div\", { className: 'select2-results' },\n                        React.createElement(\"ul\", { className: 'select2-results__options', role: 'tree', tabIndex: -1, onKeyDown: function (e) { return _this.keyDown(e); }, onFocus: function () { return _this.cancelFocusoutTimer(); }, onBlur: function () { return _this.focusout(); } }, results))))));\n    };\n    Select2.prototype.renderSelection = function () {\n        var _this = this;\n        if (this.props.multiple) {\n            var items = this.option.map(function (op, i) { return (React.createElement(\"li\", { className: 'select2-selection__choice', title: op.label, key: i },\n                React.createElement(\"span\", { onClick: function (e) { return _this.removeSelection(e, op); }, className: 'select2-selection__choice__remove', role: 'presentation' }, \"\\u00D7\"),\n                op.label)); });\n            return (React.createElement(\"ul\", { className: 'select2-selection__rendered' }, items));\n        }\n        else {\n            var option = this.option;\n            var label = option\n                ? (option.component ? React.createElement(option.component, { option: option }) : option.label)\n                : React.createElement(\"span\", { className: 'select2-selection__placeholder' }, this.props.placeholder);\n            return [\n                React.createElement(\"span\", { key: 'label', className: 'select2-selection__rendered', title: option ? option.label : '' }, label),\n                React.createElement(\"span\", { key: 'arrow', className: 'select2-selection__arrow', role: 'presentation' },\n                    React.createElement(\"b\", { role: 'presentation' }))\n            ];\n        }\n    };\n    Select2.prototype.renderResult = function () {\n        var _this = this;\n        return this.getFilteredData(false).map(function (groupOrOption, i) {\n            var options = groupOrOption.options;\n            if (options) {\n                var optionsElements = options.map(function (option, j) {\n                    var optionElement = option.component\n                        ? React.createElement(option.component, { option: option })\n                        : option.label;\n                    return (React.createElement(\"li\", { className: _this.getOptionStyle(option), key: j, role: 'treeitem', \"aria-selected\": _this.isSelected(option), \"aria-disabled\": _this.isDisabled(option), onMouseEnter: function () { return _this.mouseenter(option); }, onClick: function () { return _this.click(option); } }, optionElement));\n                });\n                return (React.createElement(\"li\", { className: 'select2-results__option', role: 'group', key: i },\n                    React.createElement(\"strong\", { className: 'select2-results__group' }, groupOrOption.label),\n                    React.createElement(\"ul\", { className: 'select2-results__options select2-results__options--nested' }, optionsElements)));\n            }\n            else {\n                var option_1 = groupOrOption;\n                var optionElement = option_1.component\n                    ? React.createElement(option_1.component, { option: option_1 })\n                    : option_1.label;\n                return (React.createElement(\"li\", { className: _this.getOptionStyle(option_1), key: i, role: 'treeitem', \"aria-selected\": _this.isSelected(option_1), \"aria-disabled\": _this.isDisabled(option_1), onMouseEnter: function () { return _this.mouseenter(option_1); }, onClick: function () { return _this.click(option_1); } }, optionElement));\n            }\n        });\n    };\n    Select2.prototype.getFilteredData = function (canSetState) {\n        var result = this.props.customSearchEnabled\n            || (this.props.minimumInputLength && this.props.minimumInputLength > this.searchText.length)\n            ? this.props.data\n            : common.getFilteredData(this.props.data, this.searchText);\n        if (common.valueIsNotInFilteredData(result, this.hoveringValue)) {\n            this.hoveringValue = common.getFirstAvailableOption(result);\n            if (canSetState) {\n                this.setState({ hoveringValue: this.hoveringValue });\n            }\n            if (this.resultsElement) {\n                var lastScrollTopIndex = common.getLastScrollTopIndex(this.hoveringValue, this.resultsElement, result, this.lastScrollTopIndex);\n                if (lastScrollTopIndex !== null) {\n                    this.lastScrollTopIndex = lastScrollTopIndex;\n                    if (canSetState) {\n                        this.setState({ lastScrollTopIndex: this.lastScrollTopIndex });\n                    }\n                }\n            }\n        }\n        return result;\n    };\n    Select2.prototype.getOptionStyle = function (option) {\n        return common.getOptionStyle(option, this.hoveringValue);\n    };\n    Select2.prototype.mouseenter = function (option) {\n        if (!option.disabled) {\n            this.hoveringValue = option.value;\n            this.setState({ hoveringValue: this.hoveringValue });\n        }\n    };\n    Select2.prototype.click = function (option) {\n        if (!option.disabled) {\n            this.select(option);\n        }\n        if (this.focusoutTimer) {\n            clearTimeout(this.focusoutTimer);\n        }\n    };\n    Select2.prototype.toggleOpenAndClose = function () {\n        var _this = this;\n        if (this.props.disabled) {\n            return;\n        }\n        this.isOpen = !this.isOpen;\n        this.setState({ isOpen: this.isOpen });\n        if (this.isOpen) {\n            if (!this.props.keepSearchText) {\n                this.innerSearchText = '';\n            }\n            this.setState({ searchText: this.searchText }, function () {\n                _this.focusSearchboxOrResultsElement();\n                if (_this.resultsElement) {\n                    var lastScrollTopIndex = common.getLastScrollTopIndex(_this.hoveringValue, _this.resultsElement, _this.props.data, _this.lastScrollTopIndex);\n                    if (lastScrollTopIndex !== null) {\n                        _this.lastScrollTopIndex = lastScrollTopIndex;\n                    }\n                }\n            });\n            if (this.props.open) {\n                this.props.open();\n            }\n        }\n        if (this.focusoutTimer) {\n            clearTimeout(this.focusoutTimer);\n        }\n    };\n    Select2.prototype.focusout = function () {\n        var _this = this;\n        this.focusoutTimer = setTimeout(function () {\n            _this.isOpen = false;\n            if (_this.mounted) {\n                _this.setState({ isOpen: _this.isOpen });\n            }\n            _this.focusoutTimer = undefined;\n        }, common.timeout);\n    };\n    Select2.prototype.moveUp = function () {\n        this.hoveringValue = common.getPreviousOption(this.getFilteredData(true), this.hoveringValue);\n        this.setState({ hoveringValue: this.hoveringValue });\n        if (this.resultsElement) {\n            var lastScrollTopIndex = common.getLastScrollTopIndex(this.hoveringValue, this.resultsElement, this.getFilteredData(true), this.lastScrollTopIndex);\n            if (lastScrollTopIndex !== null) {\n                this.lastScrollTopIndex = lastScrollTopIndex;\n                this.setState({ lastScrollTopIndex: this.lastScrollTopIndex });\n            }\n        }\n    };\n    Select2.prototype.moveDown = function () {\n        this.hoveringValue = common.getNextOption(this.getFilteredData(true), this.hoveringValue);\n        this.setState({ hoveringValue: this.hoveringValue });\n        if (this.resultsElement) {\n            var lastScrollTopIndex = common.getLastScrollTopIndex(this.hoveringValue, this.resultsElement, this.getFilteredData(true), this.lastScrollTopIndex);\n            if (lastScrollTopIndex !== null) {\n                this.lastScrollTopIndex = lastScrollTopIndex;\n                this.setState({ lastScrollTopIndex: this.lastScrollTopIndex });\n            }\n        }\n    };\n    Select2.prototype.selectByEnter = function () {\n        if (this.hoveringValue) {\n            var option = common.getOptionByValue(this.props.data, this.hoveringValue);\n            this.select(option);\n        }\n    };\n    Select2.prototype.select = function (option) {\n        if (option !== null) {\n            if (this.props.multiple) {\n                var options = this.option;\n                var index = options.findIndex(function (op) { return op.value === option.value; });\n                if (index === -1) {\n                    options.push(option);\n                }\n                else {\n                    options.splice(index, 1);\n                }\n                this.setState({\n                    option: this.option\n                });\n            }\n            else {\n                this.option = option;\n                this.isOpen = false;\n                this.setState({\n                    option: this.option,\n                    isOpen: this.isOpen\n                });\n            }\n        }\n        if (this.props.update) {\n            this.props.update(this.props.multiple ? this.option.map(function (op) { return op.value; }) : this.option.value);\n        }\n    };\n    Select2.prototype.keyDown = function (e) {\n        if (this.props.keydown) {\n            this.props.keydown(e);\n        }\n        if (e.keyCode === 40) {\n            this.moveDown();\n            e.preventDefault();\n        }\n        else if (e.keyCode === 38) {\n            this.moveUp();\n            e.preventDefault();\n        }\n        else if (e.keyCode === 13) {\n            this.selectByEnter();\n            e.preventDefault();\n        }\n    };\n    Select2.prototype.keyUp = function (e) {\n        if (this.props.keyup) {\n            this.props.keyup(e);\n        }\n    };\n    Select2.prototype.keyPress = function (e) {\n        if (this.props.keypress) {\n            this.props.keypress(e);\n        }\n    };\n    Select2.prototype.isSelected = function (option) {\n        return common.isSelected(this.option, option, this.props.multiple);\n    };\n    Select2.prototype.isDisabled = function (option) {\n        return option.disabled ? 'true' : 'false';\n    };\n    Select2.prototype.focusSearchboxOrResultsElement = function () {\n        if (!this.isSearchboxHidden) {\n            if (this.searchInputElement) {\n                this.searchInputElement.focus();\n            }\n        }\n        else {\n            if (this.resultsElement) {\n                this.resultsElement.focus();\n            }\n        }\n    };\n    Select2.prototype.removeSelection = function (e, option) {\n        var _this = this;\n        common.removeSelection(this.option, option);\n        if (this.props.update) {\n            this.props.update(this.option.map(function (op) { return op.value; }));\n        }\n        e.preventDefault();\n        e.stopPropagation();\n        if (this.isOpen) {\n            this.setState({ option: this.option }, function () {\n                _this.focusSearchboxOrResultsElement();\n            });\n        }\n        if (this.focusoutTimer) {\n            clearTimeout(this.focusoutTimer);\n        }\n    };\n    Select2.prototype.cancelFocusoutTimer = function () {\n        if (this.focusoutTimer) {\n            clearTimeout(this.focusoutTimer);\n        }\n    };\n    return Select2;\n}(React.PureComponent));\nexport { Select2 };\n"]},"metadata":{},"sourceType":"module"}