{"ast":null,"code":"import*as d3 from\"d3\";import{drawTimechart,updateTimechart}from'./Timechart';import{updateRegionchart}from'./Regionchart';import colors from'./colors';import tippy from'tippy.js';import'tippy.js/dist/svg-arrow.css';import'tippy.js/themes/light.css';import{jsPDF}from\"jspdf\";import html2canvas from'html2canvas';var selectedToggle='#595454';var unselectedToggle='#EAEAEA';var unselectedToggleText='#000';var selectedToggleText='#FFF';function Layout(svg,options,data,filter,updateTable,updateMap){// vaccine info\nd3.select('#vaccine_tooltip').attr('opacity',0).style('display','none');d3.select('#vaccine_info path').attr('fill',colors.black);svg.select('#vaccine_info').style('cursor','pointer').on('mouseover',function(event,bd){d3.select('#svg_container').style('z-index',10);d3.select('#vaccine_tooltip').style('display','inline').transition().duration(500).attr('opacity',1);d3.select('#vaccine_info path').transition().duration(200).attr('fill',colors.blue);}).on('mouseout',function(event,d){d3.select('#svg_container').style('z-index',1);d3.select('#vaccine_tooltip').style('display','none').attr('opacity',0);d3.select('#vaccine_info path').transition().duration(500).attr('fill',colors.black);});// region chart toggle\nsvg.select('#region_remove_filter').attr('opacity',0).style('cursor','pointer').on('click',function(d,i){options.region_filter=[];filter('clear-region');});svg.select('#region_switch').style('cursor','pointer').on('click',function(d,i){if(options.region_switch=='total'){options.region_switch='per100';d3.select('#region_switch_toggle').transition().duration(200).attr('x',15.1);}else{options.region_switch='total';d3.select('#region_switch_toggle').transition().duration(200).attr('x',3.1);}updateRegionchart(options,data);});svg.select('#region-chart-toggle #region-chart-toggle-cases').style('cursor','pointer').on('click',function(d){if(options.region_chart_toggle==='cases')return false;options.region_chart_toggle='cases';svg.selectAll('#region-chart-toggle rect').attr('fill',unselectedToggle);svg.selectAll('#region-chart-toggle text').attr('fill',unselectedToggleText);svg.select('#region-chart-toggle-cases rect').attr('fill',selectedToggle);svg.select('#region-chart-toggle-cases text').attr('fill',selectedToggleText);updateRegionchart(options,data);});svg.select('#region-chart-toggle #region-chart-toggle-deaths').style('cursor','pointer').on('click',function(d){if(options.region_chart_toggle==='deaths')return false;options.region_chart_toggle='deaths';svg.selectAll('#region-chart-toggle rect').attr('fill',unselectedToggle);svg.selectAll('#region-chart-toggle text').attr('fill',unselectedToggleText);svg.select('#region-chart-toggle-deaths rect').attr('fill',selectedToggle);svg.select('#region-chart-toggle-deaths text').attr('fill',selectedToggleText);updateRegionchart(options,data);});svg.select('#region-chart-toggle #region-chart-toggle-vaccines').style('cursor','pointer').on('click',function(d){if(options.region_chart_toggle==='vaccines')return false;options.region_chart_toggle='vaccines';svg.selectAll('#region-chart-toggle rect').attr('fill',unselectedToggle);svg.selectAll('#region-chart-toggle text').attr('fill',unselectedToggleText);svg.select('#region-chart-toggle-vaccines rect').attr('fill',selectedToggle);svg.select('#region-chart-toggle-vaccines text').attr('fill',selectedToggleText);updateRegionchart(options,data);});// map toggle\nsvg.select('#map-toggle #map-toggle-bi-weekly-change').style('cursor','pointer').on('click',function(d){if(options.map_toggle==='bi-weekly-change')return false;options.map_toggle='bi-weekly-change';svg.selectAll('#map-toggle rect').attr('fill',unselectedToggle);svg.selectAll('#map-toggle text').attr('fill',unselectedToggleText);svg.select('#map-toggle-bi-weekly-change rect').attr('fill',selectedToggle);svg.select('#map-toggle-bi-weekly-change text').attr('fill',selectedToggleText);// update map legend\nupdateMap(data,options,700);});svg.select('#map-toggle #map-toggle-cases').style('cursor','pointer').on('click',function(d){if(options.map_toggle==='cases')return false;options.map_toggle='cases';svg.selectAll('#map-toggle rect').attr('fill',unselectedToggle);svg.selectAll('#map-toggle text').attr('fill',unselectedToggleText);svg.select('#map-toggle-cases rect').attr('fill',selectedToggle);svg.select('#map-toggle-cases text').attr('fill',selectedToggleText);// update map legend\nupdateMap(data,options,700);});svg.select('#map-toggle #map-toggle-deaths').style('cursor','pointer').on('click',function(d){if(options.map_toggle==='deaths')return false;options.map_toggle='deaths';svg.selectAll('#map-toggle rect').attr('fill',unselectedToggle);svg.selectAll('#map-toggle text').attr('fill',unselectedToggleText);svg.select('#map-toggle-deaths rect').attr('fill',selectedToggle);svg.select('#map-toggle-deaths text').attr('fill',selectedToggleText);// update map legend\nupdateMap(data,options,700);});svg.select('#map-toggle #map-toggle-percent-fully-vaccinated').style('cursor','pointer').on('click',function(d){if(options.map_toggle==='percent-fully-vaccinated')return false;options.map_toggle='percent-fully-vaccinated';svg.selectAll('#map-toggle rect').attr('fill',unselectedToggle);svg.selectAll('#map-toggle text').attr('fill',unselectedToggleText);svg.select('#map-toggle-percent-fully-vaccinated rect').attr('fill',selectedToggle);svg.select('#map-toggle-percent-fully-vaccinated text').attr('fill',selectedToggleText);// update map legend\nupdateMap(data,options,700);});svg.select('#map-toggle #map-toggle-percent-vaccine-acceptance').style('cursor','pointer').on('click',function(d){if(options.map_toggle==='percent-vaccine-acceptance')return false;options.map_toggle='percent-vaccine-acceptance';svg.selectAll('#map-toggle rect').attr('fill',unselectedToggle);svg.selectAll('#map-toggle text').attr('fill',unselectedToggleText);svg.select('#map-toggle-percent-vaccine-acceptance rect').attr('fill',selectedToggle);svg.select('#map-toggle-percent-vaccine-acceptance text').attr('fill',selectedToggleText);// update map legend\nupdateMap(data,options,700);});// time chart type \nsvg.select('#timechart-type-toggle #timechart-type-toggle-cumulative').style('cursor','pointer').on('click',function(d){if(options.timeline_type==='cumulative')return false;options.timeline_type='cumulative';svg.selectAll('#timechart-type-toggle rect').attr('fill',unselectedToggle);svg.selectAll('#timechart-type-toggle polyline').attr('stroke',unselectedToggleText);svg.select('#timechart-type-toggle-cumulative rect').attr('fill',selectedToggle);svg.select('#timechart-type-toggle-cumulative polyline').attr('stroke',selectedToggleText);svg.selectAll('#timechart-type-toggle-stacked polygon').attr('fill',selectedToggle);updateTimechart(data,options);});tippy('#timechart-type-toggle-cumulative',{content:'Cumulative',duration:0,placement:'bottom',theme:'light',arrow:true,delay:[500,200]});svg.select('#timechart-type-toggle #timechart-type-toggle-non-cumulative').style('cursor','pointer').on('click',function(d){if(options.timeline_type==='non-cumulative')return false;options.timeline_type='non-cumulative';svg.selectAll('#timechart-type-toggle rect').attr('fill',unselectedToggle);svg.selectAll('#timechart-type-toggle polyline').attr('stroke',unselectedToggleText);svg.select('#timechart-type-toggle-non-cumulative rect').attr('fill',selectedToggle);svg.select('#timechart-type-toggle-non-cumulative polyline').attr('stroke',selectedToggleText);svg.selectAll('#timechart-type-toggle-stacked polygon').attr('fill',selectedToggle);updateTimechart(data,options);});tippy('#timechart-type-toggle-non-cumulative',{content:'Non-cumulative',duration:0,placement:'bottom',theme:'light',arrow:true,delay:[500,200]});svg.select('#timechart-type-toggle #timechart-type-toggle-stacked').style('cursor','pointer').on('click',function(d){if(options.timeline_type==='stacked')return false;options.timeline_type='stacked';svg.selectAll('#timechart-type-toggle rect').attr('fill',unselectedToggle);svg.selectAll('#timechart-type-toggle polyline').attr('stroke',unselectedToggleText);svg.select('#timechart-type-toggle-stacked rect').attr('fill',selectedToggle);svg.select('#timechart-type-toggle-stacked polyline').attr('stroke',selectedToggleText);svg.selectAll('#timechart-type-toggle-stacked polygon').attr('fill',selectedToggleText);updateTimechart(data,options);});tippy('#timechart-type-toggle-stacked',{content:'Stacked 100%',duration:0,placement:'bottom',theme:'light',arrow:true,delay:[500,200]});// time chart frequency toggle\nsvg.select('#timechart-frequency-toggle #timechart-frequency-toggle-day').style('cursor','pointer').on('click',function(d){if(options.timeline_frequency==='day')return false;options.timeline_frequency='day';svg.selectAll('#timechart-frequency-toggle rect').attr('fill',unselectedToggle);svg.selectAll('#timechart-frequency-toggle text').attr('fill',unselectedToggleText);svg.select('#timechart-frequency-toggle-day rect').attr('fill',selectedToggle);svg.select('#timechart-frequency-toggle-day text').attr('fill',selectedToggleText);svg.select('#tooltip_frequency tspan').attr('text-anchor','end').attr('dx',20).text('DAY');drawTimechart(data,options);});svg.select('#timechart-frequency-toggle #timechart-frequency-toggle-week').style('cursor','pointer').on('click',function(d){if(options.timeline_frequency==='week')return false;options.timeline_frequency='week';svg.selectAll('#timechart-frequency-toggle rect').attr('fill',unselectedToggle);svg.selectAll('#timechart-frequency-toggle text').attr('fill',unselectedToggleText);svg.select('#timechart-frequency-toggle-week rect').attr('fill',selectedToggle);svg.select('#tooltip_frequency tspan').attr('text-anchor','end').attr('dx',20).text('WEEK');svg.select('#timechart-frequency-toggle-week text').attr('fill',selectedToggleText);drawTimechart(data,options);});svg.select('#timechart-frequency-toggle #timechart-frequency-toggle-month').style('cursor','pointer').on('click',function(d){if(options.timeline_frequency==='month')return false;options.timeline_frequency='month';svg.selectAll('#timechart-frequency-toggle rect').attr('fill',unselectedToggle);svg.selectAll('#timechart-frequency-toggle text').attr('fill',unselectedToggleText);svg.select('#timechart-frequency-toggle-month rect').attr('fill',selectedToggle);svg.select('#tooltip_frequency tspan').attr('text-anchor','end').attr('dx',20).text('MONTH');svg.select('#timechart-frequency-toggle-month text').attr('fill',selectedToggleText);drawTimechart(data,options);});// HDI toggle\nsvg.select('#hdi_remove_filter').attr('opacity',0).style('cursor','pointer').on('click',function(d,i){d3.selectAll('#hdi-toggle-very-high, #hdi-toggle-high, #hdi-toggle-medium, #hdi-toggle-low').attr('opacity',1);filter('clear-hdi');});svg.select('#hdi-toggle #hdi-toggle-very-high').style('cursor','pointer').on('click',function(d){toggle(options.hdi_filter,'very-high');if(options.hdi_filter.length===4){options.hdi_filter=[];d3.selectAll('#hdi-toggle-very-high, #hdi-toggle-high, #hdi-toggle-medium, #hdi-toggle-low').attr('opacity',1);}else if(options.hdi_filter.length===0){d3.selectAll('#hdi-toggle-very-high, #hdi-toggle-high, #hdi-toggle-medium, #hdi-toggle-low').attr('opacity',1);}else if(options.hdi_filter.length>0){d3.selectAll('#hdi-toggle-very-high, #hdi-toggle-high, #hdi-toggle-medium, #hdi-toggle-low').attr('opacity',0.3);}if(options.hdi_filter.length>0){options.hdi_filter.forEach(function(d,i){d3.select('#hdi-toggle-'+d).attr('opacity',1);});}filter('hdi');});svg.select('#hdi-toggle #hdi-toggle-high').style('cursor','pointer').on('click',function(d){toggle(options.hdi_filter,'high');if(options.hdi_filter.length===4){options.hdi_filter=[];d3.selectAll('#hdi-toggle-very-high, #hdi-toggle-high, #hdi-toggle-medium, #hdi-toggle-low').attr('opacity',1);}else if(options.hdi_filter.length===0){d3.selectAll('#hdi-toggle-very-high, #hdi-toggle-high, #hdi-toggle-medium, #hdi-toggle-low').attr('opacity',1);}else if(options.hdi_filter.length>0){d3.selectAll('#hdi-toggle-very-high, #hdi-toggle-high, #hdi-toggle-medium, #hdi-toggle-low').attr('opacity',0.3);}if(options.hdi_filter.length>0){options.hdi_filter.forEach(function(d,i){d3.select('#hdi-toggle-'+d).attr('opacity',1);});}filter('hdi');});svg.select('#hdi-toggle #hdi-toggle-medium').style('cursor','pointer').on('click',function(d){toggle(options.hdi_filter,'medium');if(options.hdi_filter.length===4){options.hdi_filter=[];d3.selectAll('#hdi-toggle-very-high, #hdi-toggle-high, #hdi-toggle-medium, #hdi-toggle-low').attr('opacity',1);}else if(options.hdi_filter.length===0){d3.selectAll('#hdi-toggle-very-high, #hdi-toggle-high, #hdi-toggle-medium, #hdi-toggle-low').attr('opacity',1);}else if(options.hdi_filter.length>0){d3.selectAll('#hdi-toggle-very-high, #hdi-toggle-high, #hdi-toggle-medium, #hdi-toggle-low').attr('opacity',0.3);}if(options.hdi_filter.length>0){options.hdi_filter.forEach(function(d,i){d3.select('#hdi-toggle-'+d).attr('opacity',1);});}filter('hdi');});svg.select('#hdi-toggle #hdi-toggle-low').style('cursor','pointer').on('click',function(d){toggle(options.hdi_filter,'low');if(options.hdi_filter.length===4){options.hdi_filter=[];d3.selectAll('#hdi-toggle-very-high, #hdi-toggle-high, #hdi-toggle-medium, #hdi-toggle-low').attr('opacity',1);}else if(options.hdi_filter.length===0){d3.selectAll('#hdi-toggle-very-high, #hdi-toggle-high, #hdi-toggle-medium, #hdi-toggle-low').attr('opacity',1);}else if(options.hdi_filter.length>0){d3.selectAll('#hdi-toggle-very-high, #hdi-toggle-high, #hdi-toggle-medium, #hdi-toggle-low').attr('opacity',0.3);}if(options.hdi_filter.length>0){options.hdi_filter.forEach(function(d,i){d3.select('#hdi-toggle-'+d).attr('opacity',1);});}filter('hdi');});// inform severity toggle\nsvg.select('#inform_remove_filter').attr('opacity',0).style('cursor','pointer').on('click',function(d,i){d3.selectAll('#inform-toggle-very-high, #inform-toggle-high, #inform-toggle-medium, #inform-toggle-low, #inform-toggle-no-score').attr('opacity',1);filter('clear-inform');});svg.select('#inform-toggle #inform-toggle-no-score').style('cursor','pointer').on('click',function(d){toggle(options.inform_filter,'no-score');if(options.inform_filter.length===5){options.inform_filter=[];d3.selectAll('#inform-toggle-very-high, #inform-toggle-high, #inform-toggle-medium, #inform-toggle-low, #inform-toggle-no-score').attr('opacity',1);}else if(options.inform_filter.length===0){d3.selectAll('#inform-toggle-very-high, #inform-toggle-high, #inform-toggle-medium, #inform-toggle-low, #inform-toggle-no-score').attr('opacity',1);}else if(options.inform_filter.length>0){d3.selectAll('#inform-toggle-very-high, #inform-toggle-high, #inform-toggle-medium, #inform-toggle-low, #inform-toggle-no-score').attr('opacity',0.3);}if(options.inform_filter.length>0){options.inform_filter.forEach(function(d,i){d3.select('#inform-toggle-'+d).attr('opacity',1);});}filter('inform');});svg.select('#inform-toggle #inform-toggle-low').style('cursor','pointer').on('click',function(d){toggle(options.inform_filter,'low');if(options.inform_filter.length===5){options.inform_filter=[];d3.selectAll('#inform-toggle-very-high, #inform-toggle-high, #inform-toggle-medium, #inform-toggle-low, #inform-toggle-no-score').attr('opacity',1);}else if(options.inform_filter.length===0){d3.selectAll('#inform-toggle-very-high, #inform-toggle-high, #inform-toggle-medium, #inform-toggle-low, #inform-toggle-no-score').attr('opacity',1);}else if(options.inform_filter.length>0){d3.selectAll('#inform-toggle-very-high, #inform-toggle-high, #inform-toggle-medium, #inform-toggle-low, #inform-toggle-no-score').attr('opacity',0.3);}if(options.inform_filter.length>0){options.inform_filter.forEach(function(d,i){d3.select('#inform-toggle-'+d).attr('opacity',1);});}filter('inform');});svg.select('#inform-toggle #inform-toggle-medium').style('cursor','pointer').on('click',function(d){toggle(options.inform_filter,'medium');if(options.inform_filter.length===5){options.inform_filter=[];d3.selectAll('#inform-toggle-very-high, #inform-toggle-high, #inform-toggle-medium, #inform-toggle-low, #inform-toggle-no-score').attr('opacity',1);}else if(options.inform_filter.length===0){d3.selectAll('#inform-toggle-very-high, #inform-toggle-high, #inform-toggle-medium, #inform-toggle-low, #inform-toggle-no-score').attr('opacity',1);}else if(options.inform_filter.length>0){d3.selectAll('#inform-toggle-very-high, #inform-toggle-high, #inform-toggle-medium, #inform-toggle-low, #inform-toggle-no-score').attr('opacity',0.3);}if(options.inform_filter.length>0){options.inform_filter.forEach(function(d,i){d3.select('#inform-toggle-'+d).attr('opacity',1);});}filter('inform');});svg.select('#inform-toggle #inform-toggle-high').style('cursor','pointer').on('click',function(d){toggle(options.inform_filter,'high');if(options.inform_filter.length===5){options.inform_filter=[];d3.selectAll('#inform-toggle-very-high, #inform-toggle-high, #inform-toggle-medium, #inform-toggle-low, #inform-toggle-no-score').attr('opacity',1);}else if(options.inform_filter.length===0){d3.selectAll('#inform-toggle-very-high, #inform-toggle-high, #inform-toggle-medium, #inform-toggle-low, #inform-toggle-no-score').attr('opacity',1);}else if(options.inform_filter.length>0){d3.selectAll('#inform-toggle-very-high, #inform-toggle-high, #inform-toggle-medium, #inform-toggle-low, #inform-toggle-no-score').attr('opacity',0.3);}if(options.inform_filter.length>0){options.inform_filter.forEach(function(d,i){d3.select('#inform-toggle-'+d).attr('opacity',1);});}filter('inform');});svg.select('#inform-toggle #inform-toggle-very-high').style('cursor','pointer').on('click',function(d){toggle(options.inform_filter,'very-high');if(options.inform_filter.length===5){options.inform_filter=[];d3.selectAll('#inform-toggle-very-high, #inform-toggle-high, #inform-toggle-medium, #inform-toggle-low, #inform-toggle-no-score').attr('opacity',1);}else if(options.inform_filter.length===0){d3.selectAll('#inform-toggle-very-high, #inform-toggle-high, #inform-toggle-medium, #inform-toggle-low, #inform-toggle-no-score').attr('opacity',1);}else if(options.inform_filter.length>0){d3.selectAll('#inform-toggle-very-high, #inform-toggle-high, #inform-toggle-medium, #inform-toggle-low, #inform-toggle-no-score').attr('opacity',0.3);}if(options.inform_filter.length>0){options.inform_filter.forEach(function(d,i){d3.select('#inform-toggle-'+d).attr('opacity',1);});}filter('inform');});// tabs\nd3.select('#additional-indicators-tab').attr('opacity',0).select('#additional-indicators-tab-content').attr('display','none');d3.select('#vac-tab').attr('opacity',1).select('#vac-tab-content').attr('display','inline');d3.select('#bubblechart-tab').attr('opacity',0).selectAll('#bubblechart, #bubblechart-tab-content').attr('display','none');d3.select('#bubbleSelectContainer').style('display','none');svg.select('#tabs #vaccination-tab').style('cursor','pointer').on('click',function(d){if(options.tab_toggle==='vaccination-data')return false;options.tab_toggle='vaccination-data';d3.select('#additional-indicators-tab').attr('opacity',0).select('#additional-indicators-tab-content').attr('display','none');d3.select('#vac-tab').attr('opacity',1).select('#vac-tab-content').attr('display','inline');d3.select('#bubblechart-tab').attr('opacity',0).selectAll('#bubblechart, #bubblechart-tab-content').attr('display','none');svg.selectAll('#tabs rect').attr('fill',unselectedToggle);svg.selectAll('#tabs text').attr('fill',unselectedToggleText);svg.select('#vaccination-tab rect').attr('fill',selectedToggle);svg.select('#vaccination-tab text').attr('fill',selectedToggleText);d3.select('#bubbleSelectContainer').style('display','none');});svg.select('#tabs #indicators-tab').style('cursor','pointer').on('click',function(d){if(options.tab_toggle==='indicators')return false;options.tab_toggle='indicators';d3.select('#additional-indicators-tab').attr('opacity',1).select('#additional-indicators-tab-content').attr('display','inline');d3.select('#vac-tab').attr('opacity',0).select('#vac-tab-content').attr('display','none');d3.select('#bubblechart-tab').attr('opacity',0).selectAll('#bubblechart, #bubblechart-tab-content').attr('display','none');svg.selectAll('#tabs rect').attr('fill',unselectedToggle);svg.selectAll('#tabs text').attr('fill',unselectedToggleText);svg.select('#indicators-tab rect').attr('fill',selectedToggle);svg.select('#indicators-tab text').attr('fill',selectedToggleText);d3.select('#bubbleSelectContainer').style('display','none');});svg.select('#tabs #bubble-chart-tab').style('cursor','pointer').on('click',function(d){if(options.tab_toggle==='bubble-chartt')return false;options.tab_toggle='bubble-chart';d3.select('#additional-indicators-tab').attr('opacity',0).select('#additional-indicators-tab-content').attr('display','none');d3.select('#vac-tab').attr('opacity',0).select('#vac-tab-content').attr('display','none');d3.select('#bubblechart-tab').attr('opacity',1).selectAll('#bubblechart, #bubblechart-tab-content').attr('display','inline');svg.selectAll('#tabs rect').attr('fill',unselectedToggle);svg.selectAll('#tabs text').attr('fill',unselectedToggleText);svg.select('#bubble-chart-tab rect').attr('fill',selectedToggle);svg.select('#bubble-chart-tab text').attr('fill',selectedToggleText);d3.select('#bubbleSelectContainer').style('display','inline-block');});// time chart mask\nd3.select('#svg defs').append('clipPath').attr('id','mask').append('rect').attr('y',340).attr('height',590).attr('width',660).attr('x',22);// append timechart svg\nvar timechartContainer=svg.select('#timechart_container').attr('opacity',0);var tcSize={x:timechartContainer.attr('x'),y:timechartContainer.attr('y'),width:timechartContainer.attr('width'),height:timechartContainer.attr('height')};var timechartSvg=svg.append('svg').attr('id','timechart_svg').attr('viewBox','0 0 '+2000+' '+tcSize.height).attr('preserveAspectRatio',\"none\").attr('x',tcSize.x).attr('y',tcSize.y).attr('width',tcSize.width).attr('height',tcSize.height);var layer1=timechartSvg.append('g').attr('id','layer1');var timechartBg=timechartSvg.append('g').attr('id','layer0');layer1.append('rect').attr('x',0).attr('y',0).attr('width','100%').attr('height','100%').attr('opacity',0).style('fill','transparent');// table bars\nvar tableRowHeight=18;var tableBarYOffset=68;var _loop=function _loop(i){// col 1 bg\nd3.select('#vac-tab').append('rect').attr('class','col1bg colbg').attr('id','col1bg'+i).attr('x',120).attr('y',function(){return tableBarYOffset+i*24.8;}).attr('height',tableRowHeight).attr('width',68).attr('fill',colors.lightgrey);// col 1 bar\nd3.select('#vac-tab').append('rect').attr('class','col1bar').attr('id','col1bar'+i).attr('x',120).attr('y',function(){return tableBarYOffset+i*24.8;}).attr('height',tableRowHeight).attr('width',0).attr('fill',colors.blue);// col 2 bg\nd3.select('#vac-tab').append('rect').attr('class','col2bg colbg').attr('id','col2bg'+i).attr('x',230).attr('y',function(){return tableBarYOffset+i*24.8;}).attr('height',tableRowHeight).attr('width',68).attr('fill',colors.lightgrey);// col 2 bar\nd3.select('#vac-tab').append('rect').attr('class','col2bar').attr('id','col2bar'+i).attr('x',230).attr('y',function(){return tableBarYOffset+i*24.8;}).attr('height',tableRowHeight).attr('width',0).attr('fill',colors.blue);// col 3 bg\nd3.select('#vac-tab').append('rect').attr('class','col3bg colbg').attr('id','col3bg'+i).attr('x',340).attr('y',function(){return tableBarYOffset+i*24.8;}).attr('height',tableRowHeight).attr('width',68).attr('fill',colors.lightgrey);// col 3 bar\nd3.select('#vac-tab').append('rect').attr('class','col3bar').attr('id','col3bar'+i).attr('x',340).attr('y',function(){return tableBarYOffset+i*24.8;}).attr('height',tableRowHeight).attr('width',0).attr('fill',colors.blue);// col 4 bg\nd3.select('#vac-tab').append('rect').attr('class','col4bg colbg').attr('id','col4bg'+i).attr('x',454).attr('y',function(){return 67+i*24.8;}).attr('height',tableRowHeight).attr('width',68).attr('fill',colors.lightgrey);// col 3 bar\nd3.select('#vac-tab').append('rect').attr('class','col4bar').attr('id','col4bar'+i).attr('x',454).attr('y',function(){return 67+i*24.8;}).attr('height',tableRowHeight).attr('width',0).attr('fill',colors.blue);for(x=0;x<6;x++){d3.select('#col'+x+'_sort_desc').attr('opacity',0);d3.select('#col'+x+'_sort_asc').attr('opacity',0);d3.select('#col'+x+'_sort').style('cursor','pointer').on('click',function(){var thisId=d3.select(this).attr('id');if(options.table_sort==thisId){if(options.table_sort_direction=='desc'){options.table_sort_direction='asc';}else{options.table_sort_direction='desc';}}else{options.table_sort=thisId;options.table_sort_direction='desc';}options.page=1;updateTable(data,options);});// d3.select('#col1_sort_desc').attr('opacity', 1);\n}};for(var i=0;i<10;i++){var x;_loop(i);}d3.select('#reset_locations').attr('display','none');printCopySave();}// print copy save\nvar printing;function printCopySave(){tippy('#button-png',{content:'Save as PNG',duration:0,placement:'bottom',theme:'light',arrow:true,delay:[500,200]});tippy('#button-copy',{content:'Copy to clipboard',duration:0,placement:'bottom',theme:'light',arrow:true,delay:[500,200]});tippy('#button-print',{content:'Print to PDF',duration:0,placement:'bottom',theme:'light',arrow:true,delay:[500,200]});d3.select('#button-print').on('click',function(){if(printing)return false;printing=true;setTimeout(function(){html2canvas(document.querySelector(\"#root\"),{allowTaint:true,onclone:function onclone(doc){},useCORS:false,foreignObjectRendering:true,ignoreElements:function ignoreElements(element){// if(element.id=='adm-toggle') return true;\n// if($(element).hasClass('select2')) return true;\nreturn false;},scale:2,x:0,y:0,scrollX:0,scrollY:0,logging:false}).then(function(canvas){var img=canvas.toDataURL(\"image/png\");var pdf=new jsPDF(\"l\",\"mm\",\"a4\");var imgProps=pdf.getImageProperties(img);var pdfWidth=pdf.internal.pageSize.getWidth();var pdfHeight=imgProps.height*pdfWidth/imgProps.width;pdf.addImage(img,'JPEG',10,10,pdfWidth-20,pdfHeight-30);pdf.save('deep-pdf-export.pdf');printing=false;},200);});});d3.select('#button-png').on('click',function(){if(printing)return false;printing=true;setTimeout(function(){html2canvas(document.querySelector(\"#root\"),{allowTaint:true,onclone:function onclone(doc){},useCORS:false,foreignObjectRendering:true,ignoreElements:function ignoreElements(element){// if(element.id=='adm-toggle') return true;\n// if($(element).hasClass('select2')) return true;\nreturn false;},scale:2,x:0,y:0,scrollX:0,scrollY:0,logging:false}).then(function(canvas){var img=canvas.toDataURL(\"image/png\").replace(\"image/png\",\"image/octet-stream\");var link=document.createElement('a');link.download='dashboard-export.png';link.href=img;link.click();link.remove();printing=false;},200);});});//   d3.select('#button-copy').on('click',function(){\n//     if(printing) return false;\n//     printing = true;\n//     setTimeout(function(){\n//       html2canvas(document.querySelector(\"#root\"),{\n//             allowTaint: true,\n//             onclone: function(doc){\n//             },\n//             useCORS: false,\n//             foreignObjectRendering: true,\n//             ignoreElements: function(element){\n//               // if(element.id=='adm-toggle') return true;\n//               // if($(element).hasClass('select2')) return true;\n//             return false;\n//             },\n//             scale: 1.8,\n//             windowWidth: 2800,\n//             windowHeight: 2000,\n//             logging: false\n//         }).then(canvas => {\n//           canvas.toBlob(blob, function(){\n//             navigator.clipboard.write([\n//               new ClipboardItem({\n//                 [blob.type]: blob\n//               })\n//             ]).then(() => {\n//             })\n//           })\n//         // copied to clipboard\n//         printing = false;\n//       });\n//       },200);\n//     });\n}export default Layout;function toggle(collection,item){var idx=collection.indexOf(item);if(idx!==-1){collection.splice(idx,1);}else{collection.push(item);}}/*\n\n#timechart-type-toggle #timechart-type-toggle-stacked\n#timechart-type-toggle #timechart-type-toggle-non-cumulative\n#timechart-type-toggle #timechart-type-toggle-cumulative\n\n#timechart-frequency-toggle #timechart-frequency-toggle-day\n#timechart-frequency-toggle #timechart-frequency-toggle-week\n#timechart-frequency-toggle #timechart-frequency-toggle-month\n\n#map-toggle #map-toggle-bi-weekly-change\n#map-toggle #map-toggle-deaths\n#map-toggle #map-toggle-percent-fully-vaccinated\n#map-toggle #map-toggle-percent-vaccine-acceptance\n#map-toggle #map-toggle-cases\n\n#tabs #bubble-chart-tab\n#tabs #indicators-tab\n#tabs #vaccination-tab\n\n#hdi-toggle #hdi-toggle-very-high\n#hdi-toggle #hdi-toggle-high\n#hdi-toggle #hdi-toggle-medium\n#hdi-toggle #hdi-toggle-low\n\n\n#inform-toggle #inform-toggle-no-score\n#inform-toggle #inform-toggle-low\n#inform-toggle #inform-toggle-medium\n#inform-toggle #inform-toggle-high\n#inform-toggle #inform-toggle-very-high\n\n*/","map":{"version":3,"sources":["/Users/matthewsmawfield/www/ifrc-covid-dataviz/src/Layout.js"],"names":["d3","drawTimechart","updateTimechart","updateRegionchart","colors","tippy","jsPDF","html2canvas","selectedToggle","unselectedToggle","unselectedToggleText","selectedToggleText","Layout","svg","options","data","filter","updateTable","updateMap","select","attr","style","black","on","event","bd","transition","duration","blue","d","i","region_filter","region_switch","region_chart_toggle","selectAll","map_toggle","timeline_type","content","placement","theme","arrow","delay","timeline_frequency","text","toggle","hdi_filter","length","forEach","inform_filter","tab_toggle","append","timechartContainer","tcSize","x","y","width","height","timechartSvg","layer1","timechartBg","tableRowHeight","tableBarYOffset","lightgrey","thisId","table_sort","table_sort_direction","page","printCopySave","printing","setTimeout","document","querySelector","allowTaint","onclone","doc","useCORS","foreignObjectRendering","ignoreElements","element","scale","scrollX","scrollY","logging","then","canvas","img","toDataURL","pdf","imgProps","getImageProperties","pdfWidth","internal","pageSize","getWidth","pdfHeight","addImage","save","replace","link","createElement","download","href","click","remove","collection","item","idx","indexOf","splice","push"],"mappings":"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","sourcesContent":["import * as d3 from \"d3\";\nimport {drawTimechart, updateTimechart} from './Timechart';\nimport {updateRegionchart} from './Regionchart';\nimport colors from './colors';\nimport tippy from 'tippy.js';\nimport 'tippy.js/dist/svg-arrow.css';\nimport 'tippy.js/themes/light.css';\nimport { jsPDF } from \"jspdf\";\nimport html2canvas from 'html2canvas';\n\nconst selectedToggle = '#595454';\nconst unselectedToggle = '#EAEAEA';\nconst unselectedToggleText = '#000';\nconst selectedToggleText = '#FFF';\n\nfunction Layout(svg, options, data, filter, updateTable, updateMap) {\n\n  // vaccine info\n  d3.select('#vaccine_tooltip').attr('opacity', 0).style('display', 'none');\n  d3.select('#vaccine_info path').attr('fill', colors.black);\n\n  svg.select('#vaccine_info').style('cursor', 'pointer')\n  .on('mouseover', function(event, bd){\n    d3.select('#svg_container').style('z-index', 10);\n    d3.select('#vaccine_tooltip').style('display', 'inline').transition().duration(500).attr('opacity', 1);\n    d3.select('#vaccine_info path').transition().duration(200).attr('fill', colors.blue);\n  }).on('mouseout', function(event, d){\n    d3.select('#svg_container').style('z-index', 1);\n    d3.select('#vaccine_tooltip').style('display', 'none').attr('opacity', 0);\n    d3.select('#vaccine_info path').transition().duration(500).attr('fill', colors.black);\n  })\n\n  // region chart toggle\n  svg.select('#region_remove_filter').attr('opacity', 0).style('cursor', 'pointer').on('click', function(d,i){\n    options.region_filter = []; \n    filter('clear-region');\n  });\n\n  svg.select('#region_switch').style('cursor', 'pointer').on('click', function(d,i){\n    if(options.region_switch=='total'){\n      options.region_switch = 'per100';\n      d3.select('#region_switch_toggle').transition().duration(200).attr('x', 15.1);\n    } else {\n      options.region_switch = 'total';\n      d3.select('#region_switch_toggle').transition().duration(200).attr('x', 3.1);\n    }\n    updateRegionchart(options,data);\n  })\n\n  svg.select('#region-chart-toggle #region-chart-toggle-cases').style('cursor', 'pointer').on('click', function(d){\n    if(options.region_chart_toggle === 'cases') return false;\n    options.region_chart_toggle = 'cases';\n    svg.selectAll('#region-chart-toggle rect').attr('fill', unselectedToggle);\n    svg.selectAll('#region-chart-toggle text').attr('fill', unselectedToggleText);\n    svg.select('#region-chart-toggle-cases rect').attr('fill', selectedToggle);\n    svg.select('#region-chart-toggle-cases text').attr('fill', selectedToggleText);\n    updateRegionchart(options,data);\n  });\n\n  svg.select('#region-chart-toggle #region-chart-toggle-deaths').style('cursor', 'pointer').on('click', function(d){\n    if(options.region_chart_toggle === 'deaths') return false;\n    options.region_chart_toggle = 'deaths';\n    svg.selectAll('#region-chart-toggle rect').attr('fill', unselectedToggle);\n    svg.selectAll('#region-chart-toggle text').attr('fill', unselectedToggleText);\n    svg.select('#region-chart-toggle-deaths rect').attr('fill', selectedToggle);\n    svg.select('#region-chart-toggle-deaths text').attr('fill', selectedToggleText);\n    updateRegionchart(options,data);\n  });\n\n  svg.select('#region-chart-toggle #region-chart-toggle-vaccines').style('cursor', 'pointer').on('click', function(d){\n    if(options.region_chart_toggle === 'vaccines') return false;\n    options.region_chart_toggle = 'vaccines';\n    svg.selectAll('#region-chart-toggle rect').attr('fill', unselectedToggle);\n    svg.selectAll('#region-chart-toggle text').attr('fill', unselectedToggleText);\n    svg.select('#region-chart-toggle-vaccines rect').attr('fill', selectedToggle);\n    svg.select('#region-chart-toggle-vaccines text').attr('fill', selectedToggleText);\n    updateRegionchart(options,data);\n  });\n\n  // map toggle\n  svg.select('#map-toggle #map-toggle-bi-weekly-change').style('cursor', 'pointer').on('click', function(d){\n    if(options.map_toggle === 'bi-weekly-change') return false;\n    options.map_toggle = 'bi-weekly-change';\n    svg.selectAll('#map-toggle rect').attr('fill', unselectedToggle);\n    svg.selectAll('#map-toggle text').attr('fill', unselectedToggleText);\n    svg.select('#map-toggle-bi-weekly-change rect').attr('fill', selectedToggle);\n    svg.select('#map-toggle-bi-weekly-change text').attr('fill', selectedToggleText);\n    // update map legend\n\n    updateMap(data, options, 700);\n  });\n\n  svg.select('#map-toggle #map-toggle-cases').style('cursor', 'pointer').on('click', function(d){\n    if(options.map_toggle === 'cases') return false;\n    options.map_toggle = 'cases';\n    svg.selectAll('#map-toggle rect').attr('fill', unselectedToggle);\n    svg.selectAll('#map-toggle text').attr('fill', unselectedToggleText);\n    svg.select('#map-toggle-cases rect').attr('fill', selectedToggle);\n    svg.select('#map-toggle-cases text').attr('fill', selectedToggleText);\n    // update map legend\n\n    updateMap(data, options, 700);\n  });\n\n  svg.select('#map-toggle #map-toggle-deaths').style('cursor', 'pointer').on('click', function(d){\n    if(options.map_toggle === 'deaths') return false;\n    options.map_toggle = 'deaths';\n    svg.selectAll('#map-toggle rect').attr('fill', unselectedToggle);\n    svg.selectAll('#map-toggle text').attr('fill', unselectedToggleText);\n    svg.select('#map-toggle-deaths rect').attr('fill', selectedToggle);\n    svg.select('#map-toggle-deaths text').attr('fill', selectedToggleText);\n    // update map legend\n\n    updateMap(data, options, 700);\n  });\n\n  svg.select('#map-toggle #map-toggle-percent-fully-vaccinated').style('cursor', 'pointer').on('click', function(d){\n    if(options.map_toggle === 'percent-fully-vaccinated') return false;\n    options.map_toggle = 'percent-fully-vaccinated';\n    svg.selectAll('#map-toggle rect').attr('fill', unselectedToggle);\n    svg.selectAll('#map-toggle text').attr('fill', unselectedToggleText);\n    svg.select('#map-toggle-percent-fully-vaccinated rect').attr('fill', selectedToggle);\n    svg.select('#map-toggle-percent-fully-vaccinated text').attr('fill', selectedToggleText);\n    // update map legend\n    updateMap(data, options, 700);\n  });\n\n  svg.select('#map-toggle #map-toggle-percent-vaccine-acceptance').style('cursor', 'pointer').on('click', function(d){\n    if(options.map_toggle === 'percent-vaccine-acceptance') return false;\n    options.map_toggle = 'percent-vaccine-acceptance';\n    svg.selectAll('#map-toggle rect').attr('fill', unselectedToggle);\n    svg.selectAll('#map-toggle text').attr('fill', unselectedToggleText);\n    svg.select('#map-toggle-percent-vaccine-acceptance rect').attr('fill', selectedToggle);\n    svg.select('#map-toggle-percent-vaccine-acceptance text').attr('fill', selectedToggleText);\n    // update map legend\n    updateMap(data, options, 700);\n  });\n\n    // time chart type \n    svg.select('#timechart-type-toggle #timechart-type-toggle-cumulative').style('cursor', 'pointer').on('click', function(d){\n      if(options.timeline_type === 'cumulative') return false;\n      options.timeline_type = 'cumulative';\n      svg.selectAll('#timechart-type-toggle rect').attr('fill', unselectedToggle);\n      svg.selectAll('#timechart-type-toggle polyline').attr('stroke', unselectedToggleText);\n      svg.select('#timechart-type-toggle-cumulative rect').attr('fill', selectedToggle);\n      svg.select('#timechart-type-toggle-cumulative polyline').attr('stroke', selectedToggleText);\n      svg.selectAll('#timechart-type-toggle-stacked polygon').attr('fill', selectedToggle);\n      updateTimechart(data, options);\n    });\n  \n    tippy('#timechart-type-toggle-cumulative', {\n      content: 'Cumulative',\n      duration: 0,\n      placement: 'bottom',\n      theme: 'light',\n      arrow: true,\n      delay: [500, 200],\n    });\n\n    svg.select('#timechart-type-toggle #timechart-type-toggle-non-cumulative').style('cursor', 'pointer').on('click', function(d){\n      if(options.timeline_type === 'non-cumulative') return false;\n      options.timeline_type = 'non-cumulative';\n      svg.selectAll('#timechart-type-toggle rect').attr('fill', unselectedToggle);\n      svg.selectAll('#timechart-type-toggle polyline').attr('stroke', unselectedToggleText);\n      svg.select('#timechart-type-toggle-non-cumulative rect').attr('fill', selectedToggle);\n      svg.select('#timechart-type-toggle-non-cumulative polyline').attr('stroke', selectedToggleText);\n      svg.selectAll('#timechart-type-toggle-stacked polygon').attr('fill', selectedToggle);\n      updateTimechart(data, options);\n    });\n\n    tippy('#timechart-type-toggle-non-cumulative', {\n      content: 'Non-cumulative',\n      duration: 0,\n      placement: 'bottom',\n      theme: 'light',\n      arrow: true,\n      delay: [500, 200],\n    });\n\n    svg.select('#timechart-type-toggle #timechart-type-toggle-stacked').style('cursor', 'pointer').on('click', function(d){\n      if(options.timeline_type === 'stacked') return false;\n      options.timeline_type = 'stacked';\n      svg.selectAll('#timechart-type-toggle rect').attr('fill', unselectedToggle);\n      svg.selectAll('#timechart-type-toggle polyline').attr('stroke', unselectedToggleText);\n      svg.select('#timechart-type-toggle-stacked rect').attr('fill', selectedToggle);\n      svg.select('#timechart-type-toggle-stacked polyline').attr('stroke', selectedToggleText);\n      svg.selectAll('#timechart-type-toggle-stacked polygon').attr('fill', selectedToggleText);\n      updateTimechart(data, options);\n    });\n\n    tippy('#timechart-type-toggle-stacked', {\n      content: 'Stacked 100%',\n      duration: 0,\n      placement: 'bottom',\n      theme: 'light',\n      arrow: true,\n      delay: [500, 200],\n    });\n\n  // time chart frequency toggle\n  svg.select('#timechart-frequency-toggle #timechart-frequency-toggle-day').style('cursor', 'pointer').on('click', function(d){\n    if(options.timeline_frequency === 'day') return false;\n    options.timeline_frequency = 'day';\n    svg.selectAll('#timechart-frequency-toggle rect').attr('fill', unselectedToggle);\n    svg.selectAll('#timechart-frequency-toggle text').attr('fill', unselectedToggleText);\n    svg.select('#timechart-frequency-toggle-day rect').attr('fill', selectedToggle);\n    svg.select('#timechart-frequency-toggle-day text').attr('fill', selectedToggleText);\n    svg.select('#tooltip_frequency tspan').attr('text-anchor', 'end').attr('dx', 20).text('DAY');\n    drawTimechart(data, options);\n  });\n\n  svg.select('#timechart-frequency-toggle #timechart-frequency-toggle-week').style('cursor', 'pointer').on('click', function(d){\n    if(options.timeline_frequency === 'week') return false;\n    options.timeline_frequency = 'week';\n    svg.selectAll('#timechart-frequency-toggle rect').attr('fill', unselectedToggle);\n    svg.selectAll('#timechart-frequency-toggle text').attr('fill', unselectedToggleText);\n    svg.select('#timechart-frequency-toggle-week rect').attr('fill', selectedToggle);\n    svg.select('#tooltip_frequency tspan').attr('text-anchor', 'end').attr('dx', 20).text('WEEK');\n    svg.select('#timechart-frequency-toggle-week text').attr('fill', selectedToggleText);\n    drawTimechart(data, options);\n  });\n\n  svg.select('#timechart-frequency-toggle #timechart-frequency-toggle-month').style('cursor', 'pointer').on('click', function(d){\n    if(options.timeline_frequency === 'month') return false;\n    options.timeline_frequency = 'month';\n    svg.selectAll('#timechart-frequency-toggle rect').attr('fill', unselectedToggle);\n    svg.selectAll('#timechart-frequency-toggle text').attr('fill', unselectedToggleText);\n    svg.select('#timechart-frequency-toggle-month rect').attr('fill', selectedToggle);\n    svg.select('#tooltip_frequency tspan').attr('text-anchor', 'end').attr('dx', 20).text('MONTH');\n    svg.select('#timechart-frequency-toggle-month text').attr('fill', selectedToggleText);\n    drawTimechart(data, options);\n  });\n\n    // HDI toggle\n\n    svg.select('#hdi_remove_filter').attr('opacity', 0).style('cursor', 'pointer').on('click', function(d,i){\n      d3.selectAll('#hdi-toggle-very-high, #hdi-toggle-high, #hdi-toggle-medium, #hdi-toggle-low').attr('opacity', 1);\n      filter('clear-hdi');\n    });\n\n    svg.select('#hdi-toggle #hdi-toggle-very-high').style('cursor', 'pointer').on('click', function(d){\n      toggle(options.hdi_filter, 'very-high');\n      if(options.hdi_filter.length === 4) { options.hdi_filter = []; d3.selectAll('#hdi-toggle-very-high, #hdi-toggle-high, #hdi-toggle-medium, #hdi-toggle-low').attr('opacity', 1); }\n      else if(options.hdi_filter.length === 0) { d3.selectAll('#hdi-toggle-very-high, #hdi-toggle-high, #hdi-toggle-medium, #hdi-toggle-low').attr('opacity', 1);}\n      else if(options.hdi_filter.length > 0) { d3.selectAll('#hdi-toggle-very-high, #hdi-toggle-high, #hdi-toggle-medium, #hdi-toggle-low').attr('opacity', 0.3);}\n      if(options.hdi_filter.length > 0){\n        options.hdi_filter.forEach(function(d,i){\n          d3.select('#hdi-toggle-'+d).attr('opacity', 1);\n        })\n      }\n      filter('hdi');\n    });\n\n    svg.select('#hdi-toggle #hdi-toggle-high').style('cursor', 'pointer').on('click', function(d){\n      toggle(options.hdi_filter, 'high');\n      if(options.hdi_filter.length === 4) { options.hdi_filter = []; d3.selectAll('#hdi-toggle-very-high, #hdi-toggle-high, #hdi-toggle-medium, #hdi-toggle-low').attr('opacity', 1); }\n      else if(options.hdi_filter.length === 0) { d3.selectAll('#hdi-toggle-very-high, #hdi-toggle-high, #hdi-toggle-medium, #hdi-toggle-low').attr('opacity', 1);}\n      else if(options.hdi_filter.length > 0) { d3.selectAll('#hdi-toggle-very-high, #hdi-toggle-high, #hdi-toggle-medium, #hdi-toggle-low').attr('opacity', 0.3);}\n      if(options.hdi_filter.length > 0){\n        options.hdi_filter.forEach(function(d,i){\n          d3.select('#hdi-toggle-'+d).attr('opacity', 1);\n        })\n      }\n      filter('hdi');\n    });\n    svg.select('#hdi-toggle #hdi-toggle-medium').style('cursor', 'pointer').on('click', function(d){\n      toggle(options.hdi_filter, 'medium');\n      if(options.hdi_filter.length === 4) { options.hdi_filter = []; d3.selectAll('#hdi-toggle-very-high, #hdi-toggle-high, #hdi-toggle-medium, #hdi-toggle-low').attr('opacity', 1); }\n      else if(options.hdi_filter.length === 0) { d3.selectAll('#hdi-toggle-very-high, #hdi-toggle-high, #hdi-toggle-medium, #hdi-toggle-low').attr('opacity', 1);}\n      else if(options.hdi_filter.length > 0) { d3.selectAll('#hdi-toggle-very-high, #hdi-toggle-high, #hdi-toggle-medium, #hdi-toggle-low').attr('opacity', 0.3);}\n      if(options.hdi_filter.length > 0){\n        options.hdi_filter.forEach(function(d,i){\n          d3.select('#hdi-toggle-'+d).attr('opacity', 1);\n        })\n      }\n      filter('hdi');\n    });\n    svg.select('#hdi-toggle #hdi-toggle-low').style('cursor', 'pointer').on('click', function(d){\n      toggle(options.hdi_filter, 'low');\n      if(options.hdi_filter.length === 4) { options.hdi_filter = []; d3.selectAll('#hdi-toggle-very-high, #hdi-toggle-high, #hdi-toggle-medium, #hdi-toggle-low').attr('opacity', 1);}\n      else if(options.hdi_filter.length === 0) { d3.selectAll('#hdi-toggle-very-high, #hdi-toggle-high, #hdi-toggle-medium, #hdi-toggle-low').attr('opacity', 1);}\n      else if(options.hdi_filter.length > 0) { d3.selectAll('#hdi-toggle-very-high, #hdi-toggle-high, #hdi-toggle-medium, #hdi-toggle-low').attr('opacity', 0.3);}\n      if(options.hdi_filter.length > 0){\n        options.hdi_filter.forEach(function(d,i){\n          d3.select('#hdi-toggle-'+d).attr('opacity', 1);\n        })\n      }\n      filter('hdi');\n    });\n\n    // inform severity toggle\n\n    svg.select('#inform_remove_filter').attr('opacity', 0).style('cursor', 'pointer').on('click', function(d,i){\n      d3.selectAll('#inform-toggle-very-high, #inform-toggle-high, #inform-toggle-medium, #inform-toggle-low, #inform-toggle-no-score').attr('opacity', 1);\n      filter('clear-inform');\n    });\n\n    svg.select('#inform-toggle #inform-toggle-no-score').style('cursor', 'pointer').on('click', function(d){\n      toggle(options.inform_filter, 'no-score');\n      if(options.inform_filter.length === 5) { options.inform_filter = []; d3.selectAll('#inform-toggle-very-high, #inform-toggle-high, #inform-toggle-medium, #inform-toggle-low, #inform-toggle-no-score').attr('opacity', 1);}\n      else if(options.inform_filter.length === 0) { d3.selectAll('#inform-toggle-very-high, #inform-toggle-high, #inform-toggle-medium, #inform-toggle-low, #inform-toggle-no-score').attr('opacity', 1);}\n      else if(options.inform_filter.length > 0) { d3.selectAll('#inform-toggle-very-high, #inform-toggle-high, #inform-toggle-medium, #inform-toggle-low, #inform-toggle-no-score').attr('opacity', 0.3);}\n      if(options.inform_filter.length > 0){\n        options.inform_filter.forEach(function(d,i){\n          d3.select('#inform-toggle-'+d).attr('opacity', 1);\n        })\n      }\n      filter('inform');\n    });\n\n    svg.select('#inform-toggle #inform-toggle-low').style('cursor', 'pointer').on('click', function(d){\n      toggle(options.inform_filter, 'low');\n      if(options.inform_filter.length === 5) { options.inform_filter = []; d3.selectAll('#inform-toggle-very-high, #inform-toggle-high, #inform-toggle-medium, #inform-toggle-low, #inform-toggle-no-score').attr('opacity', 1);}\n      else if(options.inform_filter.length === 0) { d3.selectAll('#inform-toggle-very-high, #inform-toggle-high, #inform-toggle-medium, #inform-toggle-low, #inform-toggle-no-score').attr('opacity', 1);}\n      else if(options.inform_filter.length > 0) { d3.selectAll('#inform-toggle-very-high, #inform-toggle-high, #inform-toggle-medium, #inform-toggle-low, #inform-toggle-no-score').attr('opacity', 0.3);}\n      if(options.inform_filter.length > 0){\n        options.inform_filter.forEach(function(d,i){\n          d3.select('#inform-toggle-'+d).attr('opacity', 1);\n        })\n      }\n      filter('inform');\n    });\n\n    svg.select('#inform-toggle #inform-toggle-medium').style('cursor', 'pointer').on('click', function(d){\n      toggle(options.inform_filter, 'medium');\n      if(options.inform_filter.length === 5) { options.inform_filter = []; d3.selectAll('#inform-toggle-very-high, #inform-toggle-high, #inform-toggle-medium, #inform-toggle-low, #inform-toggle-no-score').attr('opacity', 1);}\n      else if(options.inform_filter.length === 0) { d3.selectAll('#inform-toggle-very-high, #inform-toggle-high, #inform-toggle-medium, #inform-toggle-low, #inform-toggle-no-score').attr('opacity', 1);}\n      else if(options.inform_filter.length > 0) { d3.selectAll('#inform-toggle-very-high, #inform-toggle-high, #inform-toggle-medium, #inform-toggle-low, #inform-toggle-no-score').attr('opacity', 0.3);}\n      if(options.inform_filter.length > 0){\n        options.inform_filter.forEach(function(d,i){\n          d3.select('#inform-toggle-'+d).attr('opacity', 1);\n        })\n      }\n      filter('inform');\n    });\n\n    svg.select('#inform-toggle #inform-toggle-high').style('cursor', 'pointer').on('click', function(d){\n      toggle(options.inform_filter, 'high');\n      if(options.inform_filter.length === 5) { options.inform_filter = []; d3.selectAll('#inform-toggle-very-high, #inform-toggle-high, #inform-toggle-medium, #inform-toggle-low, #inform-toggle-no-score').attr('opacity', 1);}\n      else if(options.inform_filter.length === 0) { d3.selectAll('#inform-toggle-very-high, #inform-toggle-high, #inform-toggle-medium, #inform-toggle-low, #inform-toggle-no-score').attr('opacity', 1);}\n      else if(options.inform_filter.length > 0) { d3.selectAll('#inform-toggle-very-high, #inform-toggle-high, #inform-toggle-medium, #inform-toggle-low, #inform-toggle-no-score').attr('opacity', 0.3);}\n      if(options.inform_filter.length > 0){\n        options.inform_filter.forEach(function(d,i){\n          d3.select('#inform-toggle-'+d).attr('opacity', 1);\n        })\n      }\n      filter('inform');\n    });\n\n    svg.select('#inform-toggle #inform-toggle-very-high').style('cursor', 'pointer').on('click', function(d){\n      toggle(options.inform_filter, 'very-high');\n      if(options.inform_filter.length === 5) { options.inform_filter = []; d3.selectAll('#inform-toggle-very-high, #inform-toggle-high, #inform-toggle-medium, #inform-toggle-low, #inform-toggle-no-score').attr('opacity', 1);}\n      else if(options.inform_filter.length === 0) { d3.selectAll('#inform-toggle-very-high, #inform-toggle-high, #inform-toggle-medium, #inform-toggle-low, #inform-toggle-no-score').attr('opacity', 1);}\n      else if(options.inform_filter.length > 0) { d3.selectAll('#inform-toggle-very-high, #inform-toggle-high, #inform-toggle-medium, #inform-toggle-low, #inform-toggle-no-score').attr('opacity', 0.3);}\n      if(options.inform_filter.length > 0){\n        options.inform_filter.forEach(function(d,i){\n          d3.select('#inform-toggle-'+d).attr('opacity', 1);\n        })\n      }\n      filter('inform');\n    });\n  \n  // tabs\n\n  d3.select('#additional-indicators-tab').attr('opacity', 0).select('#additional-indicators-tab-content').attr('display', 'none');\n  d3.select('#vac-tab').attr('opacity', 1).select('#vac-tab-content').attr('display', 'inline');\n  d3.select('#bubblechart-tab').attr('opacity', 0).selectAll('#bubblechart, #bubblechart-tab-content').attr('display', 'none');\n  d3.select('#bubbleSelectContainer').style('display', 'none');\n\n  svg.select('#tabs #vaccination-tab').style('cursor', 'pointer').on('click', function(d){\n    if(options.tab_toggle === 'vaccination-data') return false;\n    options.tab_toggle = 'vaccination-data';\n    d3.select('#additional-indicators-tab').attr('opacity', 0).select('#additional-indicators-tab-content').attr('display', 'none');\n    d3.select('#vac-tab').attr('opacity', 1).select('#vac-tab-content').attr('display', 'inline');\n    d3.select('#bubblechart-tab').attr('opacity', 0).selectAll('#bubblechart, #bubblechart-tab-content').attr('display', 'none');\n    svg.selectAll('#tabs rect').attr('fill', unselectedToggle);\n    svg.selectAll('#tabs text').attr('fill', unselectedToggleText);\n    svg.select('#vaccination-tab rect').attr('fill', selectedToggle);\n    svg.select('#vaccination-tab text').attr('fill', selectedToggleText);\n    d3.select('#bubbleSelectContainer').style('display', 'none');\n\n  });\n\n  svg.select('#tabs #indicators-tab').style('cursor', 'pointer').on('click', function(d){\n    if(options.tab_toggle === 'indicators') return false;\n    options.tab_toggle = 'indicators';\n    d3.select('#additional-indicators-tab').attr('opacity', 1).select('#additional-indicators-tab-content').attr('display', 'inline');\n    d3.select('#vac-tab').attr('opacity', 0).select('#vac-tab-content').attr('display', 'none');\n    d3.select('#bubblechart-tab').attr('opacity', 0).selectAll('#bubblechart, #bubblechart-tab-content').attr('display', 'none');\n    svg.selectAll('#tabs rect').attr('fill', unselectedToggle);\n    svg.selectAll('#tabs text').attr('fill', unselectedToggleText);\n    svg.select('#indicators-tab rect').attr('fill', selectedToggle);\n    svg.select('#indicators-tab text').attr('fill', selectedToggleText);\n    d3.select('#bubbleSelectContainer').style('display', 'none');\n\n  });\n\n  svg.select('#tabs #bubble-chart-tab').style('cursor', 'pointer').on('click', function(d){\n    if(options.tab_toggle === 'bubble-chartt') return false;\n    options.tab_toggle = 'bubble-chart';\n    d3.select('#additional-indicators-tab').attr('opacity', 0).select('#additional-indicators-tab-content').attr('display', 'none');\n    d3.select('#vac-tab').attr('opacity', 0).select('#vac-tab-content').attr('display', 'none');\n    d3.select('#bubblechart-tab').attr('opacity', 1).selectAll('#bubblechart, #bubblechart-tab-content').attr('display', 'inline');\n    svg.selectAll('#tabs rect').attr('fill', unselectedToggle);\n    svg.selectAll('#tabs text').attr('fill', unselectedToggleText);\n    svg.select('#bubble-chart-tab rect').attr('fill', selectedToggle);\n    svg.select('#bubble-chart-tab text').attr('fill', selectedToggleText);\n    d3.select('#bubbleSelectContainer').style('display', 'inline-block');\n\n  });\n\n  // time chart mask\n    d3.select('#svg defs').append('clipPath').attr('id', 'mask')\n    .append('rect')\n    .attr('y', 340)\n    .attr('height', 590)\n    .attr('width', 660)\n    .attr('x', 22);\n\n  \n  // append timechart svg\n  const timechartContainer = svg.select('#timechart_container').attr('opacity', 0);\n  const tcSize = {\n    x: timechartContainer.attr('x'), y: timechartContainer.attr('y'), width: timechartContainer.attr('width'), height: timechartContainer.attr('height')\n  }\n\n  const timechartSvg = svg.append('svg').attr('id', 'timechart_svg').attr('viewBox', '0 0 '+2000 +' '+ tcSize.height)\n  .attr('preserveAspectRatio', \"none\")\n  .attr('x', tcSize.x)\n  .attr('y', tcSize.y)\n  .attr('width', tcSize.width)\n  .attr('height', tcSize.height)\n\n  const layer1 = timechartSvg\n  .append('g')\n  .attr('id', 'layer1')\n\n  const timechartBg = timechartSvg.append('g').attr('id', 'layer0');\n\n  layer1.append('rect')\n  .attr('x', 0)\n  .attr('y', 0)\n  .attr('width', '100%')\n  .attr('height', '100%')\n  .attr('opacity', 0)\n  .style('fill', 'transparent');\n  \n  // table bars\n\n  var tableRowHeight = 18;\n  var tableBarYOffset = 68;\n\n  for(let i = 0; i < 10; i++){\n\n    // col 1 bg\n    d3.select('#vac-tab').append('rect')\n    .attr('class','col1bg colbg')\n    .attr('id','col1bg'+i)\n    .attr('x', 120)\n    .attr('y', function(){\n      return tableBarYOffset+(i*24.8);\n    })\n    .attr('height', tableRowHeight)\n    .attr('width', 68)\n    .attr('fill', colors.lightgrey)\n\n    // col 1 bar\n    d3.select('#vac-tab').append('rect')\n    .attr('class','col1bar')\n    .attr('id','col1bar'+i)\n    .attr('x', 120)\n    .attr('y', function(){\n      return tableBarYOffset+(i*24.8);\n    })\n    .attr('height', tableRowHeight)\n    .attr('width', 0)\n    .attr('fill', colors.blue);\n\n    // col 2 bg\n    d3.select('#vac-tab').append('rect')\n    .attr('class','col2bg colbg')\n    .attr('id','col2bg'+i)\n    .attr('x', 230)\n    .attr('y', function(){\n      return tableBarYOffset+(i*24.8);\n    })\n    .attr('height', tableRowHeight)\n    .attr('width', 68)\n    .attr('fill', colors.lightgrey)\n\n    // col 2 bar\n    d3.select('#vac-tab').append('rect')\n    .attr('class','col2bar')\n    .attr('id','col2bar'+i)\n    .attr('x', 230)\n    .attr('y', function(){\n      return tableBarYOffset+(i*24.8);\n    })\n    .attr('height', tableRowHeight)\n    .attr('width', 0)\n    .attr('fill', colors.blue);\n\n    // col 3 bg\n    d3.select('#vac-tab').append('rect')\n    .attr('class','col3bg colbg')\n    .attr('id','col3bg'+i)\n    .attr('x', 340)\n    .attr('y', function(){\n      return tableBarYOffset+(i*24.8);\n    })\n    .attr('height', tableRowHeight)\n    .attr('width', 68)\n    .attr('fill', colors.lightgrey)\n\n    // col 3 bar\n    d3.select('#vac-tab').append('rect')\n    .attr('class','col3bar')\n    .attr('id','col3bar'+i)\n    .attr('x', 340)\n    .attr('y', function(){\n      return tableBarYOffset+(i*24.8);\n    })\n    .attr('height', tableRowHeight)\n    .attr('width', 0)\n    .attr('fill', colors.blue);\n\n    // col 4 bg\n    d3.select('#vac-tab').append('rect')\n    .attr('class','col4bg colbg')\n    .attr('id','col4bg'+i)\n    .attr('x', 454)\n    .attr('y', function(){\n      return 67+(i*24.8);\n    })\n    .attr('height', tableRowHeight)\n    .attr('width', 68)\n    .attr('fill', colors.lightgrey)\n\n    // col 3 bar\n    d3.select('#vac-tab').append('rect')\n    .attr('class','col4bar')\n    .attr('id','col4bar'+i)\n    .attr('x', 454)\n    .attr('y', function(){\n      return 67+(i*24.8);\n    })\n    .attr('height', tableRowHeight)\n    .attr('width', 0)\n    .attr('fill', colors.blue);\n\n    for(var x = 0; x<6; x++){\n      d3.select('#col'+x+'_sort_desc').attr('opacity', 0);\n      d3.select('#col'+x+'_sort_asc').attr('opacity', 0);\n      d3.select('#col'+x+'_sort').style('cursor', 'pointer')\n      .on('click', function(){\n        var thisId = d3.select(this).attr('id');\n        if(options.table_sort==thisId){\n          if(options.table_sort_direction=='desc'){\n            options.table_sort_direction = 'asc';\n          } else {\n            options.table_sort_direction = 'desc';\n          }\n        } else {\n          options.table_sort = thisId;\n          options.table_sort_direction = 'desc';\n        }\n        options.page = 1;\n        updateTable(data, options);\n    })\n    // d3.select('#col1_sort_desc').attr('opacity', 1);\n    }\n  }\n\n  d3.select('#reset_locations').attr('display', 'none');\n\n  printCopySave();\n\n}\n\n// print copy save\n\nvar printing;\n\nfunction printCopySave(){\n\n  tippy('#button-png', {\n    content: 'Save as PNG',\n    duration: 0,\n    placement: 'bottom',\n    theme: 'light',\n    arrow: true,\n    delay: [500, 200],\n  });\n\n  tippy('#button-copy', {\n    content: 'Copy to clipboard',\n    duration: 0,\n    placement: 'bottom',\n    theme: 'light',\n    arrow: true,\n    delay: [500, 200],\n  });\n\n  tippy('#button-print', {\n    content: 'Print to PDF',\n    duration: 0,\n    placement: 'bottom',\n    theme: 'light',\n    arrow: true,\n    delay: [500, 200],\n  });\n\n  d3.select('#button-print').on('click', function(){\n\n    if(printing) return false;\n    printing = true;\n\n    setTimeout(function(){\n      html2canvas(document.querySelector(\"#root\"),{\n            allowTaint: true,\n            onclone: function(doc){\n\n            },\n            useCORS: false,\n            foreignObjectRendering: true,\n            ignoreElements: function(element){\n              // if(element.id=='adm-toggle') return true;\n              // if($(element).hasClass('select2')) return true;\n            return false;\n            },\n            scale: 2,\n            x: 0,\n            y: 0,\n            scrollX: 0,\n            scrollY: 0,\n            logging: false\n        }).then(canvas => {\n          var img = canvas.toDataURL(\"image/png\");\n          var pdf = new jsPDF(\"l\", \"mm\", \"a4\");\n          var imgProps= pdf.getImageProperties(img);\n          var pdfWidth = pdf.internal.pageSize.getWidth();\n          var pdfHeight = (imgProps.height * pdfWidth) / imgProps.width;\n          pdf.addImage(img, 'JPEG', 10, 10, pdfWidth-20, pdfHeight-30);\n          pdf.save('deep-pdf-export.pdf');\n          printing = false;\n      },200);\n    });\n  });\n\n  d3.select('#button-png').on('click',function(){\n\n    if(printing) return false;\n    printing = true;\n\n    setTimeout(function(){\n      html2canvas(document.querySelector(\"#root\"),{\n            allowTaint: true,\n            onclone: function(doc){\n\n            },\n            useCORS: false,\n            foreignObjectRendering: true,\n            ignoreElements: function(element){\n              // if(element.id=='adm-toggle') return true;\n              // if($(element).hasClass('select2')) return true;\n            return false;\n            },\n            scale: 2,\n            x: 0,\n            y: 0,\n            scrollX: 0,\n            scrollY: 0,\n            logging: false\n        }).then(canvas => {\n\n      var img = canvas.toDataURL(\"image/png\").replace(\"image/png\", \"image/octet-stream\");\n      var link = document.createElement('a');\n      link.download = 'dashboard-export.png';\n      link.href = img;\n      link.click();\n      link.remove();\n\n      printing = false;\n      },200);\n    });\n  });\n\n  \n//   d3.select('#button-copy').on('click',function(){\n\n//     if(printing) return false;\n//     printing = true;\n\n//     setTimeout(function(){\n//       html2canvas(document.querySelector(\"#root\"),{\n//             allowTaint: true,\n//             onclone: function(doc){\n\n//             },\n//             useCORS: false,\n//             foreignObjectRendering: true,\n//             ignoreElements: function(element){\n//               // if(element.id=='adm-toggle') return true;\n//               // if($(element).hasClass('select2')) return true;\n//             return false;\n//             },\n//             scale: 1.8,\n//             windowWidth: 2800,\n//             windowHeight: 2000,\n//             logging: false\n//         }).then(canvas => {\n//           canvas.toBlob(blob, function(){\n//             navigator.clipboard.write([\n//               new ClipboardItem({\n//                 [blob.type]: blob\n//               })\n//             ]).then(() => {\n\n//             })\n//           })\n//         // copied to clipboard\n//         printing = false;\n//       });\n//       },200);\n//     });\n}\n\n\nexport default Layout;\n\nfunction toggle(collection, item) {\n  var idx = collection.indexOf(item);\n  if (idx !== -1) {\n    collection.splice(idx, 1);\n  } else {\n    collection.push(item);\n  }\n}\n\n/*\n\n#timechart-type-toggle #timechart-type-toggle-stacked\n#timechart-type-toggle #timechart-type-toggle-non-cumulative\n#timechart-type-toggle #timechart-type-toggle-cumulative\n\n#timechart-frequency-toggle #timechart-frequency-toggle-day\n#timechart-frequency-toggle #timechart-frequency-toggle-week\n#timechart-frequency-toggle #timechart-frequency-toggle-month\n\n#map-toggle #map-toggle-bi-weekly-change\n#map-toggle #map-toggle-deaths\n#map-toggle #map-toggle-percent-fully-vaccinated\n#map-toggle #map-toggle-percent-vaccine-acceptance\n#map-toggle #map-toggle-cases\n\n#tabs #bubble-chart-tab\n#tabs #indicators-tab\n#tabs #vaccination-tab\n\n#hdi-toggle #hdi-toggle-very-high\n#hdi-toggle #hdi-toggle-high\n#hdi-toggle #hdi-toggle-medium\n#hdi-toggle #hdi-toggle-low\n\n\n#inform-toggle #inform-toggle-no-score\n#inform-toggle #inform-toggle-low\n#inform-toggle #inform-toggle-medium\n#inform-toggle #inform-toggle-high\n#inform-toggle #inform-toggle-very-high\n\n*/"]},"metadata":{},"sourceType":"module"}